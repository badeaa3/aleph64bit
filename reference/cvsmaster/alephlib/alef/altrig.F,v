head	1.2;
access;
symbols
	aleph316_2:1.2
	aleph316_1:1.2
	aleph316:1.2
	aleph315_7:1.2
	aleph315_6:1.2
	aleph315_5:1.2
	aleph315_4:1.2
	aleph315_3:1.2
	aleph315_2:1.2
	aleph315_1:1.2
	aleph315:1.2
	aleph314_2:1.2
	aleph314_1:1.2
	aleph314:1.2
	aleph313_1:1.2
	aleph313:1.2
	aleph312_1:1.2
	aleph312:1.2
	aleph311_1:1.2
	aleph311:1.2
	aleph310_3:1.2
	aleph310_2:1.2
	aleph310_1:1.2
	aleph310:1.2
	aleph309_1:1.2
	aleph309:1.2
	aleph308_3:1.2
	aleph308_2:1.2
	aleph308_1:1.2
	aleph308:1.2
	aleph307_6:1.2
	aleph307_5:1.2
	aleph307_4:1.2
	aleph307_2:1.2
	aleph307_1:1.2
	aleph307:1.2
	aleph306:1.2
	aleph305_4:1.2
	aleph305_3:1.2
	aleph305_2:1.2
	aleph305_1:1.2
	aleph305:1.2
	aleph304_5:1.2
	aleph304_4:1.2
	aleph304_3:1.2
	aleph304_2:1.2
	aleph304_1:1.2
	aleph304:1.2
	aleph303_3:1.2
	aleph303_2:1.2
	aleph303_1_mc1:1.2
	aleph303_1:1.2
	aleph303:1.2
	aleph302_9:1.2
	aleph302_8:1.2
	aleph302_7:1.2
	aleph302_6:1.2
	aleph302_5:1.2
	aleph302_4:1.2
	aleph302_3:1.2
	aleph302_2:1.2
	aleph302_1:1.2
	aleph302:1.2
	aleph216:1.2
	aleph215_3:1.2
	aleph215_2:1.2
	aleph215:1.2
	aleph214:1.2
	aleph213:1.2
	aleph212:1.2
	ALEPH212:1.1.1;
locks; strict;
comment	@c @;


1.2
date	96.04.17.08.13.24;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	96.02.07.11.40.37;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.02.07.11.40.38;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@check 'TPR ' and ' RPT' to cure the MINI bug (MNM)
Modified Files:
 	altrig.F
@
text
@      INTEGER FUNCTION ALTRIG (IBITT1,IBITT2,IBITL2)
C ---------------------------------------------------------------
CKEY ALEF TRIGGER
C - F.Ranjard - 910318
C! returns the 1st 3 words of XTEB or XTRB or DTBP
C-      Modified: L.Mirabito - 910828
C       Take information in DTBP for mini DST
C       Modified: H. Meinhard       29-Apr-1993  (2)
C                 Check LUPA and SILH, if all other banks not existing
C       Modified: F.Ranjard - 940426
C       Take information from X1RG starting with 'TPR ', col# 2,3,4
C       Modified: M.N.Minard - 960207
C       Take information from X1RG starting with 'TPR ' or ' RPT'
C       to cure a problemm seen on '95 MINIs made on UNIX
C - Output : - IBITT1 / I  = word 1 of 1st row of XTEB or XTRB
C              IBITT2 / I  = word 2 ......
C              IBITL2 / I  = word 3 ......
C              ALTRIG / I  = 0 if no bank is there
C                            1 if XTEB is there
C                            2 if XTRB is there
C                            3 if DTBP is there
C                            4 if LUPA is there;
C                            5 if SILH is there. Note that in the latter
C                              two cases, the original level2 mask is
C                              unavailable, and IBITT2 is set equal to
C                              IBITT1
C                            6 if X1RG is there
C
C -----------------------------------------------------------------
#ifndef DOC
#include "bcs.h"
#include "lupajj.h"
#include "silhjj.h"
      SAVE NXTEB, NXTRB, NDTBP, NLUPA, NSILH, NX1RG, IX1RG
      DATA NXTEB / 0/
#include "bmacro.h"
C ------------------------------------------------------------
C - 1st entry : get name indices
      IF (NXTEB.EQ.0) THEN
        NXTEB = NAMIND ('XTEB')
        NXTRB = NAMIND ('XTRB')
        NDTBP = NAMIND ('DTBP')
        NLUPA = NAMIND ('LUPA')
        NSILH = NAMIND ('SILH')
        NX1RG = NAMIND ('X1RG')
        IX1RG = 0
      ENDIF
C
C - next entry
      IF (IW(NX1RG).NE.0) THEN
        JTRIG = IW(NX1RG)
        IF (IX1RG .EQ. 0) THEN
           ITPR  = INTCHA ('TPR ')
           IRPT  = INTCHA (' RPT')
           DO I=1,LROWS(JTRIG)
              IF (ITABL(JTRIG,I,1).EQ.ITPR  .OR.
     &            ITABL(JTRIG,I,1).EQ.IRPT) THEN
                 IX1RG = I
                 GOTO 10
              ENDIF
           ENDDO
 10        CONTINUE
        ENDIF
        ALTRIG = 6
        ICOL  = 1
        IROW  = IX1RG
      ELSE
        IROW = 1
        ICOL = 0
        IF (IW(NXTRB).NE.0) THEN
          ALTRIG = 2
          JTRIG = IW(NXTRB)
        ELSEIF (IW(NXTEB).NE.0) THEN
          ALTRIG = 1
          JTRIG = IW(NXTEB)
        ELSEIF (IW(NDTBP).NE.0) THEN
          ALTRIG = 3
          JTRIG = IW(NDTBP)
        ELSE
          IF (IW(NLUPA) .NE. 0) THEN
            ALTRIG = 4
            JTRIG  = IW(NLUPA)
            IBITT1 = ITABL(JTRIG,1,JLUPT1)
            IBITT2 = IBITT1
            IBITL2 = ITABL(JTRIG,1,JLUPL2)
          ELSE IF (IW(NSILH) .NE. 0) THEN
            ALTRIG = 5
            JTRIG  = IW(NSILH)
            IBITT1 = ITABL(JTRIG,1,JSILT1)
            IBITT2 = IBITT1
            IBITL2 = ITABL(JTRIG,1,JSILT2)
          ELSE
            ALTRIG = 0
          END IF
          RETURN
        ENDIF
      ENDIF
C
C - get trigger words of row# IROW, col.# ICOL+1,+2,+3
      IBITT1 = ITABL (JTRIG,IROW,ICOL+1)
      IBITT2 = ITABL (JTRIG,IROW,ICOL+2)
      IBITL2 = ITABL (JTRIG,IROW,ICOL+3)
C
      END
#endif
@


1.1
log
@Initial revision
@
text
@d12 3
d54 1
d56 2
a57 1
              IF (ITABL(JTRIG,I,1) .EQ. ITPR) THEN
@


1.1.1.1
log
@import aleph212 from alws
@
text
@@
