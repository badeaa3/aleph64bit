head	1.25;
access;
symbols
	aleph316_2:1.25
	aleph316_1:1.24
	aleph316:1.23
	aleph315_7:1.23
	aleph315_6:1.22
	aleph315_5:1.22
	aleph315_4:1.22
	aleph315_3:1.22
	aleph315_2:1.21
	aleph315_1:1.21
	aleph315:1.20
	aleph314_2:1.19
	aleph314_1:1.19
	aleph314:1.19
	aleph313_1:1.18
	aleph313:1.18
	aleph312_1:1.18
	aleph312:1.18
	aleph311_1:1.18
	aleph311:1.18
	aleph310_3:1.18
	aleph310_2:1.18
	aleph310_1:1.18
	aleph310:1.17
	aleph309_1:1.14
	aleph309:1.14
	aleph308_3:1.14
	aleph308_2:1.14
	aleph308_1:1.14
	aleph308:1.14
	aleph307_6:1.14
	aleph307_5:1.13
	aleph307_4:1.13
	aleph307_2:1.13
	aleph307_1:1.13
	aleph307:1.13
	aleph306:1.12
	aleph305_4:1.11
	aleph305_3:1.11
	aleph305_2:1.11
	aleph305_1:1.11
	aleph305:1.11
	aleph304_5:1.10
	aleph304_4:1.10
	aleph304_3:1.10
	aleph304_2:1.10
	aleph304_1:1.10
	aleph304:1.10
	aleph303_3:1.10
	aleph303_2:1.10
	aleph303_1_mc1:1.10
	aleph303_1:1.10
	aleph303:1.10
	aleph302_9:1.9
	aleph302_8:1.7
	aleph302_7:1.7
	aleph302_6:1.7
	aleph302_5:1.7
	aleph302_4:1.7
	aleph302_3:1.7
	aleph302_2:1.7
	aleph302_1:1.7
	aleph302:1.10
	aleph216:1.6
	aleph215_3:1.4
	aleph215_2:1.4
	aleph215:1.4
	aleph214:1.4
	aleph213:1.3
	aleph212:1.1.1.1
	ALEPH212:1.1.1;
locks; strict;
comment	@ * @;


1.25
date	2001.06.19.07.12.14;	author cattanem;	state Exp;
branches;
next	1.24;

1.24
date	2001.02.19.10.05.09;	author cattanem;	state Exp;
branches;
next	1.23;

1.23
date	2000.11.08.16.06.06;	author cattanem;	state Exp;
branches;
next	1.22;

1.22
date	2000.07.25.14.56.57;	author cattanem;	state Exp;
branches;
next	1.21;

1.21
date	2000.04.05.16.05.05;	author cattanem;	state Exp;
branches;
next	1.20;

1.20
date	2000.03.20.11.16.38;	author cattanem;	state Exp;
branches;
next	1.19;

1.19
date	99.12.08.16.28.33;	author cattanem;	state Exp;
branches;
next	1.18;

1.18
date	98.11.13.07.47.57;	author cattanem;	state Exp;
branches;
next	1.17;

1.17
date	98.10.29.07.58.49;	author cattanem;	state Exp;
branches;
next	1.16;

1.16
date	98.10.28.08.56.31;	author cattanem;	state Exp;
branches;
next	1.15;

1.15
date	98.10.02.13.30.52;	author cattanem;	state Exp;
branches;
next	1.14;

1.14
date	98.04.01.10.34.52;	author cattanem;	state Exp;
branches;
next	1.13;

1.13
date	97.12.05.10.10.43;	author cattanem;	state Exp;
branches;
next	1.12;

1.12
date	97.11.13.15.53.58;	author cattanem;	state Exp;
branches;
next	1.11;

1.11
date	97.08.29.09.51.17;	author cattanem;	state Exp;
branches;
next	1.10;

1.10
date	97.05.14.06.55.58;	author cattanem;	state Exp;
branches;
next	1.9;

1.9
date	97.04.25.06.36.16;	author cattanem;	state Exp;
branches;
next	1.8;

1.8
date	97.04.25.06.23.20;	author cattanem;	state Exp;
branches;
next	1.7;

1.7
date	97.03.06.11.59.28;	author flr;	state Exp;
branches;
next	1.6;

1.6
date	97.02.27.09.03.34;	author cattanem;	state Exp;
branches;
next	1.5;

1.5
date	97.02.10.16.27.17;	author cattanem;	state Exp;
branches;
next	1.4;

1.4
date	96.06.14.09.43.47;	author cattanem;	state Exp;
branches;
next	1.3;

1.3
date	96.05.29.09.00.05;	author cattanem;	state Exp;
branches;
next	1.2;

1.2
date	96.05.24.09.36.50;	author cattanem;	state Exp;
branches;
next	1.1;

1.1
date	96.02.07.11.40.24;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.02.07.11.40.25;	author flr;	state Exp;
branches;
next	;


desc
@@


1.25
log
@For alephlib 316.2
@
text
@CKEY ALEF UTILITY BANK
C! general utilities
   this sets contains various subprograms directly callable by the USER.

 ! Correction file no. 2 to ALEPHLIB 31.6
    ADBCHK : New - checks the current database version number against value
                   indicated in a possible DBVS card. Exit if not OK (B.Bloch)
    ALEVNUM: New - writes out on a file the run and event number,
		   if card EVNM exists                               (B.Bloch)

 ! Correction file no. 1 to ALEPHLIB 31.6
    GETLE2 : Mods for pathological miniramps of Year 2000 data (J.Boucrot)

 ! Correction file no. 7 to ALEPHLIB 31.5
    IQVERP : NEW - Transferred from Alpha: Return program version 
             used to produce the current file       (A.Bonissent)

 ! Correction file no. 3 to ALEPHLIB 31.5
    GTT0GL : handle 2x2 bunch running in 2000 (W.Wiedenman)

 ! Correction file no. 1 to ALEPHLIB 31.5
    GETLE2, GETLEP: Fix wrong LEP energy in RLEP for some early
             year 2000 runs at 91.25 Gev              (J.Boucrot)

 ! ALEPHLIB 31.5
    GETLEP : Use RLEP and not LFIL for Year 2000 runs (J.Boucrot)
    XFMCBP : Fix to y2k fix - CNAM is CHAR*6           (M.Cattaneo)

 ! ALEPHLIB 31.4
     ALKJOB : modify the DATE given by DATIME to be yyyymmdd
     GETBP  : print date yyyymm
     XFMCBP : convert to the new ADBR format : yyyymm

 ! Correction file no. 2 to ALEPHLIB 31.3
     GETLE2 : Protect against incomplete RNF2 bank (M.Cattaneo)

 ! Correction file no. 1 to ALEPHLIB 31.0
     GETLEP : Bug fix - Fill number was not filled in certain cases (J.Boucrot)

 ! ALEPHLIB 31.0
     ALVERS : Print out version number only once in the job        (M.Cattaneo)
     GETBP  : New. Moved to Alephlib from Alpha                    (J.Boucrot)
     GETLEP : Completely rewritten to give always the best possible
              available LEP energy and beam position for LEP1 and LEP2
              (See Marco's Mainz talk of 980926)                   (J.Boucrot)
     GETLE1 : Replaced with version from Alpha (adds a protection) (J.Boucrot)
     GETLE2 : Replaced with version from Alpha (adds a protection) (J.Boucrot)
     FIXALPB: New. Moved to Alephlib from Alpha                    (J.Boucrot)
     XFMCBP : New. Moved to Alephlib from Alpha                    (J.Boucrot)

 ! Correction file no. 6 to ALEPHLIB 30.7
    ALKRAN : New - Build kine run header KRAN    (B.Bloch)
    ALKMAR : New - Create kine event header KMAR (B.Bloch)

 ! ALEPHLIB 30.7
    ALTRHV - Obsolete. Use XHVBIT instead (M.Cattaneo)

 ! ALEPHLIB 30.6
    ALBUNCH - New. Get number of bunches from LEP information in 1997 (B.Bloch)

 ! ALEPHLIB 30.5
    GETLE1 - New. Gives the exact run energy for 1993 -> 1995 LEP1 runs
             from the latest estimations of the LEP energy        (J.Boucrot)
    GETLUM - get lumi from 'LUMI' if it's 0. in 'RLUM'            (J.Boucrot)
    
 ! ALEPHLIB 30.3
    GTT0GL - Correct bug in treatment of new alignment (D.Casper)

 ! ALEPHLIB 30.2 correction file no. 9
    GTT0GL - check whether new alignment banks are present before adjusting t0
                                                                     (D.Casper)

 ! ALEPHLIB 30.2
   new alignment (W.Wiedenman), new Kalman filter (D.Casper) are introduced.
    DVMOVE - new routine: DVMOVE(A,B,N) 
             copy A(1:N) into B(1:N), A and B are double precision arrays.
    DVZERO - new routine: DVZERO(A,N) 
             reset A(1:N) to zero , A is a double precision array.

 ! ALEPHLIB 21.6
    ALELEP - Replace previous code by call to identical routine ALEFIL 
             (M.Cattaneo 10/02/1997)
    ALSECS - Remove test on century for leap year (year 2000 is a leap year)
             (M.Cattaneo 27/02/1997)

 ! ALEPHLIB 21.4
    ALSECS - New routine to convert "Aleph format" date/time to integer
             number of seconds elapsed since 1-JAN-1988  (O.Schneider)

 ! ALEPHLIB 21.3
    ALKJOB - Use kjobjj.h instead of kgjjpar.h
    RQBUNC - Set NWAG and INBU for '96. Avoid trying to get the info from the
             unreliable LZZT as the bunch train scheme doesn't change 
             within the year.

 ! ALEPHLIB 21.1
    RQBUNC - tagging of level 3 was not working at the beginning of 95
             so set IBUN=1, IQUA=3 for runs in 4x1 configuration and
             leave as before those in 4x2 configuration .

 ! ALEPHLIB 21.0
    GETLUM - get LCAL luminosity for High Energy runs ( LEP II )
    GETS4B - new routine : Sical lumi per bunch for multibunch runs

 ! ALEPHLIB 20.9
    ALFMT  - IF called for ALL banks : ALFMT (LUFMT,'ALL ',FMT)
             after the 1st call, it will check ALL formats and redefine
             those which are different from those stored on BANKAL.FMT

 ! ALEPHLIB 20.8
    ADBRJJ, ADBRLIST - add one column for beam position periods.
    ALLEP1 - logical function ALLEP1(irun) is true if energy of
             run # irun is .lt. 100GeV

 ! ALEPHLIB 20.7
   ALTRIG - when X1RG is there take trigger bits from row starting
            with 'TPR '. (that was not the case for MC events.)

 ! ALEPHLIB 20.6
   ALFMT  - increase the number of bank formats to 1500.
   BKTOBK - new routine to copy a bank to another bank
            CALL BKTOBK ('ABCD',NR1,'EFGH',NR2)
            'EFGH' format is taken as 'ABCD' format.
   ALK7FIL, ALK7OP, ALK7TRU, ALK7FRU -
            Adapt to new RUNCARTSLIST format

 ! ALEPHLIB 20.5
   GETLEP - add a protection against negative sqrt.

 ! ALEPHLIB 20.4
   ALGTDB : make sure that the required bank is there.

 ! ALEPHLIB 20.3
   CAFIHT : remove a bug

 ! ALEPHLIB 20.2
   ALFIEL : give the correct value of the mag field for runs 25261
            and 25265.
   BKRHAL - get computer name on which the job is run.(P.Comas)
   BKRHAW - change the RHAH bank format.

 ! ALEPHLIB 20.1
   NAMERU : new FUNCTION to get the row# of NAME bank containing
            a given run.
   ALK7COM: Increase number of segments to 3 which allows 7500 runs
            instead of 5000.
 ! ALEPHLIB 20.0
   ALFIEL : '92 offset is valid for 92 and 93 only

 ! ALEPHLIB 15.8
   ALTRIG : use X1RG
   ALTRHV : new INTEGER FUNCTION to return HV word from X1RG or XTCN

 ! ALEPHLIB 15.8
   remove *CA ALRCOM from ALPHARD set, introduce an entry point AOPEWW
   in AOPEWR to get IFWITH flag from ALREAD set into ALPHARD set,
   move some routines from ALREAD to ALEF or to ALPHARD to be
   prepared to cut ALEPHLIB into ALEPHIO and ALEPHLIB.
   ALEPHIO will contain the machine dependant code : ALREAD, EPIO, PRESS
   ALEPHLIB will be machine independant

 ! ALEPHLIB 15.7
   TRACBCK : CALL EXIT after the traceback on IBM.
   ALFMT : limit the test on the first 3 characters of NAME to find
           'ALL'
   ALFIEL : the 92 current offset is valid for 92,93,94....
   GTT0GL : T0GL depends on TPC setup code.
   UINDXS : call SORTI instead of SORTX deleted from CERNLIB 94A.

 ! ALEPHLIB 15.6
   ALFMT : add a SAVE

 ! ALEPHLIB15.5
   ALEFIL, ALELEP : check that the row # returned by LFILRU is > 0
   GETLEP : check that the row # returned by ALEFIL is > 0

 ! ALEPHLIB 15.2
   ALGTRO : bug correction
   ALTRIG : look for LUPA or SILH bank to get trigger bits when no other
            bank is present.
   ALVSN :  add a protection against slow control records (IRUN=0)
   GETLUM : modified to get the lumi / nb of bhabhas from Sical in 1993
   GETSLU : modified to get the lumi from bank 'SLUM' if necessary
   ALFMT  : increase size of bank formats to 75 characters to fit LPZT
            bank format. That is the maximum length allowed on a file
            with a record length of 80.

 ! ALEPHLIB 15.1
   LFILRU : remove a bug which happened when reading '90 '91' '92
            data with a DBAS.BANK which contains '92 banks.

 ! ALEPHLIB 14.5
   New routine GETSLU : gets SICAL Lumi and nb of Bhabhas for a given
                        run.

@


1.24
log
@mods to getle2 for y2k miniramps
@
text
@d5 6
@


1.23
log
@add iqverp
@
text
@d5 3
@


1.22
log
@2x2 running in 2000
@
text
@d5 4
@


1.21
log
@Fix RLEP energy
@
text
@d5 3
@


1.20
log
@Alephlib 315
@
text
@d5 4
@


1.19
log
@Alephlib 314, including y2k fixes
@
text
@d5 4
@


1.18
log
@Bug fix to getlep
@
text
@d5 8
@


1.17
log
@Alephlib 310 final version
@
text
@d5 3
@


1.16
log
@alephlib 310 4th test
@
text
@d6 2
a7 2
     ALVERS : Print out version number only once in the job      (M.Cattaneo)
     GETBP  : New. Moved to Alephlib from Alpha                  (J.Boucrot)
d10 5
a14 3
              (See Marco's Mainz talk of 980926)                 (J.Boucrot)
     FIXALPB: New. Moved to Alephlib from Alpha                  (J.Boucrot)
     XFMCBP : New. Moved to Alephlib from Alpha                  (J.Boucrot)
@


1.15
log
@Alephlib 310
@
text
@d6 1
@


1.14
log
@Mods for Alephlib 307.6
@
text
@d5 8
@


1.13
log
@Alephlib 307 second test
@
text
@d5 4
@


1.12
log
@Add albunch
@
text
@d5 3
@


1.11
log
@add getle1, modify getlum
@
text
@d5 3
@


1.10
log
@Bug fix in GTT0GL
@
text
@d5 5
@


1.9
log
@Bug fixes for Alephlib 302.9
@
text
@d5 3
d9 2
a10 2
   GTT0GL - check whether new alignment banks are present before adjusting t0
                                                                    (D.Casper)
@


1.8
log
@Bug fixes for Alephlib 302.9
@
text
@d6 2
a7 4
    TUN1NC - fix unintentional disabling of wire coordinates
             print a message indicating whether wire coordinates will be used
             avoid error messages when reading junk events by removing error
             return on absence of PCOI (return silently instead) (D.Casper)
@


1.7
log
@1st test version aleph302
@
text
@d5 6
d16 1
a16 2
             reset A(1:N) to zero , A is a double precision array.  

@


1.6
log
@add VDMS to E list
@
text
@d5 8
@


1.5
log
@ALELEP calls ALEFIL
@
text
@d5 1
a5 1
 ! ALEPHLIB 21.5
d8 2
@


1.4
log
@First test of alephlib 214
@
text
@d5 4
d10 2
a11 2
   ALSECS : New routine to convert "Aleph format" date/time to integer
            number of seconds elapsed since 1-JAN-1988  (O.Schneider)
d14 4
a17 4
   ALKJOB : Use kjobjj.h instead of kgjjpar.h
   RQBUNC : Set NWAG and INBU for '96. Avoid trying to get the info from the
            unreliable LZZT as the bunch train scheme doesn't change 
            within the year.
d20 3
a22 3
   RQBUNC : tagging of level 3 was not working at the beginning of 95
            so set IBUN=1, IQUA=3 for runs in 4x1 configuration and
            leave as before those in 4x2 configuration .
d25 2
a26 2
   GETLUM : get LCAL luminosity for High Energy runs ( LEP II )
   GETS4B : new routine : Sical lumi per bunch for multibunch runs
d29 3
a31 3
   ALFMT - IF called for ALL banks : ALFMT (LUFMT,'ALL ',FMT)
           after the 1st call, it will check ALL formats and redefine
           those which are different from those stored on BANKAL.FMT
d34 3
a36 3
   ADBRJJ, ADBRLIST - add one column for beam position periods.
   ALLEP1 - logical function ALLEP1(irun) is true if energy of
            run # irun is .lt. 100GeV
@


1.3
log
@RQBUNC updated for 1996 bunch spacing
@
text
@d5 4
@


1.2
log
@Update news for version 213
@
text
@d6 4
a9 1
   ALKJOB : Use kjobjj.h instead of kgjjpar.h  
@


1.1
log
@Initial revision
@
text
@d5 3
@


1.1.1.1
log
@import aleph212 from alws
@
text
@@
