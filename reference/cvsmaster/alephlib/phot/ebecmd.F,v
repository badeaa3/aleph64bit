head	1.3;
access;
symbols
	aleph316_2:1.3
	aleph316_1:1.3
	aleph316:1.3
	aleph315_7:1.3
	aleph315_6:1.3
	aleph315_5:1.3
	aleph315_4:1.3
	aleph315_3:1.3
	aleph315_2:1.3
	aleph315_1:1.3
	aleph315:1.3
	aleph314_2:1.3
	aleph314_1:1.3
	aleph314:1.3
	aleph313_1:1.3
	aleph313:1.3
	aleph312_1:1.3
	aleph312:1.3
	aleph311_1:1.1.1.1
	aleph311:1.1.1.1
	aleph310_3:1.1.1.1
	aleph310_2:1.1.1.1
	aleph310_1:1.1.1.1
	aleph310:1.1.1.1
	aleph309_1:1.1.1.1
	aleph309:1.1.1.1
	aleph308_3:1.1.1.1
	aleph308_2:1.1.1.1
	aleph308_1:1.1.1.1
	aleph308:1.1.1.1
	aleph307_6:1.1.1.1
	aleph307_5:1.1.1.1
	aleph307_4:1.1.1.1
	aleph307_2:1.1.1.1
	aleph307_1:1.1.1.1
	aleph307:1.1.1.1
	aleph306:1.1.1.1
	aleph305_4:1.1.1.1
	aleph305_3:1.1.1.1
	aleph305_2:1.1.1.1
	aleph305_1:1.1.1.1
	aleph305:1.1.1.1
	aleph304_5:1.1.1.1
	aleph304_4:1.1.1.1
	aleph304_3:1.1.1.1
	aleph304_2:1.1.1.1
	aleph304_1:1.1.1.1
	aleph304:1.1.1.1
	aleph303_3:1.1.1.1
	aleph303_2:1.1.1.1
	aleph303_1_mc1:1.1.1.1
	aleph303_1:1.1.1.1
	aleph303:1.1.1.1
	aleph302_9:1.1.1.1
	aleph302_8:1.1.1.1
	aleph302_7:1.1.1.1
	aleph302_6:1.1.1.1
	aleph302_5:1.1.1.1
	aleph302_4:1.1.1.1
	aleph302_3:1.1.1.1
	aleph302_2:1.1.1.1
	aleph302_1:1.1.1.1
	aleph302:1.1.1.1
	aleph216:1.1.1.1
	aleph215_3:1.1.1.1
	aleph215_2:1.1.1.1
	aleph215:1.1.1.1
	aleph214:1.1.1.1
	aleph213:1.1.1.1
	aleph212:1.1.1.1
	ALEPH212:1.1.1;
locks; strict;
comment	@c @;


1.3
date	99.07.30.09.06.32;	author cattanem;	state Exp;
branches;
next	1.2;

1.2
date	99.07.30.08.51.23;	author cattanem;	state Exp;
branches;
next	1.1;

1.1
date	96.02.07.11.42.50;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.02.07.11.42.51;	author flr;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Alephlib 312 test
@
text
@      SUBROUTINE EBECMD
C ----------------------------------------------------
C   AUTHOR   : R.Clifft 08/06/88
C              J.Badier 29/11/89
C! Analysis for a photon hitting an end cap module near a crack.
C! Calculate a corrected energy and a position.
CKEY PHOTONS CRACK ENERGY POSITION / INTERNAL
C  Use data from crack clusters within functions derived empirically
C  from Monte Carlo studies which relate the energy ratios RATIO1
C  and RATIO2 to missing energy and impact coordinate
C
C
C     called by      EBCRAD
C     calls          NONE
C
C     banks          NONE
C
C ----------------------------------------------------
#ifndef DOC
      SAVE
C            ECCS = end cap energy correction extrapolation factor
      PARAMETER( ECCS = -.0014 )
#include "ebenec.h"
      REAL ECFAC(4,3,2) , PHIRG(4) , ECFAJ(4)
C
      DATA PHIRG / 0.0655,0.0327,0.0218,0.0164 /
      DATA ECFAJ / 5.,16.,33.,43. /
      DATA ECFAC / 16.,17.,18.,18.,9.5,10.5,11.5,12.5,3.5,5.,6.5,8.,
     &             10.,10.,11.,12.,4.5,5.,5.5,7.,19.5,3*30. /
C
C *** Interogate cluster position and extent with respect to crack
C *** to determine region parameters for correction algorithms
C
      KNEXT = 3
      KR2 = 0
      IF(RATIO2 .LT. PETIT) KR2 = 1
      IF(KODEEB(3) .LT. 3)  THEN
        KREGI = 1
        IF(KODEEB(3) .EQ. 1) KNEXT = 1 + KR2
      ELSE
        KREGI = 2
        IF(KODEEB(3) .EQ. 4) KNEXT = 1 + KR2
      ENDIF
      IF( NREGEB(1) .NE. 1 ) KREGI = 3 - KREGI
C
C *** Derive a corrected energy
C
      FREFC = ECFAC(NREGEB(3) , KNEXT , KREGI) / 100.
      IF(NREGEB(1).NE.3) THEN
        FENEC = FREFC + ECCS * ( FLOAT( ITRWEB ) - ECFAJ( NREGEB(3) ) )
      ELSE
        FENEC = FREFC + ECCS * ( FLOAT(229-ITRWEB)-ECFAJ( NREGEB(3) ) )
      ENDIF
      IF( FENEC .GT. .9 ) FENEC = .9
      ENETOT = ENCRAT / (1. - FENEC)
C
C *** Derive a photon impact coordinate orthogonal to the crack
C
      SIHARG = (FLOAT(ITRWEB) - .5) * CECT1 + CECT2
      HTHET = DISFE / 2. * ( EXP(SIHARG) - EXP(-SIHARG) )
      YST1 = HTHET * PHIRG( NREGEB(3) )
      IF(KODEEB(3) .EQ. 1 .OR. KODEEB(3) .EQ. 4) THEN
        YCOFIN = ( YST1 - YLIMIT(KREGI) ) / 2.
        IF(YCOFIN .LT. 0.) YCOFIN = 0.
        YCOFIN = YCOFIN + YLIMIT(KREGI)
      ELSE
        YCOFIN = 1.5 * YST1
        IF( YST1 .LT. YLIMIT(KREGI) ) YCOFIN =
     +      YLIMIT(KREGI) + ( 2. * YST1 - YLIMIT(KREGI) ) / 2.
      ENDIF
      RETURN
      END
#endif
@


1.2
log
@Alephlib 312 test
@
text
@d52 1
a52 1
        FENEC = FREFC + ECCS * ( FLOAT( 229-ITRWEB ) - ECFAJ( NREGEB(3) ) )
@


1.1
log
@Initial revision
@
text
@d49 5
a53 1
      FENEC = FREFC + ECCS * ( FLOAT( ITRWEB ) - ECFAJ( NREGEB(3) ) )
@


1.1.1.1
log
@import aleph212 from alws
@
text
@@
