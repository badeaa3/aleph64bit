head	1.2;
access;
symbols
	aleph316_2:1.2
	aleph316_1:1.2
	aleph316:1.2
	aleph315_7:1.2
	aleph315_6:1.2
	aleph315_5:1.2
	aleph315_4:1.2
	aleph315_3:1.2
	aleph315_2:1.2
	aleph315_1:1.2
	aleph315:1.2
	aleph314_2:1.2
	aleph314_1:1.2
	aleph314:1.2
	aleph313_1:1.2
	aleph313:1.2
	aleph312_1:1.2
	aleph312:1.2
	aleph311_1:1.2
	aleph311:1.2
	aleph310_3:1.2
	aleph310_2:1.2
	aleph310_1:1.2
	aleph310:1.2
	aleph309_1:1.2
	aleph309:1.2
	aleph308_3:1.2
	aleph308_2:1.2
	aleph308_1:1.2
	aleph308:1.2
	aleph307_6:1.2
	aleph307_5:1.2
	aleph307_4:1.2
	aleph307_2:1.2
	aleph307_1:1.2
	aleph307:1.2
	aleph306:1.2
	aleph305_4:1.2
	aleph305_3:1.2
	aleph305_2:1.2
	aleph305_1:1.2
	aleph305:1.2
	aleph304_5:1.2
	aleph304_4:1.2
	aleph304_3:1.2
	aleph304_2:1.2
	aleph304_1:1.2
	aleph304:1.2
	aleph303_3:1.2
	aleph303_2:1.2
	aleph303_1_mc1:1.2
	aleph303_1:1.2
	aleph303:1.2
	aleph302_9:1.2
	aleph302_8:1.2
	aleph302_7:1.2
	aleph302_6:1.2
	aleph302_5:1.2
	aleph302_4:1.2
	aleph302_3:1.2
	aleph302_2:1.2
	aleph302_1:1.2
	aleph302:1.2
	aleph216:1.2
	aleph215_3:1.2
	aleph215_2:1.1.1.1
	aleph215:1.1.1.1
	aleph214:1.1.1.1
	aleph213:1.1.1.1
	aleph212:1.1.1.1
	ALEPH212:1.1.1;
locks; strict;
comment	@c @;


1.2
date	96.09.04.14.11.02;	author cattanem;	state Exp;
branches;
next	1.1;

1.1
date	96.02.07.11.41.53;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.02.07.11.41.54;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@add missing C! for dOC
@
text
@      FUNCTION CORADOC(EN,TH,PH)
C -------------------------------------------------------------
CKEY GAMPACK ECAL
C! Correct ECAL cluster energy
C - Author: M.N Minard          930406
C - Input : EN      : Energy of cluster from 4 towers
C-          TH      : Cluster theta angle (rad)
C-          PH      : Cluster PHI angle (rad)
C - Output: CORADOC : corrected energy
C -----------------------------------------------------------------
#ifndef DOC
#include "bcs.h"
#include "egcojj.h"
      INTEGER ALGTDB, GTSTUP
      CHARACTER DET*2,LIST*4
C
      DATA DET    / 'EC' /
      DATA LIST   / 'EGCO' /
      DATA NAEGCO / 0 /
      DATA IROLD  / 0 /
#include "bmacro.h"
C ----------------------------------------------------------------
       IF ( NAEGCO.EQ.0) NAEGCO = NAMIND('EGCO')
       CORADOC = 1.
C
C- Get EGCO bank from DB
#include "gtdbbk.h"
       KEGCO = IW(NAEGCO)
       IF (KEGCO.EQ.0) RETURN
C
C-     Look for correction from EGCO bank
C
       NEGCO = LROWS(KEGCO)
       COSI = ABS(COS(TH))
       COSI = MIN (COSI,0.999999)
       IROW = 0
       DO IEGCO = 1,NEGCO
        IF (COSI.GE.RTABL(KEGCO,IEGCO,JEGCTM).AND.
     &      COSI.LT.RTABL(KEGCO,IEGCO,JEGCTX)) IROW=IEGCO
       ENDDO
       GCOR = RTABL(KEGCO,IROW,JEGCC2) -
     &        RTABL(KEGCO,IROW,JEGCC1)/SQRT(EN)
       IF(EN.LT.RTABL(KEGCO,IROW,JEGCC3))THEN
       GCOR = RTABL(KEGCO,IROW,JEGCC2)+RTABL(KEGCO,IROW,JEGCC1)
     &        *(EN-RTABL(KEGCO,IROW,JEGCC3))/(RTABL(KEGCO,IROW
     &        ,JEGCC4))
       ENDIF
C
       CORADOC = 1./GCOR
       END
#endif
@


1.1
log
@Initial revision
@
text
@d4 1
@


1.1.1.1
log
@import aleph212 from alws
@
text
@@
