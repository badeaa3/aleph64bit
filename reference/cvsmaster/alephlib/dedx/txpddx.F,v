head	1.2;
access;
symbols
	aleph316_2:1.2
	aleph316_1:1.2
	aleph316:1.2
	aleph315_7:1.2
	aleph315_6:1.2
	aleph315_5:1.2
	aleph315_4:1.2
	aleph315_3:1.2
	aleph315_2:1.2
	aleph315_1:1.2
	aleph315:1.2
	aleph314_2:1.2
	aleph314_1:1.2
	aleph314:1.2
	aleph313_1:1.2
	aleph313:1.2
	aleph312_1:1.2
	aleph312:1.2
	aleph311_1:1.1.1.1
	aleph311:1.1.1.1
	aleph310_3:1.1.1.1
	aleph310_2:1.1.1.1
	aleph310_1:1.1.1.1
	aleph310:1.1.1.1
	aleph309_1:1.1.1.1
	aleph309:1.1.1.1
	aleph308_3:1.1.1.1
	aleph308_2:1.1.1.1
	aleph308_1:1.1.1.1
	aleph308:1.1.1.1
	aleph307_6:1.1.1.1
	aleph307_5:1.1.1.1
	aleph307_4:1.1.1.1
	aleph307_2:1.1.1.1
	aleph307_1:1.1.1.1
	aleph307:1.1.1.1
	aleph306:1.1.1.1
	aleph305_4:1.1.1.1
	aleph305_3:1.1.1.1
	aleph305_2:1.1.1.1
	aleph305_1:1.1.1.1
	aleph305:1.1.1.1
	aleph304_5:1.1.1.1
	aleph304_4:1.1.1.1
	aleph304_3:1.1.1.1
	aleph304_2:1.1.1.1
	aleph304_1:1.1.1.1
	aleph304:1.1.1.1
	aleph303_3:1.1.1.1
	aleph303_2:1.1.1.1
	aleph303_1_mc1:1.1.1.1
	aleph303_1:1.1.1.1
	aleph303:1.1.1.1
	aleph302_9:1.1.1.1
	aleph302_8:1.1.1.1
	aleph302_7:1.1.1.1
	aleph302_6:1.1.1.1
	aleph302_5:1.1.1.1
	aleph302_4:1.1.1.1
	aleph302_3:1.1.1.1
	aleph302_2:1.1.1.1
	aleph302_1:1.1.1.1
	aleph302:1.1.1.1
	aleph216:1.1.1.1
	aleph215_3:1.1.1.1
	aleph215_2:1.1.1.1
	aleph215:1.1.1.1
	aleph214:1.1.1.1
	aleph213:1.1.1.1
	aleph212:1.1.1.1
	ALEPH212:1.1.1;
locks; strict;
comment	@c @;


1.2
date	99.07.30.08.51.13;	author cattanem;	state Exp;
branches;
next	1.1;

1.1
date	96.02.07.11.40.54;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	96.02.07.11.40.55;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Alephlib 312 test
@
text
@      SUBROUTINE TXPDDX(NAME,BG,SBG,Q,RSIG,SMPL,DEDX,SDEDX,IER)
C-----------------------------------------------------------------------
C! Expected dE/dx of relativistic particle
CKEY DEDX PARTICLE
C!    Author:  R. Johnson    17-06-87
C!    Modified: Z. Feng      26-11-92 modify the power term to general purpose
C!              D. Casper    14-06-95 create TXPDDX from TXDEDX
C!              S. Monteil   20-07-95 modify for calibration
C!
C!    Input:  NAME    /A     'PAD ', 'PA6 ' or 'WIRE'
C!            BG      /R     beta*gamma of the particle
C!            SBG     /R     Uncertainty in BG
C!            Q       /R     Particle charge
C!            RSIG    /R     Relative uncertainty of trunc mean, as
C!                           given by the routine TMPDDX
C!    Output: DEDX    /R     Energy loss relative to minimum ionizing
C!            SDEDX   /R     Estimate of uncertainty in DEDX
C!            IER     /I     Error return=0 for success
C!                               4= cannot find calibration bank
C!                               5= TBTBLP returns a negative value,
C!                                  TBTBLP is set to zero.
C!    Calibration bank:
C!       WIRE dE/dx - TC4X
C!       PAD  dE/dx - TP4X, TP6X
C!
C!    Description
C!    -----------
C!    This routine returns the most probable value of the
C!    dE/dx distribution expected for a TPC track of
C!    velocity beta, where beta*gamma= beta/SQRT(1-beta**2).
C!    Also returned is the 1-sigma uncertainty  on this most
C!    probable value.
C!
C!----------------------------------------------------------------------
#ifndef DOC
#include "alcons.h" 
#include "bcs.h"
#include "frftjj.h"
#include "tc4xjj.h"
#include "tp4xjj.h"
#include "tp6xjj.h"    
C
      CHARACTER*(*) NAME
C
      PARAMETER (ALG10=2.30258509, EPS=0.005, RNORM=1.000)
C
C - set necessary data for GTDBBK
      INTEGER ALGTDB, GTSTUP
      CHARACTER DET*2, LIST*12
      PARAMETER (DET='TP', LIST='TC4XTP4XTP6X') 
      DATA IROLD/0/ 
      DATA NFRFT, NTC4X, NTP4X, NTP6X /4*0/ 
C
#include "bmacro.h"
C ------------------------------------------------------------------
      IF (NTC4X.EQ.0) THEN
        NFRFT=NAMIND('FRFT')
        NTC4X=NAMIND('TC4X')
        NTP4X=NAMIND('TP4X')
        NTP6X=NAMIND('TP6X')  
      ENDIF
C
C++   Look for the necessary input banks
C
      KFRFT=IW(NFRFT)
C
C++   Get the calibration banks
C
#include "gtdbbk.h"
C
C - Wire or Pad - Look for the correct calibration bank (TP4X OR TP6X).
C
      IF (NAME(1:3) .EQ.'PAD') THEN
         NTNAM = NTP4X
         JTNARP= JTP4RP
      ELSE IF (NAME(1:3) .EQ.'PA6') THEN
         NTNAM = NTP6X         
         JTNARP= JTP6RP
      ELSE
         NTNAM = NTC4X
         JTNARP= JTC4RP
      ENDIF
C
      KTNAM=IW(NTNAM)
      IF (KTNAM.EQ.0) THEN
        IER=4
        GO TO 999
      ENDIF
C
C++   Get expected dE/dx as function of log10(beta*gamma)
C++   Also estimate the derivative (which need not be precise)
C
      BGLOG=ALOG10(BG)
      DEDX= TBTBLP(NAME,BGLOG,Q,SMPL,IER)*RNORM
      DEDXP= TBTBLP(NAME,BGLOG+EPS,Q,SMPL,IER)*RNORM
      DIDBG= (DEDXP-DEDX)/EPS
C
C++   Use the length, number of measurements, and DEDX itself to
C++   estimate the uncertainty on DEDX
C
      PPOW5=RTABL(KTNAM,1,JTNARP+5)
      SDEDX= (DEDX**(1.0-PPOW5))*RSIG
C
C++   Fold in the contribution from the momentum uncertainty
C
      SBGLG= SBG/BG/ALG10
      SDEDX= SQRT(SDEDX**2 + (DIDBG*SBGLG)**2)
C
  999 CONTINUE
      RETURN
      END
#endif
@


1.1
log
@Initial revision
@
text
@d8 1
d10 1
a10 1
C!    Input:  NAME    /A     'PAD ' or 'WIRE'
d24 1
a24 1
C!       PAD  dE/dx - TP4X
d36 1
d38 1
d41 1
d49 4
a52 4
      CHARACTER DET*2, LIST*8
      PARAMETER (DET='TP', LIST='TC4XTP4X')
      DATA IROLD/0/
      DATA NTC4X, NTP4X /2*0/
d57 1
d60 1
d63 6
a68 1
C++   Look for the calibration constants
d71 1
a71 1
C - Wire or Pad
d76 3
@


1.1.1.1
log
@import aleph212 from alws
@
text
@@
