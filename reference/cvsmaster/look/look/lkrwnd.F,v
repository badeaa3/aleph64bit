head	1.3;
access;
symbols
	look25:1.3
	look24:1.3
	look23:1.3
	look22:1.3
	look21:1.3
	look20:1.3
	v15:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.3
date	96.04.18.09.06.59;	author flr;	state Exp;
branches;
next	1.2;

1.2
date	95.03.08.09.25.10;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.09.15.50.29;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.09.15.50.30;	author flr;	state Exp;
branches;
next	;


desc
@@


1.3
log
@change VAX to DEC.AND..NOT.UNIX ==> version 20

 Modified Files:
 	lkevt.h lkfil.h lklast.h lkunpk.h version.h
 Removed Files:
	lookend.h
@
text
@      SUBROUTINE LKRWND(COMAND)
C-----------------------------------------------------------------
C! rewind file specified in the comand
C
C - Input: COMAND / A   :command
C------------------------------------------------------------------------
#ifndef DOC
      CHARACTER*(*) COMAND
#include "bcs.h"
#include "lkfil.h"
      LOGICAL LKOPTI
C ---------------------------------------------------------------------
C - which file should be rewound ?
        IF(LKOPTI(COMAND,'DATA')) THEN
           LUN = LINDAT
        ELSEIF(LKOPTI(COMAND,'EDIR')) THEN
           LUN = LINSEL
        ELSE
           WRITE(LOUT,*) '[no file to rewind,bad command]'
           RETURN
        ENDIF
        IF (LUN.EQ.0) THEN
           WRITE(LOUT,*) '[no input file to rewind]'
           RETURN
        ENDIF
C            EDIR  ?
        IF(LUN.EQ.LINSEL) THEN
C        rewind EDIR, drop current $PTS bank
C        reopen data file
          REWIND LINSEL
          CALL BDROP (IW,'$PTSFILM')
          CALL AOPERD (LINDAT,LINSEL,LINSE2,IER)
          IF (IER.NE.0) GOTO 999
        ELSEIF(LUN.EQ.LINDAT) THEN
          CALL BRWND(LUN)
        ENDIF
        SEQFIL = .TRUE.
C
   99 CALL BDROP(IW,'E')
      CALL BDROP(IW,'R')
      CALL BDROP(IW,'C')
      CALL BDROP(IW,'T')
      CALL BLIST(IW,'E=','0')
      CALL BLIST(IW,'R=','0')
      CALL BLIST(IW,'C=','0')
      CALL BLIST(IW,'T=','0')
C
C     if EDIR read till the 1st event
      IF (LUN.EQ.LINSEL) CALL LKREAC
 999  RETURN
      END
#endif
@


1.2
log
@version.h - version number=16
lkchkru.F - rewind edir and/or data if required run# < current run#
lkrrec.F - rewind edir and/or data if required event# < current event#
lkrwnd.F - do not reopen the file if it is the 1st file in the EDIR.
@
text
@a0 1
*DK lkrwnd
d29 5
a33 12
C        if we are in the 1st data file (SEQNAM not blank)  
C        skip FILM card.
C        if we are not in the 1st data file reopen data file
          REWIND LINSEL 
          CALL BDROP (IW,'$PTS')
          IF (SEQNAM .NE. ' ') THEN 
 2           CALL BTERD (IW,LINSEL,'R',*2,*99)  
          ELSE  
             CALL BDROP (IW,'FILM') 
             CALL AOPERD (LINDAT,LINSEL,LINSE2,IER) 
             IF (IER.NE.0) GOTO 999 
          ENDIF 
@


1.1
log
@Initial revision
@
text
@d29 13
a41 5
          IND=NDROP('$PTS',LINSEL)
          CALL BDROP (IW,'FILM')
          REWIND LINSEL
          CALL AOPERD (LINDAT,LINSEL,LINSE2,IER)
          IF (IER.NE.0) GOTO 999
@


1.1.1.1
log
@import look 15
@
text
@@
