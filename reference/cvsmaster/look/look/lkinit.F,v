head	1.2;
access;
symbols
	look25:1.2
	look24:1.2
	look23:1.2
	look22:1.2
	look21:1.2
	look20:1.2
	v15:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	96.04.18.09.05.55;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.09.15.50.24;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.09.15.50.25;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@change VAX to DEC.AND..NOT.UNIX ==> version 20

 Modified Files:
 	lkevt.h lkfil.h lklast.h lkunpk.h version.h
 Removed Files:
	lookend.h
@
text
@      SUBROUTINE LKINIT
C ----------------------------------------------------------
C! read data cards, format file  and open data base
C ----------------------------------------------------------
#ifndef DOC
#include "bcs.h"
#include "lkevt.h"
#include "lkfil.h"
      CHARACTER FNAME*200
      CHARACTER*120 FMT
      INTEGER ALFMT, ALGTENV
      LOGICAL LEX
C ---------------------------------------------------------
C
C     init ULIST
      CALL LKSTUNP('    ')
C     open data card file if any
      IST = ALGTENV ('LOOKCARDS',FNAME)
      LF = LENOCC(FNAME)
      CALL AINQUI(0,FNAME(1:LF),LEX)
#if defined(DEBUG)
      WRITE(LOUT,*) ' LKINIT LEX= ',LEX,' FNAME= ',FNAME(1:LF)
#endif
      IF(.NOT.LEX) THEN
        WRITE(IW(6),*) ' File ',FNAME(1:LF),' not found'
        IER = -1
      ELSE
        IER = 0
        CALL AOPEN (IW(5),FNAME,'CARD','DISK',IER)
      ENDIF
      IF (IER.EQ.0) CALL BREADC
C
C - get all formats
      IER = ALFMT (LUFMT,'ALL ',FMT)
      CALL BKFMT ('FILI','A')
C
C - default card, print, output files
      DO I=1,3
        FLGFIL(I)=.FALSE.
      ENDDO
      FILNAM(1)='LOOK_OUT.CARDS'
      FILNAM(2)='LOOK_OUT.PRINT'
      FILNAM(3)='LOOK_OUT.EPIO'
C
C - open default DAF on unit 4 by default
C
      CALL AOPDBS('    ',IER)
      IF (IER.NE.0) THEN
          DIRFIL=.FALSE.
      ELSE
          DIRFIL=.TRUE.
          CALL ADBVER(IVERS,IDAT)
      ENDIF
C
C - open input file if any given by data card
C
      FNAME = ' '
      SEQFIL=.FALSE.
      CALL ABMODE ('INTE')
      CALL ABRSEL ('E','     ',JRET)
      IRUNTR = 0
      IVOULU=0
      LINSEL = 0
      LINDAT = 0
      CALL LKOPRD(FNAME,FORMA,IER)
      IF(IER.NE.0) GOTO 100
 100  CONTINUE
C
      RETURN
      END
#endif
@


1.1
log
@Initial revision
@
text
@a0 1
*DK lkinit
@


1.1.1.1
log
@import look 15
@
text
@@
