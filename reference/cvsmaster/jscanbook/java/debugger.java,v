head	1.2;
access;
symbols
	V0060:1.2
	V0059:1.2
	V0058:1.2
	V0057:1.2
	V0056:1.2
	V0055:1.2
	V0054:1.2
	V0053:1.2
	V0052:1.2
	V0051:1.2
	V0050:1.2
	V0049:1.2
	V0048:1.2
	V0047:1.2
	V0046:1.2
	V0045:1.2
	V0044:1.2
	V0043:1.2
	V0042:1.1.1.1
	V0041:1.1.1.1
	V0040:1.1.1.1
	V0039:1.1.1.1
	V0038:1.1.1.1
	V0037:1.1.1.1
	V0036:1.1.1.1
	V0035:1.1.1.1
	V0034:1.1.1.1
	V0033:1.1.1.1
	V0032:1.1.1.1
	V0031:1.1.1.1
	V0030:1.1.1.1
	V0029:1.1.1.1
	V0028:1.1.1.1
	V0027:1.1.1.1
	V0026:1.1.1.1
	V0025:1.1.1.1
	V0024:1.1.1.1
	V0023:1.1.1.1
	V0022:1.1.1.1
	V0021:1.1.1.1
	V0020:1.1.1.1
	V0019:1.1.1.1
	V0018:1.1.1.1
	V0017:1.1.1.1
	V0016:1.1.1.1
	V0015:1.1.1.1
	V0014:1.1.1.1
	V0013:1.1.1.1
	V0000:1.1.1.1
	V0001:1.1.1.1
	v1:1.1.1.1
	jacotf:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2000.11.07.16.31.36;	author bonissen;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.01.10.29.23;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.03.01.10.29.23;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@small improvements
@
text
@import java.io.*;         
import netscape.security.PrivilegeManager;
import java.util.Calendar;

public class debugger{
    FileWriter dbgfile;
    int level = 1;
    static String dbgFileName;
  public void out(String s){
    if(level > 0){
	System.out.println(s);
    }else{
	//      dbgFileName = scanbook.homedir+File.separator+"scanbook.dbg";
      setFileName();
      if(dbgFileName != null){
        try{
          if(scanbook.netscaperun){
            PrivilegeManager.enablePrivilege("UniversalFileRead");  
            PrivilegeManager.enablePrivilege("UniversalFileWrite");  
	  }
          File dbg = new File(dbgFileName);
          boolean fileExists = dbg.exists();
          dbgfile = new FileWriter(dbgFileName,fileExists);
          dbgfile.write(s+"\n", 0, s.length()+1);
          dbgfile.flush();        
          dbgfile = null;
        }catch (Exception exc) {
          System.err.println(exc);
        }
      }
    }
  }
  public void setlevel(int lvl){
    level = lvl;
    setFileName();
    if(level == 0 && dbgFileName != null){
      try{  
        if(scanbook.netscaperun){
          PrivilegeManager.enablePrivilege("UniversalFileRead");  
          PrivilegeManager.enablePrivilege("UniversalFileWrite");  
	}
        Calendar workCal = Calendar.getInstance();
        String now = workCal.getTime().toString();
        dbgfile = new FileWriter(dbgFileName,false);
        dbgfile.write("*\n*\n");
        dbgfile.write("* Scanbook debugging started on "+now + "\n");
        dbgfile.write("*\n*\n");
        dbgfile.flush();        
        dbgfile = null;
      }catch (Exception exc) {
        System.err.println(exc);
      }
    }
  }
  void setFileName(){
      if(scanbook.homedir != null){
        dbgFileName = scanbook.homedir+File.separator+"scanbook.dbg";
      }
  }
}







@


1.1
log
@Initial revision
@
text
@d67 1
@


1.1.1.1
log
@ import jscanbook
@
text
@@
