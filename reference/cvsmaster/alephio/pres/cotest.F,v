head	1.4;
access;
symbols
	alio83:1.4
	alio82:1.4
	alio81:1.4
	alio80:1.4
	alio74:1.4
	alio73:1.4
	alio72:1.4
	alio71:1.4
	alio70:1.4
	alio68:1.4
	alio69:1.4
	alio67:1.4
	alio66:1.4
	alio65:1.4
	alio64:1.4
	alio63:1.4
	alio62:1.4
	alio61:1.4
	alio60:1.4
	alephio53:1.3
	v4:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.4
date	96.05.03.14.46.54;	author flr;	state Exp;
branches;
next	1.3;

1.3
date	96.03.13.15.01.55;	author flr;	state Exp;
branches;
next	1.2;

1.2
date	96.01.18.13.52.41;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.13.52.40;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.13.52.41;	author flr;	state Exp;
branches;
next	;


desc
@@


1.4
log
@replace flag ${VENDOR} with ALEPH_${VENDOR}
Modified Files:
  ard/	ainqui.F algtenv.F aopen.F aopenw.F aoperd.F aoptap.F astage.F
 	awrtap.F
  c/	cmpbu3.c cmpbu4.c cmpbu5.c dmpbl3.c dmpbl4.c dmpbl5.c dmpcop.c
 	extzv.c insv.c
  epio/ epinit.F
  inc/ 	cmphost.h ctolow.h gtchunit.h gtftyp.h
  io/ 	almach.F openda.F opendb.F opensq.F sdrsx.F sibsdr.F sxsdr.F
  news/	news.h
  pres/	cfrvax.F cmpban.F cotest.F dmpban.F dmpchr.F
@
text
@#if defined(CTEST)
       PROGRAM COTEST
C----------------------------------------------------------------------
C!     Compress a BOS file.
CKEY PRESS
C!
C!     Author : D.Harvatis  MAR 89
C!
C!     Subroutines called : CMPINI, CMPLIS, CMPDRO
C-----------------------------------------------------------------------
#ifndef DOC
       COMMON/BCS/IW(500000)
       CHARACTER*4 FST
       CHARACTER*80 FNAME,FNAMO
       CHARACTER*1 STR
       LOGICAL NOFLOAT
C-----------------------------------------------------------------------
       CALL TIMEST(999.0)
       TIME=0.0
       CALL BNAMES(1000)
       CALL BOS(IW,500000)
       CALL AOPDBS(' ',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)' Error in opening the DataBase'
           STOP
       END IF
   20  WRITE (6,*) ' Input filename ?'
       READ (5,703) FNAME
  703  FORMAT(A80)
       IF (FNAME.EQ.' ') GO TO 20
       CALL AOPEN(15,FNAME,'    ','DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)' Error in opening input file '
           STOP
       END IF
   30  WRITE(6,*) ' Output filename ?'
       READ (5,703) FNAMO
       IF (FNAMO.EQ.' ') GO TO 30
       CALL AOPENW(16,FNAMO,'    ','DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)' Error in opening output file',IER
           STOP
       END IF
  701  FORMAT (I2)
  702  FORMAT (A1)
       CALL TIMEX(T1)
#if defined(APOLLO) || defined(ALEPH_HP) || defined(RS6K) || defined(ALEPH_SGI)
       CLOSE(5)
       OPEN(5,FILE='*DATA CARDS ?',STATUS='OLD')
#endif
       CALL BREADC
       CALL CMPINI(' ',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*) 'CMPINI failed. Error Code :',IER
           STOP
       END IF
       I=-1
   10  CALL AREAD(15,'E',' ',IRET,IER)
       IF (IRET.GE.4) GO TO 100
       IF (IER.NE.0) GO TO 900
       I=I+1
       CALL TIMEX(T3)
       CALL CMPLIS('E',NB)
       CALL TIMEX(T4)
       WRITE (6,710) I,NB
  710  FORMAT (' Event ',I5,' : ',I3,' banks compressed.')
       TIME=T4-T3+TIME
       CALL BWRITE(IW,16,'E')
       CALL BDROP(IW,'E')
       CALL BGARB(IW)
       GOTO 10
  100  CALL BWRITE(IW,16,'0')
       CALL CMPDRO
       CALL TIMEX(T2)
       WRITE (6,*) T2-T1,TIME
       CALL ACLOSE(0,IER)
       STOP
  900  WRITE (6,*) 'ERROR',I+1
       I=I+1
       GOTO 10
       END
#endif
#endif
@


1.3
log
@import alephio 52 from historian. Modify aclose.F to NOT call brwnd twice
for the same file. update version.h to 5.3
@
text
@d47 1
a47 1
#if defined(APOLLO) || defined(HP) || defined(RS6K) || defined(SGI)
@


1.2
log
@ Modified Files:
	acdarg.F afilin.F afilou.F ainqui.F amount.F aoptap.F astage.F
	awrtap.F
 Modified Files:
	cmphost.h ctolow.h gtchdecl.h version.h
 Removed Files:
	albitw.h
 Modified Files:
 	altell.F babend.F jalrec.F noibm.F opensq.F sdrsx.F sibsdr.F
	sxsdr.F
 Modified Files:
	ardnews.h news.h
 Modified Files:
	cfrvax.F cmpban.F cmpdro.F cmpin2.F cmpini.F cmplis.F cmpsum.F
	cmptoi.F cotest.F detest.F dmpban.F dmpchr.F dmpfmt.F udmper.F
@
text
@d2 9
d12 35
d48 2
d51 31
@


1.1
log
@Initial revision
@
text
@a0 1
*DK cotest
a1 9
       PROGRAM COTEST
C----------------------------------------------------------------------
C!     Compress a BOS file.
CKEY PRESS
C!
C!     Author : D.Harvatis  MAR 89
C!
C!     Subroutines called : CMPINI, CMPLIS, CMPDRO
C-----------------------------------------------------------------------
d3 1
a3 38
       COMMON/BCS/IW(500000)
       CHARACTER*4 FST
       CHARACTER*80 FNAME,FNAMO
       CHARACTER*1 STR
       LOGICAL NOFLOAT
C-----------------------------------------------------------------------
       CALL TIMEST(999.0)
       TIME=0.0
       CALL BNAMES(1000)
       CALL BOS(IW,500000)
       CALL AOPDBS(' ',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)' Error in opening the DataBase'
           STOP
       END IF
   20  WRITE (6,*) ' Input filename ?'
       READ (5,703) FNAME
  703  FORMAT(A80)
       IF (FNAME.EQ.' ') GO TO 20
       CALL AOPEN(15,FNAME,'    ','DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)' Error in opening input file '
           STOP
       END IF
   30  WRITE(6,*) ' Output filename ?'
       READ (5,703) FNAMO
       IF (FNAMO.EQ.' ') GO TO 30
       CALL AOPENW(16,FNAMO,'    ','DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)' Error in opening output file',IER
           STOP
       END IF
  701  FORMAT (I2)
  702  FORMAT (A1)
       CALL TIMEX(T1)
#if defined(UNIX) &&  ! defined(DEC)
       CLOSE(5)
       OPEN(5,FILE='*DATA CARDS ?',STATUS='OLD')
a4 31
       CALL BREADC
       CALL CMPINI(' ',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*) 'CMPINI failed. Error Code :',IER
           STOP
       END IF
       I=-1
   10  CALL AREAD(15,'E',' ',IRET,IER)
       IF (IRET.GE.4) GO TO 100
       IF (IER.NE.0) GO TO 900
       I=I+1
       CALL TIMEX(T3)
       CALL CMPLIS('E',NB)
       CALL TIMEX(T4)
       WRITE (6,710) I,NB
  710  FORMAT (' Event ',I5,' : ',I3,' banks compressed.')
       TIME=T4-T3+TIME
       CALL BWRITE(IW,16,'E')
       CALL BDROP(IW,'E')
       CALL BGARB(IW)
       GOTO 10
  100  CALL BWRITE(IW,16,'0')
       CALL CMPDRO
       CALL TIMEX(T2)
       WRITE (6,*) T2-T1,TIME
       CALL ACLOSE(0,IER)
       STOP
  900  WRITE (6,*) 'ERROR',I+1
       I=I+1
       GOTO 10
       END
@


1.1.1.1
log
@import alephio 4
@
text
@@
