head	1.3;
access;
symbols
	alio83:1.3
	alio82:1.3
	alio81:1.3
	alio80:1.3
	alio74:1.3
	alio73:1.3
	alio72:1.3
	alio71:1.3
	alio70:1.3
	alio68:1.3
	alio69:1.3
	alio67:1.3
	alio66:1.3
	alio65:1.3
	alio64:1.3
	alio63:1.3
	alio62:1.3
	alio61:1.3
	alio60:1.3
	alephio53:1.3
	v4:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.3
date	96.03.13.15.01.56;	author flr;	state Exp;
branches;
next	1.2;

1.2
date	96.01.18.13.52.43;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.13.52.43;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.13.52.44;	author flr;	state Exp;
branches;
next	;


desc
@@


1.3
log
@import alephio 52 from historian. Modify aclose.F to NOT call brwnd twice
for the same file. update version.h to 5.3
@
text
@#if defined(DTEST)
       PROGRAM DETEST
C-----------------------------------------------------------------------
C!     Decompress a compressed BOS file.
CKEY PRESS DETEST DECOMPRESS
C!
C!     Author : D.Harvatis
C!
C-----------------------------------------------------------------------
#ifndef DOC
       COMMON/BCS/IW(500000)
       CHARACTER*80 INAME,ONAME,ERLIS
       CHARACTER*4 FST,FORMAT
C-----------------------------------------------------------------------
       CALL TIMEST(999.0)
       TIME=0.0
       CALL BNAMES(1000)
       CALL BOS(IW,500000)
       FORMAT='EPIO'
   20  WRITE(6,*)'Input Filename ?'
       READ(5,703) INAME
       IF (INAME.EQ.' ') GO TO 20
       CALL AOPEN(16,INAME,FORMAT,'DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)'Failed to open file ',INAME
           STOP
       END IF
   30  WRITE(6,*)'Output Filename ?'
       READ(5,703) ONAME
  703  FORMAT(A80)
       IF (ONAME.EQ.' ') GO TO 30
       CALL AOPENW(17,ONAME,FORMAT,'DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)'Failed to open file ',ONAME
           STOP
       END IF
       I=-1
       CALL BDROP (IW,'E')
       CALL BLIST(IW,'E=','0')
   10  CALL TIMEX(T3)
       CALL AREAD(16,'E',' ',IRET,IER)
       CALL TIMEX(T4)
       I=I+1
       WRITE (6,701) I,IRET,IER
 701   FORMAT(' Event:',I5,'  Return Code :',I3,'  Error Code :',I8)
       TIME=TIME+T4-T3
       IF (IRET.GE.4) GO TO 100
       IF (IER.LT.0) GO TO 900
       CALL BWRITE(IW,17,'E')
       CALL BDROP(IW,'E')
       CALL BGARB(IW)
       GOTO 10
 100   CALL BWRITE(IW,17,'0')
       WRITE(6,*) 'Read and decompress time :',TIME
       CALL ACLOSE(16,IER)
       CALL ACLOSE(17,IER)
       STOP
 900   WRITE (6,*) ' Not Writting Event ',I
       GOTO 10
       END
#endif
#endif
@


1.2
log
@ Modified Files:
	acdarg.F afilin.F afilou.F ainqui.F amount.F aoptap.F astage.F
	awrtap.F
 Modified Files:
	cmphost.h ctolow.h gtchdecl.h version.h
 Removed Files:
	albitw.h
 Modified Files:
 	altell.F babend.F jalrec.F noibm.F opensq.F sdrsx.F sibsdr.F
	sxsdr.F
 Modified Files:
	ardnews.h news.h
 Modified Files:
	cfrvax.F cmpban.F cmpdro.F cmpin2.F cmpini.F cmplis.F cmpsum.F
	cmptoi.F cotest.F detest.F dmpban.F dmpchr.F dmpfmt.F udmper.F
@
text
@d2 8
d11 50
@


1.1
log
@Initial revision
@
text
@a0 1
*DK detest
a1 8
       PROGRAM DETEST
C-----------------------------------------------------------------------
C!     Decompress a compressed BOS file.
CKEY PRESS DETEST DECOMPRESS
C!
C!     Author : D.Harvatis
C!
C-----------------------------------------------------------------------
a2 50
       COMMON/BCS/IW(500000)
       CHARACTER*80 INAME,ONAME,ERLIS
       CHARACTER*4 FST,FORMAT
C-----------------------------------------------------------------------
       CALL TIMEST(999.0)
       TIME=0.0
       CALL BNAMES(1000)
       CALL BOS(IW,500000)
       FORMAT='EPIO'
   20  WRITE(6,*)'Input Filename ?'
       READ(5,703) INAME
       IF (INAME.EQ.' ') GO TO 20
       CALL AOPEN(16,INAME,FORMAT,'DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)'Failed to open file ',INAME
           STOP
       END IF
   30  WRITE(6,*)'Output Filename ?'
       READ(5,703) ONAME
  703  FORMAT(A80)
       IF (ONAME.EQ.' ') GO TO 30
       CALL AOPENW(17,ONAME,FORMAT,'DISK',IER)
       IF (IER.NE.0) THEN
           WRITE(6,*)'Failed to open file ',ONAME
           STOP
       END IF
       I=-1
       CALL BDROP (IW,'E')
       CALL BLIST(IW,'E=','0')
   10  CALL TIMEX(T3)
       CALL AREAD(16,'E',' ',IRET,IER)
       CALL TIMEX(T4)
       I=I+1
       WRITE (6,701) I,IRET,IER
 701   FORMAT(' Event:',I5,'  Return Code :',I3,'  Error Code :',I8)
       TIME=TIME+T4-T3
       IF (IRET.GE.4) GO TO 100
       IF (IER.LT.0) GO TO 900
       CALL BWRITE(IW,17,'E')
       CALL BDROP(IW,'E')
       CALL BGARB(IW)
       GOTO 10
 100   CALL BWRITE(IW,17,'0')
       WRITE(6,*) 'Read and decompress time :',TIME
       CALL ACLOSE(16,IER)
       CALL ACLOSE(17,IER)
       STOP
 900   WRITE (6,*) ' Not Writting Event ',I
       GOTO 10
       END
@


1.1.1.1
log
@import alephio 4
@
text
@@
