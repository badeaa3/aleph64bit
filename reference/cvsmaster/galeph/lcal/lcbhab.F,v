head	1.2;
access;
symbols
	gal309_3:1.2
	gal309_2:1.2
	gal309_1:1.2
	gal309:1.2
	gal308_2:1.2
	gal308_1:1.2
	gal308:1.2
	gal307_2:1.2
	gal307_1:1.2
	gal307:1.2
	gal306_3:1.2
	gal306_2:1.2
	gal306_1:1.2
	gal306:1.2
	gal305_3:1.2
	gal305_2:1.2
	gal305_1:1.2
	gal305:1.2
	gal304_11:1.2
	gal304_10:1.2
	gal304_9:1.2
	gal304_8:1.2
	gal304_7:1.2
	gal304_6:1.2
	gal304_5:1.2
	gal304_4:1.2
	gal304_3:1.2
	gal304_2:1.2
	gal304_1:1.2
	gal304:1.2
	gal303_3:1.2
	gal303_2:1.2
	gal303_1:1.2
	v-303:1.2
	gal302_2:1.2
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	95.06.30.07.08.35;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.02.34;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.02.35;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@release galeph 302
 Modified files:
 gadoc.doc itdoc.doc
 adinit.F adrz.F adview.F adxy.F gaxeph.F
 ecasig.F ecbook.F ecdigi.F echit.F ecirun.F ecista.F ecnami.F
 ectrig.F ecwsum.F edfilh.F edinip.F edtadj.F edtain.F edtcor.F
 edtcut.F edtdig.F edtono.F edtrgi.F edtzsu.F edwbru.F edwdgt.F
 ehbari.F ehcutg.F eprimi.F
 galeph.F qnext.F
 agbeam.F agchck.F agcoil.F agecal.F agecpm.F ageome.F aggean.F
 aghcal.F agitch.F aglcal.F agmate.F agmedi.F agmuch.F agquad.F
 agscal.F agsmba.F agtpch.F
 gstmed.F guhadr.F guphad.F gustep.F gutrak.F
 cahtra.h gmacro.h lccomc.h lcnamc.h ljjpar.h siconst.h
 sigeco.h version.h
 itmsk1.F itmsk2.F itnois.F itres.F itxtlk.F
 lcadc.F lcamp.F lcasig.F lcbhab.F lcbkpr.F lcdigi.F lcfral.F
 lchit.F lcirun.F lcnami.F lcnois.F lcpad.F lcroc.F lcsamp.F
 lcsatu.F lcshow.F lcstrt.F lctrak.F lctrdi.F lctrht.F lcwire.F
 lcwsum.F lcwtri.F
 Removed Files:
 guinti.F
 aggatt.F aggord.F
 xtrcom.h
@
text
@*DK lcbhab
      SUBROUTINE LCBHAB(LCBHA,EFORW,EBACK)
C--------------------------------------------------------------
C! Simulates the Bhabha trigger
C! Author   : J.D.Hansen & P.H.Hansen - 860604
C! Modified : P.H.Hansen - 871001
C!
C!   Input : 'LTTR'
C!   Output: LCBHA  = 0 ... No trigger
C!                  = 1 ... Trigger
C!           EFORW  = trigger energy in subdetector A
C!           EBACK  = trigger energy in subdetector B
C!           update 'LCWS'
C!
C! - Called by LCTRIG                            from this .HLB
C ------------------------------------------------
#ifndef DOC
      SAVE
      DIMENSION JTRIG(12,2)
#include "iocom.h"
#include "jqcom.h"
#include "lccomc.h"
#include "lcnamc.h"
#include "bmacro.h"
C -------------------------------------------------------------
      LCBHA = 0
      EFORW = 0.
      EBACK = 0.
      KINDX = IW(NALTTR)
      IF(KINDX .LE. 0)                               GOTO 999
      LEL = LCOLS(KINDX)
C
C? Form super segments of adjecent pairs in the inner ring
      DO 100 IDET = 1,2
         DO 110 I = 1,12
           ISEG = (IDET-1)*12 + I
           KSEG = KROW(KINDX,ISEG)
           JTRIG(I,IDET) = 0
           DO 120 ISTOR = 1,3
             KL = KSEG + ISTOR
             IF (I .NE. 12) THEN
               JTRIG(I,IDET) = JTRIG(I,IDET) + IW(KL) + IW(KL+LEL)
             ELSE
               JTRIG(I,IDET) = JTRIG(I,IDET) + IW(KL) + IW(KL-11*LEL)
             ENDIF
  120      CONTINUE
  110   CONTINUE
        IF (LCPRNT .LT. 4)                                   GOTO 100
        WRITE(LOUTIO,5000) IDET,(JTRIG(J,IDET),J=1,12)
  100 CONTINUE
C
C? Loop over trigger segments and apply the trigger theshold
C? on both sides
      DO 200 I = 1,12
        J = I + 6
        IF (J .GT. 12) J = J - 12
        IF (JTRIG(I,1).GT.LCBHTR.AND.JTRIG(J,2).GT.LCBHTR) GOTO 210
  200 CONTINUE
C - Failure
      GOTO 999
C - Success
  210 LCBHA = 1
C
C? Energy in the trigger segments
      EFORW = FLOAT(JTRIG(I,1))*.001
      EBACK = FLOAT(JTRIG(J,2))*.001
C
C? Update the summary bank
      KINDX = IW(NALCWS)
      IF(KINDX .LE. 0)                                  GOTO 999
      IW(KINDX+LMHLEN+2) = IW(KINDX+LMHLEN+2) + 1
      IW(KINDX+LMHLEN+3) = IW(KINDX+LMHLEN+3) + JTRIG(I,1)
      IW(KINDX+LMHLEN+4) = IW(KINDX+LMHLEN+4) + JTRIG(J,2)
  999 CONTINUE
C
 5000 FORMAT(' +++ LCBHAB +++ component',I10,/,6I10,/,6I10)
      END
#endif
@


1.1
log
@Initial revision
@
text
@d16 1
a16 1
C -------------------------------------------------------------
@


1.1.1.1
log
@import galeph 300
@
text
@@
