head	1.2;
access;
symbols
	gal309_3:1.2
	gal309_2:1.2
	gal309_1:1.2
	gal309:1.2
	gal308_2:1.2
	gal308_1:1.2
	gal308:1.2
	gal307_2:1.2
	gal307_1:1.2
	gal307:1.2
	gal306_3:1.2
	gal306_2:1.2
	gal306_1:1.2
	gal306:1.2
	gal305_3:1.2
	gal305_2:1.2
	gal305_1:1.2
	gal305:1.2
	gal304_11:1.2
	gal304_10:1.2
	gal304_9:1.2
	gal304_8:1.2
	gal304_7:1.2
	gal304_6:1.2
	gal304_5:1.2
	gal304_4:1.2
	gal304_3:1.2
	gal304_2:1.2
	gal304_1:1.2
	gal304:1.2
	gal303_3:1.2
	gal303_2:1.2
	gal303_1:1.2
	v-303:1.2
	gal302_2:1.2
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	95.06.30.07.08.50;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.02.36;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.02.37;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@release galeph 302
 Modified files:
 gadoc.doc itdoc.doc
 adinit.F adrz.F adview.F adxy.F gaxeph.F
 ecasig.F ecbook.F ecdigi.F echit.F ecirun.F ecista.F ecnami.F
 ectrig.F ecwsum.F edfilh.F edinip.F edtadj.F edtain.F edtcor.F
 edtcut.F edtdig.F edtono.F edtrgi.F edtzsu.F edwbru.F edwdgt.F
 ehbari.F ehcutg.F eprimi.F
 galeph.F qnext.F
 agbeam.F agchck.F agcoil.F agecal.F agecpm.F ageome.F aggean.F
 aghcal.F agitch.F aglcal.F agmate.F agmedi.F agmuch.F agquad.F
 agscal.F agsmba.F agtpch.F
 gstmed.F guhadr.F guphad.F gustep.F gutrak.F
 cahtra.h gmacro.h lccomc.h lcnamc.h ljjpar.h siconst.h
 sigeco.h version.h
 itmsk1.F itmsk2.F itnois.F itres.F itxtlk.F
 lcadc.F lcamp.F lcasig.F lcbhab.F lcbkpr.F lcdigi.F lcfral.F
 lchit.F lcirun.F lcnami.F lcnois.F lcpad.F lcroc.F lcsamp.F
 lcsatu.F lcshow.F lcstrt.F lctrak.F lctrdi.F lctrht.F lcwire.F
 lcwsum.F lcwtri.F
 Removed Files:
 guinti.F
 aggatt.F aggord.F
 xtrcom.h
@
text
@*DK lcroc
      SUBROUTINE LCROC
C--------------------------------------------------------------
C! Simulate Read Out Controller
C. - J.Dines Hansen & P.Hansen - 860604
C. - Zero suppression and range saturation
C. - Modify banks 'LTDI'
C. - Called by  LCDIGI                           from this .HLB
C -----------------------------------------------
#ifndef DOC
      SAVE
      LOGICAL ACCPT
#include "jqcom.h"
#include "lcnamc.h"
#include "lccomc.h"
#include "bmacro.h"
C -------------------------------------------------------------
C - Process bank LTDI
        KINDX = IW(NALTDI)
        NOLD  = LROWS(KINDX)
        IF (KINDX .LE. 0 .OR. NOLD .LE. 0)             GOTO 999
        NEW = 0
C - Loop over stored digitalizations
        DO 110 IDIG = 1,NOLD
          KADR = KROW(KINDX,IDIG)
          ACCPT = .FALSE.
C         Loop over storeys
          DO 120 ISTOR = 1,3
C
C           Zero suppression in ADC
            IF (IW(KADR+1+ISTOR) .GE. LCSTRH(ISTOR))
     &         ACCPT = .TRUE.
C
C           Saturate signal at 12+3 bits
            MAXCO = NINT(ADCOLC*32767)
            IW(KADR+1+ISTOR) = MIN0(MAXCO,IW(KADR+1+ISTOR))
  120     CONTINUE
          IF (ACCPT) THEN
            NEW = NEW + 1
            KADRA  = KROW(KINDX,NEW)
            DO 130 ICOL = 1,LCOLS(KINDX)
  130       IW(KADRA+ICOL) = IW(KADR+ICOL)
          ENDIF
  110   CONTINUE
        IW(KINDX+2) = NEW
C
  999 RETURN
      END
#endif
@


1.1
log
@Initial revision
@
text
@d9 1
@


1.1.1.1
log
@import galeph 300
@
text
@@
