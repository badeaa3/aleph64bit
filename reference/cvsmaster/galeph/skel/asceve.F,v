head	1.2;
access;
symbols
	gal309_3:1.2
	gal309_2:1.2
	gal309_1:1.2
	gal309:1.2
	gal308_2:1.2
	gal308_1:1.2
	gal308:1.2
	gal307_2:1.2
	gal307_1:1.2
	gal307:1.2
	gal306_3:1.2
	gal306_2:1.2
	gal306_1:1.2
	gal306:1.2
	gal305_3:1.2
	gal305_2:1.2
	gal305_1:1.2
	gal305:1.2
	gal304_11:1.2
	gal304_10:1.2
	gal304_9:1.2
	gal304_8:1.2
	gal304_7:1.2
	gal304_6:1.2
	gal304_5:1.2
	gal304_4:1.2
	gal304_3:1.2
	gal304_2:1.2
	gal304_1:1.2
	gal304:1.2
	gal303_3:1.2
	gal303_2:1.1.1.1
	gal303_1:1.1.1.1
	v-303:1.1.1.1
	gal302_2:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	96.05.08.10.22.25;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.01.41;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.01.42;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@replace TIMAx by TIMEx
@
text
@*DK asceve
      SUBROUTINE ASCEVE
C ----------------------------------------------------------------------
C. - F.RANJARD - 850328                 modified - 861009
C! Close the current event
C.   do analysis
C.   save event on tape
C.   drop BOS banks and release space
C. - called by    ASPRUN                      from this .HLB
C. - calls        USCEVE, ASEVST, ASWRTP      from this .HLB
C.                RDMOUT                      from KERNLIB
C---------------------------------------------------------------
#ifndef DOC
      SAVE
#include "jqcom.h"
#include "iocom.h"
#include "jobcom.h"
#include "afidjj.h"
#include "evehjj.h"
      CHARACTER*4 NAME,NLIST
      DATA IFI /0/
#include "bmacro.h"
C ----------------------------------------------------------------------
C
C - Call USER routine
      CALL USCEVE
C
C - Build event statistics bank 'ASEV'
      CALL ASEVST
C
C - Update AFID beam energy with EVEH beam energy at 1st entry
      IF (IFI .EQ. 0) THEN
        IF(IW(NAMIND('RLEP')) .EQ. 0) THEN
          JAFID = IW(NAMIND('AFID'))
          IF (JAFID .GT. 0) THEN
            JEVEH = IW(NAEVEH)
            IF (JEVEH .GT. 0) THEN
              RW(JAFID+LMHLEN+JAFIBE) = REAL(IW(JEVEH+JEVETE))*1.E-6
            ENDIF
          ENDIF
        ENDIF
        IFI = 1
      ENDIF
C
C Produce friendly Fxxx DST if asked for.
      IF (FXXXJO) THEN
        CALL ASFXXX
        IF (FDEBJO .AND. IPRIJO(16).EQ.1) CALL PRFKIN
      ENDIF
C
C - Save event onto unit # LSAVIO if required
C
      IF (MSAVJO.NE.0) CALL ASWRTP ('E')
C
      IF (FDEBJO .AND. IPRIJO(14).EQ.1) CALL AUBLIS ('E')
C
#if defined(DRAW)
C
C   Draw standard plots if diplay required
C
      IF (FDISJO)  CALL ADVIEW
#endif
C
C - Save last random number which will be the root of the next evt.
      CALL RDMOUT (NRNDJO(1))
      CALL VZERO (IRNDJO,LPRO*LRND)
C
C - Debug
C
      IF (FDEBJO .OR. KERRJO.NE.0) THEN
        CALL TIMED (TIMEJO(6))
        TIMEJO(4) = TIMEJO(4) + TIMEJO(6)
        WRITE (LOUTIO,801) NEVTJO,TIMEJO(4),TIMEJO(6)
  801   FORMAT (/1X,'+++ASCEVE+++ event# ',I5,'  total time spent = '
     &             ,F9.3,' sec , during digitization + trigger = '
     &             ,F9.3,' sec')
        TIMEJO(4) = 0.
      ENDIF
C
      RETURN
      END
#endif
@


1.1
log
@Initial revision
@
text
@d71 1
a71 1
        CALL TIMAD (TIMEJO(6))
@


1.1.1.1
log
@import galeph 300
@
text
@@
