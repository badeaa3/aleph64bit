head	1.2;
access;
symbols
	gal309_3:1.2
	gal309_2:1.2
	gal309_1:1.2
	gal309:1.2
	gal308_2:1.2
	gal308_1:1.2
	gal308:1.2
	gal307_2:1.2
	gal307_1:1.2
	gal307:1.2
	gal306_3:1.2
	gal306_2:1.2
	gal306_1:1.2
	gal306:1.2
	gal305_3:1.2
	gal305_2:1.2
	gal305_1:1.2
	gal305:1.2
	gal304_11:1.2
	gal304_10:1.2
	gal304_9:1.2
	gal304_8:1.2
	gal304_7:1.2
	gal304_6:1.2
	gal304_5:1.2
	gal304_4:1.2
	gal304_3:1.2
	gal304_2:1.2
	gal304_1:1.2
	gal304:1.2
	gal303_3:1.2
	gal303_2:1.2
	gal303_1:1.2
	v-303:1.2
	gal302_2:1.2
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	95.06.30.07.09.53;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.02.42;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.02.43;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@release galeph 302
 Modified files:
 gadoc.doc itdoc.doc
 adinit.F adrz.F adview.F adxy.F gaxeph.F
 ecasig.F ecbook.F ecdigi.F echit.F ecirun.F ecista.F ecnami.F
 ectrig.F ecwsum.F edfilh.F edinip.F edtadj.F edtain.F edtcor.F
 edtcut.F edtdig.F edtono.F edtrgi.F edtzsu.F edwbru.F edwdgt.F
 ehbari.F ehcutg.F eprimi.F
 galeph.F qnext.F
 agbeam.F agchck.F agcoil.F agecal.F agecpm.F ageome.F aggean.F
 aghcal.F agitch.F aglcal.F agmate.F agmedi.F agmuch.F agquad.F
 agscal.F agsmba.F agtpch.F
 gstmed.F guhadr.F guphad.F gustep.F gutrak.F
 cahtra.h gmacro.h lccomc.h lcnamc.h ljjpar.h siconst.h
 sigeco.h version.h
 itmsk1.F itmsk2.F itnois.F itres.F itxtlk.F
 lcadc.F lcamp.F lcasig.F lcbhab.F lcbkpr.F lcdigi.F lcfral.F
 lchit.F lcirun.F lcnami.F lcnois.F lcpad.F lcroc.F lcsamp.F
 lcsatu.F lcshow.F lcstrt.F lctrak.F lctrdi.F lctrht.F lcwire.F
 lcwsum.F lcwtri.F
 muasig.F mubook.F muirun.F muunoi.F muwsum.F
 Removed Files:
 guinti.F
 aggatt.F aggord.F
 xtrcom.h
@
text
@*DK muirun
      SUBROUTINE MUIRUN
C ----------------------------------------------------
C - F.Ranjard - 860624
C             modified for DAF and new bank layout
C             by F.Bossi,D.Kuhn,R.Xu 87-09-05
C           - modified for final dbase
C             by A. Antonelli, F. Bossi 1 July 89
C
C - Initialize MUON BOS banks and MUON common blocks
C - Called from   ASIPAC                      from this .HLB
C - Calls         NAMIND, BKFMT               from BOS77 lib
C -----------------------------------------------
#ifndef DOC
#include "jobcom.h"
#include "iocom.h"
#include "bcs.h"
#include "munamc.h"
#include "mugncn.h"
#include "mug1pr.h"
#include "mustat.h"
#include "mjjpar.h"
        INTEGER  ALGTDB
        EXTERNAL ALGTDB
      CHARACTER*52 LIST
      DATA LIST /'MUOGMBAGMBBGMBSGMBTGMECGMEBGMETGMESGMMAGMMBGMMTGMMSG'/
#include "bmacro.h"
C ------------------------------------------------------
      IF (IDETJO(8).GT.0) THEN
      NAMUDG = NAMIND ('MUDG')
      NAMUHT = NAMIND ('MUHT')
      NAMUDT = NAMIND ('MUDT')
      NAMUTD = NAMIND ('MUTD')
C
C - set bank format
C
      CALL BKFMT ('MUTD','I')
      CALL BKFMT ('MUHT','I')
      CALL BKFMT ('MUDG','I')
      CALL BKFMT ('MUDT','I')
      ENDIF
      JDMUST = 0
      JDMTHT = 0
C - set flag for NEW geometry
      ICMUJO(5) = 1
C
C       For the genaral muon detector information, fill the common block
C       only once.
C
        IRET = ALGTDB (LRDBIO,LIST,IRUNJO)
        IF (IRET.EQ.0) CALL ALTELL ('MUON data base banks missing',0,
     &    'STOP')
C
        NAMUOG = NAMIND('MUOG')
        NAMBAG = NAMIND('MBAG')
        NAMBBG = NAMIND('MBBG')
        NAMBSG = NAMIND('MBSG')
        NAMBTG = NAMIND('MBTG')
c
        NAMECG = NAMIND('MECG')
        NAMEBG = NAMIND('MEBG')
        NAMETG = NAMIND('METG')
        NAMESG = NAMIND('MESG')
C
        NAMMAG = NAMIND('MMAG')
        NAMMBG = NAMIND('MMBG')
        NAMMTG = NAMIND('MMTG')
        NAMMSG = NAMIND('MMSG')
C
#include "muiwna.h"
        WDEIMU = RTABL(JMUOG,1,JMUOWI)
        WDTBMU = RTABL(JMUOG,1,JMUOTU)
        OFTBMU = 0.5*RTABL(JMUOG,1,JMUOSP)
        WDATMU = RTABL(JMUOG,1,JMUOAC)
        HTATMU = RTABL(JMUOG,1,JMUOAC)
        HFHTMU = 0.5 * HTATMU
        SGLSMU = RTABL(JMUOG,1,JMUOSE)
        PSCRMU = RTABL(JMUOG,1,JMUOET)
        DSSPMU = RTABL(JMUOG,1,JMUODI)
        PTSPMU = RTABL(JMUOG,1,JMUODE) + DSSPMU
        PTXSMU = RTABL(JMUOG,1,JMUOXS)
        SNSXMU(1) = RTABL(JMUOG,1,JMUOX1)
        SNSXMU(2) = RTABL(JMUOG,1,JMUOX2)
        SNSXMU(3) = RTABL(JMUOG,1,JMUOX3)
        SNSXMU(4) = RTABL(JMUOG,1,JMUOX4)
        PTYSMU = RTABL(JMUOG,1,JMUOYS)
        SNSYMU(1) = RTABL(JMUOG,1,JMUOY1)
        SNSYMU(2) = RTABL(JMUOG,1,JMUOY2)
        SNSYMU(3) = RTABL(JMUOG,1,JMUOY3)
        SNSYMU(4) = RTABL(JMUOG,1,JMUOY4)
C
C - set the matrix to find address of a module in
C   geometric BOS bank by means of the slot#, the volume#
C   and the 3rd level volume name
C
 888  CONTINUE
      CALL VZERO(MMADPR(1,1),48)
        MMMNSL = ITABL(JMMAG,1,JMMANS)
        DO 10   IADD=1,MMMNSL
        ISLT = ITABL(JMMSG,IADD,JMMSVO)
      IF( IADD .LE. NMMIN )THEN
         ISET = 1
      ELSE IF( IADD .LE. NMMA )THEN
         ISET = 2
      ELSE IF( IADD .LE. NMMBI )THEN
         ISET = 3
      ELSE
         ISET = 4
      ENDIF
      MMADPR(ISLT,ISET) = IADD
   10 CONTINUE
C
C       Initialize statistics for MUON
C
      NEVMUH = 0
      NTMCLU = 0
      NMXCLU = 0
C
      END
#endif
@


1.1
log
@Initial revision
@
text
@d13 1
a14 1
      SAVE
@


1.1.1.1
log
@import galeph 300
@
text
@@
