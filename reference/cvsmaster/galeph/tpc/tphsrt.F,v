head	1.2;
access;
symbols
	gal309_3:1.2
	gal309_2:1.2
	gal309_1:1.2
	gal309:1.2
	gal308_2:1.2
	gal308_1:1.2
	gal308:1.2
	gal307_2:1.2
	gal307_1:1.2
	gal307:1.2
	gal306_3:1.2
	gal306_2:1.2
	gal306_1:1.2
	gal306:1.2
	gal305_3:1.2
	gal305_2:1.2
	gal305_1:1.2
	gal305:1.2
	gal304_11:1.2
	gal304_10:1.2
	gal304_9:1.2
	gal304_8:1.2
	gal304_7:1.2
	gal304_6:1.2
	gal304_5:1.2
	gal304_4:1.2
	gal304_3:1.2
	gal304_2:1.2
	gal304_1:1.2
	gal304:1.2
	gal303_3:1.2
	gal303_2:1.2
	gal303_1:1.2
	v-303:1.2
	gal302_2:1.2
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	95.06.30.07.14.50;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.02.51;	author flr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.02.52;	author flr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@release galeph 302
 Modified files:
 gadoc.doc itdoc.doc
 adinit.F adrz.F adview.F adxy.F gaxeph.F
 ecasig.F ecbook.F ecdigi.F echit.F ecirun.F ecista.F ecnami.F
 ectrig.F ecwsum.F edfilh.F edinip.F edtadj.F edtain.F edtcor.F
 edtcut.F edtdig.F edtono.F edtrgi.F edtzsu.F edwbru.F edwdgt.F
 ehbari.F ehcutg.F eprimi.F
 galeph.F qnext.F
 agbeam.F agchck.F agcoil.F agecal.F agecpm.F ageome.F aggean.F
 aghcal.F agitch.F aglcal.F agmate.F agmedi.F agmuch.F agquad.F
 agscal.F agsmba.F agtpch.F
 gstmed.F guhadr.F guphad.F gustep.F gutrak.F
 cahtra.h gmacro.h lccomc.h lcnamc.h ljjpar.h siconst.h
 sigeco.h version.h
 itmsk1.F itmsk2.F itnois.F itres.F itxtlk.F
 lcadc.F lcamp.F lcasig.F lcbhab.F lcbkpr.F lcdigi.F lcfral.F
 lchit.F lcirun.F lcnami.F lcnois.F lcpad.F lcroc.F lcsamp.F
 lcsatu.F lcshow.F lcstrt.F lctrak.F lctrdi.F lctrht.F lcwire.F
 lcwsum.F lcwtri.F
 muasig.F mubook.F muirun.F muunoi.F muwsum.F
 trignews.h
 siasig.F sitrak.F siwsum.F
 asasig.F asbook.F ascjob.F ascrun.F asctra.F asevst.F asfxxx.F
 asieve.F asigea.F asijob.F asimod.F asinit.F asipac.F asirun.F
 askine.F asksin.F asktrk.F aspeve.F asprun.F asread.F asredc.F
 asreve.F asrkin.F asrtyp.F asrust.F astdeb.F astgea.F astrac.F
 astrig.F aswkin.F aswrtp.F aswsum.F
 tpdigi.F tpgeth.F tphdif.F tphsrt.F tpirun.F tpugeo.F
 Removed Files:
 guinti.F
 aggatt.F aggord.F
 xtrcom.h
 ecalnews.h geomnews.h lcalnews.h news.h skelnews.h vdetnews.h
@
text
@*DK tphsrt
      SUBROUTINE TPHSRT(NAMH,NAMR)
C -------------------------------------------------------------------
C. - M.Mermikides -  860202
C.
C. -  Sorts hit bank and track element ref. bank in increasing radius
C.    NAMH is name index of hit bank to be sorted
C     NAMR  "   "    "      track element ref. bank
C.    (NB It is implied that the 2nd word (ChanID) is the sort key)
C.
C. -  Calls           NDROP,WBANK,WDROP              from BOS77 lib
C.                    UCOCOP,SORTZV                  from CERN lib
C -------------------------------------------------------
#ifndef DOC
      SAVE
#include "jqcom.h"
#include "iocom.h"
      COMMON /JDTLOC/ JDSORT,JDWORK
C
#include "bmacro.h"
      JHIT(IH) = KROW (KHIT,IH)
C
C -------------------------------------------------------------------
      JDSORT = 0
      JDWORK = 0
C
      KHIT = IW(NAMH)
C
C  Exit if no bank
C
      IF (KHIT.EQ.0) GO TO 999
      NWPHT = IW(KHIT + 1)
      NHITS = IW(KHIT + 2)
      IF (NHITS.LT.2) GO TO 999
C
C  Book work banks for sorting
C
      CALL WBANK(IW,JDSORT,NHITS,*800)
      CALL WBANK(IW,JDWORK,NHITS,*800)
C
C Sort according to channel number
C
      DO 150 IH = 1,NHITS
         IW(JDWORK + IH) = IW(JHIT(IH) + 2)
150   CONTINUE
C
      CALL SORTZV(IW(JDWORK+1),IW(JDSORT+1),NHITS,-1,0, 0,0,0)
C
C  Replace bank contents according to key order
      DO 11 K=1,NWPHT
         CALL UCOCOP(IW(KHIT+2+K),IW(JDWORK+1),NHITS,1, NWPHT, 1)
         DO 14 I = 1,NHITS
            IND = IW(JDSORT + I)
            IW(JHIT(I) + K) = IW(JDWORK + IND)
14       CONTINUE
11    CONTINUE
C
C  Now sort track element reference bank (if it exists)
C
      KHITR = IW(NAMR)
      IF(KHITR.EQ.0) GO TO 900
      KHE = KHITR + 2
      CALL UCOPY(IW(KHE+1),IW(JDWORK+1),NHITS)
      DO 175 I=1,NHITS
         IND = IW(JDSORT + I)
         IW(KHE + I) = IW(JDWORK + IND)
175   CONTINUE
C
      GO TO 900
C
C  Error
 800  CONTINUE
      CALL WDROP (IW,JDSORT)
      CALL WDROP (IW,JDWORK)
      CALL ALTELL ('TPHSRT: not enough space to book JDSORT/JDWORK ',
     &              1,'NEXT')
C
C  End
900   CALL WDROP(IW,JDSORT)
      CALL WDROP(IW,JDWORK)
999   RETURN
      END
#endif
@


1.1
log
@Initial revision
@
text
@d13 1
@


1.1.1.1
log
@import galeph 300
@
text
@@
