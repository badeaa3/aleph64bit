head	1.2;
access;
symbols
	jul313_3:1.2
	jul313_2:1.2
	jul313_1:1.2
	jul313:1.2
	jul312_1:1.2
	jul312:1.2
	jul311:1.2
	jul310_1:1.2
	jul310:1.2
	jul309_1:1.2
	jul309:1.2
	jul308_6:1.2
	jul308_5:1.2
	jul308_4:1.2
	jul308_3:1.2
	jul308_2:1.2
	jul308_1:1.2
	jul308:1.2
	jul307_4:1.2
	jul307_3:1.2
	jul307_2:1.2
	jul307_1:1.2
	jul307:1.2
	jul306_3:1.2
	jul306_2:1.2
	jul306_1:1.2
	jul306:1.2
	jul305_4:1.2
	jul305_3:1.2
	jul305_2:1.2
	jul305_1:1.2
	jul305:1.2
	jul304_3:1.2
	jul304_2:1.2
	jul304_1:1.2
	jul304:1.2
	jul303_7:1.2
	jul303_6:1.2
	jul303_5:1.2
	jul303_4:1.2
	jul303_3:1.2
	jul303_2_mc1:1.2
	jul303_2:1.2
	jul303_1_mc1:1.2
	jul303_1:1.2
	jul303_v:1.2
	jul303:1.2
	jul302_6:1.2
	jul302_5:1.2
	jul302_4:1.2
	jul302_3:1.2
	jul302_2:1.2
	jul302_1:1.2
	jul302:1.2
	jul285_1:1.2
	jul285:1.2
	jul284_1:1.2
	jul284:1.2
	jul283_1:1.2
	jul283:1.2
	jul282_1:1.2
	jul282:1.2
	jul281_3:1.2
	jul281_2:1.2
	jul281_1:1.2
	jul281:1.2
	jul280_1:1.2
	jul280:1.2
	jul279:1.1.1.1
	v300:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.2
date	96.03.12.15.39.35;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.19.51;	author aljul;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.19.52;	author aljul;	state Exp;
branches;
next	;


desc
@@


1.2
log
@import jul280 from historian
Modified Files:
	aamain.F aboldr.F ajmmcl.F almmcl.F altime.F aulpol.F
	bccrun.F bcpack.F binijo.F biniru.F bmsum.F bpreda.F bprsum.F
	bslowc.F
	cabook.F calrec.F calrel.F calrep.F calsup.F cashet.F casmp.F
	casneu.F casnmp.F cclorl.F cctrmi.F ccutpe.F cdang.F cdths.F
 	cegclu.F cencch.F cencne.F cesclu.F cexcob.F cexhis.F cfpass.F
 	cfpmip.F cfpnmp.F cgrunc.F chclu.F chgclu.F chsclu.F cinijo.F
 	cinirl.F cinpar.F cinsrl.F cisgam.F cishit.F cludis.F cmoni.F
 	cnighb.F coslst.F cpadwr.F cparad.F cpotcr.F cpoteh.F cpotlc.F
 	cptcom.F crcalo.F crchrl.F crcjob.F crcpar.F crhclu.F cthclu.F
 	ctkchg.F ctrmip.F ctrpar.F ctrtoc.F cvrify.F
 	e1bpei.F e2bpei.F e3bpei.F e4bary.F e4cosz.F e4dead.F e4deij.F
 	e4fdij.F e4fide.F e4find.F e4fnec.F e4frac.F e4gtbr.F e4gtpl.F
 	e4gtso.F e4gtst.F e4gttw.F e4indi.F e4lea1.F e4ovrl.F e4pal.F
 	e4r1r2.F e4r2r3.F e4r3r4.F e4radc.F e4res2.F e4res3.F e4tstl.F
 	e4xyz0.F eautop.F ebegid.F eboxki.F ecalig.F ecblda.F ecboba.F
	ecbook.F eccaob.F ecchkb.F ecclco.F ecclus.F ecdamp.F ecdebg.F
 	ecdete.F ecdigi.F ecener.F eceras.F ecfclu.F ecfils.F ecfmip.F
 	ecfobj.F ecgflw.F ecgmix.F echarg.F echcgl.F echedc.F echiba.F
 	echist.F echtag.F ecinit.F ecinrv.F eclamp.F eclana.F ecleib.F
 	eclgeo.F eclope.F eclorl.F eclost.F ecltag.F ecltrk.F ecltyp.F
 	ecluar.F ecmesp.F ecmod.F ecmopl.F ecncob.F ecobnk.F ecoent.F
 	ecoidp.F ecos.F ecpasr.F ecplm.F ecprin.F ecprlo.F ecrcob.F
 	ecre4d.F ecreib.F ecrmip.F ecrndx.F ecrpei.F ecrtr.F ecrunq.F
 	ecscmd.F ecst.F ecsupp.F ecsw1093.F ecsw94.F ectemp.F ecthre.F
 	ectopo.F ectpc.F ectrap.F ectrea.F ecxmod.F edisal.F edlist.F
 	efaxe.F efbook.F eferrr.F eficlp.F eficv.F efiecp.F efieib.F
 	efijob.F efix.F efixi94.F eflcst.F efolmk.F efpard.F eftiel.F
 	egacst.F egaest.F egetds.F egfcst.F egttks.F ehcflo.F ehlix.F
 	ehreg.F eidedx.F eident.F eieffl.F einhlx.F einijo.F einirl.F
 	einiru.F einitk.F einsrl.F eipard.F eithr.F eknewb.F eknewe.F
 	elecid.F elongi.F emfill.F emskei.F emskev.F emskf.F emski.F
 	emskji.F emskmu.F enfmsk.F enighb.F enoise.F enprox.F enstat.F
 	epadcl.F epatrn.F epcalo.F epchg.F epneu.F epreda.F eproba.F
 	eprsto.F eprsum.F eprtpc.F ereset.F eroad.F escdef.F escoun.F
 	esfil.F eslas.F eslct.F eslctf.F eslowc.F estag.F esveto.F
 	eswpst.F etdifp.F ethres.F etrdev.F ewdifp.F ewircl.F ex3ijk.F
 	fawian.F ffield.F fidhea.F fidrot.F finiru.F fitall.F fitwri.F
 	fkink.F fkkpar.F floweh.F flowfi.F flowtr.F fmuid.F fpiden.F
 	frefit.F ftpcer.F ftrack.F
 	gambnk.F gapeco.F gasteer.F
 	hcalib.F hcalrd.F hcatow.F hcbhis.F hcfclu.F hchist.F hclcra.F
 	hcltst.F hclufi.F hcos.F hcsimm.F hdgdeb.F hdgfil.F hdgpot.F
 	hdgsum.F hdprec.F hdspre.F hflnoi.F hinijo.F hiniru.F hmener.F
 	hmfind.F hmroad.F hnoise.F hnoisy.F hpatco.F hphnoi.F hplink.F
 	hprana.F hpranp.F hprdig.F hpreda.F hprpot.F hprsum.F hprunc.F
 	hrcomp.F hrcpat.F hrdcal.F hroad.F hslink.F hslowc.F hspare.F
 	hsptre.F hstofi.F htrack.F htubfi.F htwcr.F
 	iasign.F iattma.F ibnkin.F icaswt.F icftoi.F iclimb.F icrcco.F
 	ideadw.F idigpr.F ienang.F ifind1.F ifind2.F ifitp.F iftrak.F
 	igetti.F igettp.F igicha.F iheler.F iinijo.F iiniru.F iintrk.F
 	imatch.F inigap.F insect.F intrak.F ipakdi.F ipdsti.F iphcor.F
 	ipreda.F iprsum.F ipstat.F irefin.F ireopd.F isave.F ishuff.F
 	ishufl.F islowc.F isrch.F itbook.F itccut.F itcopr.F itcrec.F
 	itcrep.F itctpc.F itctrk.F itcxng.F iterr.F itextn.F ithist.F
 	itidy1.F itidy2.F itlnk1.F itlnk2.F itpcan.F itrak.F itrecf.F
 	itreci.F itree.F itrkci.F itrkeq.F itrkzr.F itrmca.F
@
text
@      SUBROUTINE TCLDMP(IC,ISLOT,IUNIT)
C
C----------------------------------------------------------------------
C! Dump a single TPC cluster
C!
C!    Author:   R. Johnson    6-05-87
C!
C!    Input:
C!        - IC         /I    Cluster index in TCLU
C!        - ISLOT      /I    Number of sector containing the cluster
C!        - IUNIT      /I    Logical unit number to dump to
C!
C!    Called by TCDUMP
C!
C!    Description
C!    ===========
C!    This routine dumps all information available about a single
C!    TPC cluster---raw data, subpulses, subclusters, and coordinates.
C!---------------------------------------------------------------------
#ifndef DOC
C
#include "tparac.h"
#include "tclujj.h"
#include "tpuljj.h"
#include "tpcojj.h"
#include "tcrljj.h"
#include "tlrljj.h"
#include "tscljj.h"
#include "tspujj.h"
#include "bcs.h"
C
      PARAMETER (MAXPR=25,MWPHP=16)
      CHARACTER*40 FMT
C
C----------------------------------------------------------------------
C
#include "bmacro.h"
#include "tsfunc.h"
C
C----------------------------------------------------------------------
C
      KTCLU=NLINK('TCLU',ISLOT)
      IF (KTCLU.LE.0) RETURN
C
      KTPCO=IW(NAMIND('TPCO'))
      KTSCL=NLINK('TSCL',ISLOT)
      KTSPU=NLINK('TSPU',ISLOT)
      KTPUL=NLINK('TPUL',ISLOT)
      KTPAD=NLINK('TPAD',ISLOT)
      KTPDI=NLINK('TPDI',ISLOT)
C
      IF (NPULS(IC).EQ.0) RETURN
C
      IROW=IW(KROW(KTCLU,IC)+JTCLPN)
C
      WRITE(IUNIT,1001) IC,IROW
C
      MINBN=IW(KROW(KTCLU,IC)+JTCLFB)
      MAXBN=IW(KROW(KTCLU,IC)+JTCLLB)
      NN=MIN0(MAXBN,MINBN+MAXPR-1)
      WRITE(IUNIT,1002) (LL,LL=MINBN,NN)
C
C++   Loop over all pulses in the cluster and print the samples
C
      DO 80 IP=1,IW(KROW(KTCLU,IC)+JTCLNP)
        NN=5*(ITIME0(IC,IP)-MINBN)
        NN=MIN0(NN,5*MAXPR)
        IF (NN.LE.0) NN=0
        NN1=NN+1
        WRITE(FMT,'(''(1X,I5,'',I3,''X,I4,24I5)'')' ) NN1
        NN=MIN0(MAXPR-NN/5,NSAMP(IC,IP) )
        WRITE(IUNIT,FMT) IPADNR(IC,IP),
     1                     ( ISAMPH(IC,IP,IS),IS=1,NN )
C
   80 CONTINUE
C
C++   Now find all the subclusters for this cluster and print
C++   subclusters, subpulses, and coordinates
C
      IF (KTSCL.GT.0) THEN
        DO 86 ISCL=1,IW(KTSCL+LMHROW)
          IF (IW(KROW(KTSCL,ISCL)+JTSCCL).EQ.IC) THEN
            IF (IW(KROW(KTSCL,ISCL)+JTSCNC).GT.0) THEN
              IERR=0
            ELSE
              IERR=-IW(KROW(KTSCL,ISCL)+JTSCNC)
            ENDIF
            WRITE(IUNIT,4001) ISCL,IW(KROW(KTSCL,ISCL)+JTSCAW),
     &                               IW(KROW(KTSCL,ISCL)+JTSCQU),
     &                               IW(KROW(KTSCL,ISCL)+JTSCTC),IERR,
     &                               RW(KROW(KTSCL,ISCL)+JTSCSP),
     &                               RW(KROW(KTSCL,ISCL)+JTSCSB),
     &                               RW(KROW(KTSCL,ISCL)+JTSCCR)
            WRITE(IUNIT,4003)
            IPAD1=IABS(IW(KROW(KTSCL,ISCL)+JTSCFP))
            ISGN=ISIGN(1,IW(KROW(KTSCL,ISCL)+JTSCFP))
            DO 87 K=1,IW(KROW(KTSCL,ISCL)+JTSCNS)
              ISPL=K+IW(KROW(KTSCL,ISCL)+JTSCPO)
              IPADN=IPAD1+ISGN*(K-1)
              WRITE(IUNIT,4002) IPADN,ISPL,
     &                           IW(KROW(KTSPU,ISPL)+1),
     &                           (RW(KROW(KTSPU,ISPL)+J),J=2,6),
     &                           IW(KROW(KTSPU,ISPL)+7)
   87       CONTINUE
            IF (IW(KROW(KTSCL,ISCL)+JTSCNC).GT.0
     &                                 .AND. KTPCO.GT.0) THEN
              WRITE(IUNIT,4005)
              DO 88 K=1,IW(KROW(KTSCL,ISCL)+JTSCNC)
                ICO=K+IW(KROW(KTSCL,ISCL)+JTSCCO)
                RPHI=RW(KROW(KTPCO,ICO)+JTPCRV)*
     &                         RW(KROW(KTPCO,ICO)+JTPCPH)
                WRITE(IUNIT,4004)ICO,
     &                           RW(KROW(KTPCO,ICO)+JTPCRV),RPHI,
     &                           (RW(KROW(KTPCO,ICO)+L),L=4,6),
     &                           (IW(KROW(KTPCO,ICO)+L),L=7,8)
   88         CONTINUE
            ENDIF
          ENDIF
   86   CONTINUE
      ENDIF
C
C++   Print all unassociated subpulses
C
      IF (KTSPU.NE.0) THEN
        IFND=0
        DO 280 I=1,IW(KROW(KTCLU,IC)+JTCLNP)
          IP=I+IW(KROW(KTCLU,IC)+JTCLOP)
          DO 260 ISPL=1,IW(KTSPU+LMHROW)
            IF (IW(KROW(KTSPU,ISPL)+JTSPPN).EQ.IP) THEN
              IF (IW(KROW(KTSPU,ISPL)+JTSPSC).EQ.0) THEN
                IFND=IFND+1
                IF (IFND.EQ.1) WRITE(IUNIT,5003)
                IOFTP=IW(KROW(KTPUL,IP)+JTPUOP)
                IHTWD=IW(KTPAD+IOFTP+1)
                IPADN=IBITS(IHTWD,24,8)
                WRITE(IUNIT,4002) IPADN,ISPL,
     &                            IW(KROW(KTSPU,ISPL)+1),
     &                            (RW(KROW(KTSPU,ISPL)+J),J=2,6),
     &                            IW(KROW(KTSPU,ISPL)+7)
              ENDIF
            ENDIF
  260     CONTINUE
  280   CONTINUE
      ENDIF
      RETURN
C
 1001 FORMAT(/' *** Cluster ',I4,' in row ',I2,':')
 1002 FORMAT(6X,25(I5))
 4001 FORMAT(4X,'Subcluster ',I4,'  Algorithm=',I5,'  Quality=',I6,
     &       ' Charge=',I6/,5X,'IER=',I4,' Sigma-Pad=',E11.4,
     &       ' Sigma-Bucket=',E11.4,' Correlation=',E11.4)
 4003 FORMAT(7X,'Subpulses:'/
     &        11X,'Pad',4X,'I',5X,'TC ',7X,'PC',10X,'PT',10X,'IT',10X,
     &        'T1',10X,'T2',7X,'QF')
 5003 FORMAT(7X,'Unassociated subpulses:'/
     &        11X,'Pad',4X,'I',5X,'TC ',7X,'PC',10X,'PT',10X,'IT',10X,
     &        'T1',10X,'T2',7X,'QF')
 4002 FORMAT(10X,I3,2X,I4,3X,I5,5(1X,E11.4),1X,I6)
 4004 FORMAT(8X,I4,5(1X,E11.4),5X,I2,5X,3X,I3)
 4005 FORMAT(7X,'Coordinates:'/,11X,'I',7X,'R',10X,'R*Phi',7X,'Z',7X,
     &       'S**2 RPhi',5X,'S**2 Z',4X,'Origin',5X,'Track')
      END
#endif
@


1.1
log
@Initial revision
@
text
@a0 1
*DK tcldmp
@


1.1.1.1
log
@import julia 300
@
text
@@
