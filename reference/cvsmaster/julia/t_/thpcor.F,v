head	1.1;
access;
symbols
	jul313_3:1.1
	jul313_2:1.1
	jul313_1:1.1
	jul313:1.1
	jul312_1:1.1
	jul312:1.1
	jul311:1.1
	jul310_1:1.1
	jul310:1.1
	jul309_1:1.1
	jul309:1.1
	jul308_6:1.1
	jul308_5:1.1
	jul308_4:1.1
	jul308_3:1.1
	jul308_2:1.1
	jul308_1:1.1
	jul308:1.1
	jul307_4:1.1
	jul307_3:1.1
	jul307_2:1.1
	jul307_1:1.1
	jul307:1.1
	jul306_3:1.1
	jul306_2:1.1
	jul306_1:1.1
	jul306:1.1
	jul305_4:1.1
	jul305_3:1.1
	jul305_2:1.1
	jul305_1:1.1
	jul305:1.1
	jul304_3:1.1
	jul304_2:1.1
	jul304_1:1.1
	jul304:1.1;
locks; strict;
comment	@c @;


1.1
date	97.08.19.15.02.53;	author cattanem;	state Exp;
branches;
next	;


desc
@@


1.1
log
@modifs for julia 304
@
text
@      SUBROUTINE THPCOR(NHALF,IPDMN,ISLOT,IROW,RPHI,RFUDG,IERY)
C
C--------------------------------------------------------------------
C! Fudge the coordinate location in case two half pads are used
C
C  R. Johnson     13-3-90
C  D. Casper      06-08-97 create THPCOR from THPFDG, to handle
C                          corrections for 1 half-pad coords as well
C
C  Input:  NHALF     /I      Number of half-pads in coordinate
C          IPDMN     /I      1st pad number in the cluster
C          ISLOT     /I      TPC sector slot number
C          IROW      /I      Row number in the sector
C          RPHI      /R      Uncorrected RPHI in pad units
C  Output: RFUDG     /R      Corrected RPHI
C          IERY      /I      Error code.  Chuck this coordinate if
C                            not zero.
C--------------------------------------------------------------------
#ifndef DOC
C
#include "tpgpar.h"
#include "tpgeom.h"
#include "tpgeop.h"
C
      IERY=0
      ISTYP=ITPTYP(ISLOT)
      NTPAD=NTPDPR(IROW,ISTYP)+2
C
C++   If the cluster has half pads in it then
C++   apply an empirical correction
C
      
      IF (IPDMN.LE.2) THEN
        DEL = (RPHI - 2.0)*TPDSEP(ISTYP)
        IF (NHALF.EQ.1) THEN
          CALL TCSHF1(DEL,DELO,IER)
        ELSE
          CALL TCSHFT(DEL,DELO,IER)
        ENDIF
        RFUDG = RPHI + (DELO - DEL)/TPDSEP(ISTYP)
        IF (IER.NE.0) THEN
           IERY = 800
           GOTO 999
        ENDIF
      ELSE
        DEL = (FLOAT(NTPAD) - RPHI -1.0)*TPDSEP(ISTYP)
        IF (NHALF.EQ.1) THEN
          CALL TCSHF1(DEL,DELO,IER)
        ELSE
          CALL TCSHFT(DEL,DELO,IER)
        ENDIF
        RFUDG = RPHI + (DEL - DELO)/TPDSEP(ISTYP)
        IF (IER.NE.0) THEN
          IERY = 800
          GOTO 999
        ENDIF
      ENDIF
C
  999 CONTINUE
      RETURN
      END
#endif
@
