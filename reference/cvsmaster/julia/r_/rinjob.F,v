head	1.10;
access;
symbols
	jul313_3:1.10
	jul313_2:1.9
	jul313_1:1.9
	jul313:1.9
	jul312_1:1.9
	jul312:1.9
	jul311:1.9
	jul310_1:1.4
	jul310:1.4
	jul309_1:1.4
	jul309:1.4
	jul308_6:1.4
	jul308_5:1.4
	jul308_4:1.4
	jul308_3:1.4
	jul308_2:1.4
	jul308_1:1.4
	jul308:1.4
	jul307_4:1.4
	jul307_3:1.4
	jul307_2:1.4
	jul307_1:1.4
	jul307:1.4
	jul306_3:1.4
	jul306_2:1.4
	jul306_1:1.4
	jul306:1.4
	jul305_4:1.4
	jul305_3:1.4
	jul305_2:1.4
	jul305_1:1.4
	jul305:1.4
	jul304_3:1.4
	jul304_2:1.4
	jul304_1:1.4
	jul304:1.4
	jul303_7:1.4
	jul303_6:1.4
	jul303_5:1.4
	jul303_4:1.4
	jul303_3:1.4
	jul303_2_mc1:1.4
	jul303_2:1.4
	jul303_1_mc1:1.4
	jul303_1:1.4
	jul303_v:1.4
	jul303:1.4
	jul302_6:1.4
	jul302_5:1.4
	jul302_4:1.4
	jul302_3:1.4
	jul302_2:1.4
	jul302_1:1.4
	jul302:1.4
	jul285_1:1.4
	jul285:1.4
	jul284_1:1.4
	jul284:1.4
	jul283_1:1.4
	jul283:1.4
	jul282_1:1.4
	jul282:1.4
	jul281_3:1.3
	jul281_2:1.3
	jul281_1:1.3
	jul281:1.3
	jul280_1:1.3
	jul280:1.3
	jul279:1.2
	v300:1.1.1.1
	flr:1.1.1;
locks; strict;
comment	@c @;


1.10
date	2001.06.19.08.09.57;	author cattanem;	state Exp;
branches;
next	1.9;

1.9
date	2000.01.14.10.11.59;	author cattanem;	state Exp;
branches;
next	1.8;

1.8
date	99.12.09.14.57.01;	author cattanem;	state Exp;
branches;
next	1.7;

1.7
date	99.12.09.14.24.52;	author cattanem;	state Exp;
branches;
next	1.6;

1.6
date	99.12.09.11.41.28;	author cattanem;	state Exp;
branches;
next	1.5;

1.5
date	99.12.08.10.28.43;	author flr;	state Exp;
branches;
next	1.4;

1.4
date	96.07.19.07.34.30;	author cattanem;	state Exp;
branches;
next	1.3;

1.3
date	96.03.12.15.32.15;	author flr;	state Exp;
branches;
next	1.2;

1.2
date	95.11.29.17.18.57;	author flr;	state Exp;
branches;
next	1.1;

1.1
date	94.12.07.14.19.18;	author aljul;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	94.12.07.14.19.19;	author aljul;	state Exp;
branches;
next	;


desc
@@


1.10
log
@jul313.3
@
text
@      SUBROUTINE RINJOB(ISJOB)
C----------------------------------------------------------------------
C!  - Initialise the job
C!
C!  Author       J. Bunn
C!
C!  Modified     S. Orteu      25-FEB-1987
C!   Modified :- E. Lancon             17-MAY-1993
C!        ADD RLEP to SUMLIS
C!               F. Ranjard            25-APR-1994
C!        remove XSGE, XSHI, XSSC from SUMLIS
C!               F.Ranjard             16-MAY-1994
C!        remove JTDX from SUMLIS
C!        add JHDX to SUMLIS
C!  Modified     I. Tomalin            15-AUG-1995
C!        add TVVD,TLAS,TDPV to SUMLIS
C!  Modified     P. Comas
C!        change LOUTRL to IW(6) instead of 6
C!  Modified     M. Cattaneo           20-JUN-1996
C!        add BLQP to SUMLIS
C!  Modified     F. Ranjard            08-DEC-1999
C!        exit if linked with non y2k compliant Alephlib or ADBS
C!  Modified     B.Bloch                  May 2001
C!        call ADBCHK to check against DB official production version  
C!
C!  Output
C!        ISJOB = Status
C!              = 0 O.K.
C!              = 1 No runs or tapes specified
C!              = 2 Error in processing flags
C!
C?
C!======================================================================
#ifndef DOC
#include "rconds.h"
#include "rparac.h"
#include "rflags.h"
#include "rlunit.h"
#include "rtimes.h"
#include "rblank.h"
#include "rcurnt.h"
#include "rjulver.h"
#include "bcs.h"
C--------------------------------------------------------------------
C
      ISJOB = 0
      LOUTRL = IW(6)
      LDEBRL =  LOUTRL
C
C?   Number events processed
C?   Current Run and Evt Number
C
      ISQNRC = 0
      IRUNRC = 0
      IEVTRC = 0
C
C?   Run Initialised???
C
      INIRUC = .FALSE.
C
C?   Print title
C
      CALL RTITLE(LOUTRL)
C
C?   Initialise and zero the statistics arrays. Set default values
C
      CALL RZEJOB
C
C?   Input unit and MONI file unit
C
      LINPRL = JULINP
      LMONRL = JULMON
C
C?   Sumr file output unit and list of bank written
C
      LSUMRL = 55
      SUMLIS =
     &'RUNRALPBLEHILUMILBAKLVHIJSUMSLUMRLEPJEDSJPASJTREJHDXJCON'//
     &'TVVDTLASTDPVBLQP'
C
C?   PASS0 file output unit
C
      LPAS0L = 65
      PASLIS = 'JPASTDPVVHOT'
C
C?   Read in command cards
C
      CALL RDCARD (IER)
      IF ( IER.NE.0 ) GOTO 901
C
C?   Open data base
C
      CALL AOPDBS(' ',LEX)
      IF (LEX.NE.0) THEN
        WRITE(LOUTRL,'(A)') '0Data base not found'
        GOTO 900
      ENDIF
      CALL ADBVER(IVERS,IDATE)
      call adbchk(ivers)   ! check on version number for official prod
C +y2k
      IF (IVERS.LT.300) THEN
        WRITE(LOUTRL,*) '0Data base ',IVERS,' is not Y2K compliant'
     &                 ,' - please use DB>=300'
        GOTO 900
      ENDIF
C
C    Get Alephlib version number
C 
      CALL ALVERS(RVERS)
      IF (RVERS.LT.314.) THEN
         WRITE(LOUTRL,*) '0Alephlib ',IVERS,' is not Y2K compliant'
     &                  ,' - please link with Alephlib>=314'
         GOTO 900
      ENDIF
C -y2k
C
      LRCONS =  JUNIDB(0)
      LRGEOM =  LRCONS
C
C?   Set detectors
C
      CALL RDETEC
C
C?   Initialise the HBOOK system
C
      CALL HLIMIT(LHBOO)
C
C book the histograms
C
      CALL RBKHIS
C
C Initialise the job for each subdetector
C
      IF (FDETRF(JULVD)) CALL VINIJO
      IF (FDETRF(JULIT)) CALL IINIJO
      IF (FDETRF(JULTP)) CALL TINIJO
      IF (FDETRF(JULEC)) CALL EINIJO
      IF (FDETRF(JULCA)) CALL CINIJO
      IF (FDETRF(JULLC)) CALL LINIJO
      IF (FDETRF(JULSA)) CALL SINIJO
      IF (FDETRF(JULSI)) CALL SIINIJO
      IF (FDETRF(JULHC)) CALL HINIJO
      IF (FDETRF(JULMU)) CALL MINIJO
      IF (FDETRF(JULBC)) CALL BINIJO
      IF (FDETRF(JULBO)) CALL OINIJO
      IF (FDETRF(JULYR).OR.FDETRF(JULYT)) CALL YINIJO
      IF (FDETRF(JULEF)) CALL EFIJOB
      IF (FDETRF(JULFA)) CALL RFALIJ
C
C Do the user's job initialisation
C
      CALL USIJOB
C
      GOTO 999
C--------------------------------------------------------------------
  900 WRITE(LOUTRL,'(A)') ' RINJOB --> Error in selected options'
      ISJOB = 1
      GOTO 999
C
  901 WRITE(LOUTRL,'(A)') ' RINJOB --> Error in I/O Definition'
      ISJOB = 2
      GOTO 999
C
  999 CONTINUE
      END
#endif
@


1.9
log
@Bug fix on version checking
@
text
@d23 2
d99 1
@


1.8
log
@Fix typo in rinjob
@
text
@d106 2
a107 2
      CALL ALVERS(IVERS)
      IF (IVERS.LT.314) THEN
@


1.7
log
@Fix typo in rinjob
@
text
@d96 1
a96 2
      JADBS = IW(NAMIND('ADBS'))
      IDBVER = IW(JADBS+LMHLEN+1)
d98 2
a99 2
      IF (IDBVER.LT.300) THEN
        WRITE(LOUTRL,*) '0Data base ',IDBVER,' is not Y2K compliant'
a102 1
C -y2k
d106 1
a106 2
      CALL ADBVER(IVERS,IDATE)
C +y2k
@


1.6
log
@Julia 311, including y2k fixes
@
text
@d97 1
a97 1
      IDBVER = IW(JADBS+MHLEN+1)
@


1.5
log
@julia 311 - Y2K compliant
@
text
@d21 2
d98 1
d104 1
d109 1
d115 1
@


1.4
log
@Mods to l_, o_, r_ for julia 282
@
text
@d94 10
d105 6
@


1.3
log
@import jul280 from historian
Modified Files:
	aamain.F aboldr.F ajmmcl.F almmcl.F altime.F aulpol.F
	bccrun.F bcpack.F binijo.F biniru.F bmsum.F bpreda.F bprsum.F
	bslowc.F
	cabook.F calrec.F calrel.F calrep.F calsup.F cashet.F casmp.F
	casneu.F casnmp.F cclorl.F cctrmi.F ccutpe.F cdang.F cdths.F
 	cegclu.F cencch.F cencne.F cesclu.F cexcob.F cexhis.F cfpass.F
 	cfpmip.F cfpnmp.F cgrunc.F chclu.F chgclu.F chsclu.F cinijo.F
 	cinirl.F cinpar.F cinsrl.F cisgam.F cishit.F cludis.F cmoni.F
 	cnighb.F coslst.F cpadwr.F cparad.F cpotcr.F cpoteh.F cpotlc.F
 	cptcom.F crcalo.F crchrl.F crcjob.F crcpar.F crhclu.F cthclu.F
 	ctkchg.F ctrmip.F ctrpar.F ctrtoc.F cvrify.F
 	e1bpei.F e2bpei.F e3bpei.F e4bary.F e4cosz.F e4dead.F e4deij.F
 	e4fdij.F e4fide.F e4find.F e4fnec.F e4frac.F e4gtbr.F e4gtpl.F
 	e4gtso.F e4gtst.F e4gttw.F e4indi.F e4lea1.F e4ovrl.F e4pal.F
 	e4r1r2.F e4r2r3.F e4r3r4.F e4radc.F e4res2.F e4res3.F e4tstl.F
 	e4xyz0.F eautop.F ebegid.F eboxki.F ecalig.F ecblda.F ecboba.F
	ecbook.F eccaob.F ecchkb.F ecclco.F ecclus.F ecdamp.F ecdebg.F
 	ecdete.F ecdigi.F ecener.F eceras.F ecfclu.F ecfils.F ecfmip.F
 	ecfobj.F ecgflw.F ecgmix.F echarg.F echcgl.F echedc.F echiba.F
 	echist.F echtag.F ecinit.F ecinrv.F eclamp.F eclana.F ecleib.F
 	eclgeo.F eclope.F eclorl.F eclost.F ecltag.F ecltrk.F ecltyp.F
 	ecluar.F ecmesp.F ecmod.F ecmopl.F ecncob.F ecobnk.F ecoent.F
 	ecoidp.F ecos.F ecpasr.F ecplm.F ecprin.F ecprlo.F ecrcob.F
 	ecre4d.F ecreib.F ecrmip.F ecrndx.F ecrpei.F ecrtr.F ecrunq.F
 	ecscmd.F ecst.F ecsupp.F ecsw1093.F ecsw94.F ectemp.F ecthre.F
 	ectopo.F ectpc.F ectrap.F ectrea.F ecxmod.F edisal.F edlist.F
 	efaxe.F efbook.F eferrr.F eficlp.F eficv.F efiecp.F efieib.F
 	efijob.F efix.F efixi94.F eflcst.F efolmk.F efpard.F eftiel.F
 	egacst.F egaest.F egetds.F egfcst.F egttks.F ehcflo.F ehlix.F
 	ehreg.F eidedx.F eident.F eieffl.F einhlx.F einijo.F einirl.F
 	einiru.F einitk.F einsrl.F eipard.F eithr.F eknewb.F eknewe.F
 	elecid.F elongi.F emfill.F emskei.F emskev.F emskf.F emski.F
 	emskji.F emskmu.F enfmsk.F enighb.F enoise.F enprox.F enstat.F
 	epadcl.F epatrn.F epcalo.F epchg.F epneu.F epreda.F eproba.F
 	eprsto.F eprsum.F eprtpc.F ereset.F eroad.F escdef.F escoun.F
 	esfil.F eslas.F eslct.F eslctf.F eslowc.F estag.F esveto.F
 	eswpst.F etdifp.F ethres.F etrdev.F ewdifp.F ewircl.F ex3ijk.F
 	fawian.F ffield.F fidhea.F fidrot.F finiru.F fitall.F fitwri.F
 	fkink.F fkkpar.F floweh.F flowfi.F flowtr.F fmuid.F fpiden.F
 	frefit.F ftpcer.F ftrack.F
 	gambnk.F gapeco.F gasteer.F
 	hcalib.F hcalrd.F hcatow.F hcbhis.F hcfclu.F hchist.F hclcra.F
 	hcltst.F hclufi.F hcos.F hcsimm.F hdgdeb.F hdgfil.F hdgpot.F
 	hdgsum.F hdprec.F hdspre.F hflnoi.F hinijo.F hiniru.F hmener.F
 	hmfind.F hmroad.F hnoise.F hnoisy.F hpatco.F hphnoi.F hplink.F
 	hprana.F hpranp.F hprdig.F hpreda.F hprpot.F hprsum.F hprunc.F
 	hrcomp.F hrcpat.F hrdcal.F hroad.F hslink.F hslowc.F hspare.F
 	hsptre.F hstofi.F htrack.F htubfi.F htwcr.F
 	iasign.F iattma.F ibnkin.F icaswt.F icftoi.F iclimb.F icrcco.F
 	ideadw.F idigpr.F ienang.F ifind1.F ifind2.F ifitp.F iftrak.F
 	igetti.F igettp.F igicha.F iheler.F iinijo.F iiniru.F iintrk.F
 	imatch.F inigap.F insect.F intrak.F ipakdi.F ipdsti.F iphcor.F
 	ipreda.F iprsum.F ipstat.F irefin.F ireopd.F isave.F ishuff.F
 	ishufl.F islowc.F isrch.F itbook.F itccut.F itcopr.F itcrec.F
 	itcrep.F itctpc.F itctrk.F itcxng.F iterr.F itextn.F ithist.F
 	itidy1.F itidy2.F itlnk1.F itlnk2.F itpcan.F itrak.F itrecf.F
 	itreci.F itree.F itrkci.F itrkeq.F itrkzr.F itrmca.F
@
text
@d19 2
d75 1
a75 1
     &'TVVDTLASTDPV'
@


1.2
log
@julia version 279
@
text
@a0 1
*DK rinjob
d17 2
d41 1
a41 1
      LOUTRL = 6
@


1.1
log
@Initial revision
@
text
@d16 2
d71 2
a72 1
     &'RUNRALPBLEHILUMILBAKLVHIJSUMSLUMRLEPJEDSJPASJTREJHDXJCON'
@


1.1.1.1
log
@import julia 300
@
text
@@
