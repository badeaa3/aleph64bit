head	1.3;
access;
symbols
	alpha126_22:1.3
	alpha122_22:1.3
	alpha126_21:1.3
	alpha126_20:1.3
	alpha126_19:1.3
	alpha126_18:1.3
	alpha126_17:1.3
	alpha126_16:1.3
	alpha126_15:1.3
	alpha126_14:1.3
	alpha126_13:1.3
	alpha126_12:1.3
	alpha126_11:1.3
	alpha126_10:1.3
	alpha126_09:1.3
	alpha126_08:1.3
	alpha126_07:1.3
	alpha126_06:1.3
	alpha126_05:1.3
	alpha126_04:1.3
	alpha126_03:1.3
	alpha126_02:1.3
	alpha126_1:1.3
	alpha125_17:1.3
	alpha125_16:1.3
	alpha125_15:1.3
	alpha125_14:1.3
	alpha125_13:1.3
	alpha125_12:1.3
	alpha125_11:1.3
	alpha125_10:1.3
	alpha125_09:1.3
	alpha125_08:1.3
	alpha125_07:1.3
	alpha125_06:1.3
	alpha125_05:1.3
	alpha125_04:1.3
	alpha125_03:1.3
	alpha125_02:1.3
	alpha125_01:1.3
	alpha124_19:1.3
	alpha125:1.3
	alpha124_18:1.3
	alpha124_17:1.3
	alpha124_16:1.3
	alpha124_15:1.3
	alpha124_14:1.3
	alpha124_13:1.3
	alpha124_12:1.3
	alpha124_11:1.3
	alpha124_10:1.3
	alpha124_09:1.3
	alpha124_08:1.3
	alpha124_07:1.3
	alpha124_7:1.3
	alpha124_06:1.3
	alpha124_05:1.3
	alpha124_04:1.3
	alpha124_03:1.3
	alpha124_02:1.2
	alpha124_01:1.2
	alpha124:1.2
	alpha123_12:1.2
	alpha123_11:1.2
	alpha123_10:1.2
	alpha123_9:1.2
	alpha123_8:1.2
	alpha123_7:1.2
	alpha123_6:1.2
	alpha123_5:1.2
	alpha123_4:1.2
	alpha123_3:1.2
	alpha123_2:1.2
	alpha123:1.1
	alpha122_48:1.1;
locks; strict;
comment	@c @;


1.3
date	99.04.15.06.20.43;	author boucrot;	state Exp;
branches;
next	1.2;

1.2
date	98.10.20.07.37.34;	author boucrot;	state Exp;
branches;
next	1.1;

1.1
date	98.07.17.09.50.16;	author boucrot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@*** empty log message ***
@
text
@      SUBROUTINE QTRESC
CKEY FILL /INTERNAL
C-----------------------------------------------------------------------
C! Apply TPCORR to all charged tracks
C! called from QFILL 
C!                                                   F.Ligabue  16.07.98
C  modified I. Tomalin  19.10.98
C-----------------------------------------------------------------------
#ifndef DOC
#include "qdecl.h"
#include "qcde.h"
      COMMON / QTRESCI / ITRESC
      LOGICAL ASCALE
      PARAMETER (ASCALE=.TRUE.)
      REAL PSCALE
#include "qmacro.h"
C-----------------------------------------------------------------------
      NVDET = 0
C read user-provided NVDET
C
      IPCOR = NLINK('PCOR',0)
      IF(IPCOR.LE.0) RETURN
      NVD = 0
      IF (IW(IPCOR).EQ.1) NVD = IW(IPCOR+1)
      NVDET = MAX(NVD,0)
C
      IF (ITRESC.EQ.1) THEN
C Rescale charged tracks:
        DO ITK = KFCHT,KLCHT
          PSCALE = QPCORR(ITK,ASCALE,NVDET,ERCORR)
        ENDDO
C rescale DCT section as well
        DO ITK = KFDCT,KLDCT
          PSCALE = QPCORR(ITK,ASCALE,NVDET,ERCORR)
        ENDDO

      ELSE IF (ITRESC.EQ.2.AND.XMINI) THEN
C Rescale EFLOW objects which are charged tracks (MINI input only):
        DO ITK = KFEFT,KLEFT
          IF (KEFOTY(ITK).LE.3) PSCALE = QPCORR(ITK,ASCALE,NVDET,ERCORR)
        ENDDO 
      END IF
      END
#endif
@


1.2
log
@*** empty log message ***
@
text
@d15 1
d30 1
a30 1
          CALL QPCORR(ITK,ASCALE,NVDET,ERCORR)
d34 1
a34 1
          CALL QPCORR(ITK,ASCALE,NVDET,ERCORR)
d40 1
a40 1
          IF (KEFOTY(ITK).LE.3) CALL QPCORR(ITK,ASCALE,NVDET,ERCORR)
@


1.1
log
@*** empty log message ***
@
text
@d4 1
a4 1
C! Apply TPCORR to all tracks
d7 1
d12 1
d14 1
d17 1
a17 2
       ASCALE = .TRUE.
       NVDET = 0
d20 9
a28 6
       IPCOR = NLINK('PCOR',0)
       IF(IPCOR.LE.0) RETURN
       NVD = IW(IPCOR+1)
       IF (NVD.LT.0) NVD = 0 
       NVDET = MIN(NVD,1)
       DO ITK = KFCHT,KLCHT
d30 1
a30 1
       ENDDO
d32 1
a32 1
       DO ITK = KFDCT,KLDCT
d34 8
a41 1
       ENDDO
@
