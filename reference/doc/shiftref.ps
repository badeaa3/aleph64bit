%!PS-Adobe-2.0
%%Creator: dvips 5.516 Copyright 1986, 1993 Radical Eye Software
%%Title: shiftref.dvi
%%CreationDate: Tue Nov 15 15:55:56 1994
%%Pages: 64
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%DocumentFonts: Times-Bold Times-Roman Times-Italic Courier
%%+ Times-BoldItalic
%%EndComments
%DVIPSCommandLine: dvips -o shiftref.ps shiftref.dvi
%DVIPSSource:  TeX output 1994.10.21:1442
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR matrix currentmatrix dup dup 4 get round 4 exch put dup dup 5 get
round 5 exch put setmatrix}N /@landscape{/isls true N}B /@manualfeed{
statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0
0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn
begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N string /base X
array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N end dup{/foo
setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{/sf 1 N /fntrx
FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]N df-tail}B /E{
pop nn dup definefont setfont}B /ch-width{ch-data dup length 5 sub get}
B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B
/ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp
0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2
index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
ch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice
ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]{
ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}if nn
/base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup length 1
sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{cc 1 add D
}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin 0 0
moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
false RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
B /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale false def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 39158280 55380996 1000 300 300
(/home/c3/gordon/latex/shiftref.dvi) @start /Fa 2 94
df<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0FEFE072D7CA10D>91 D<FEFE060606060606060606060606060606
0606060606060606060606060606060606060606060606060606FEFE072D7FA10D>93
D E /Fb 133[22 22 1[22 22 22 22 22 22 22 22 22 22 22
22 2[22 22 22 22 22 22 22 22 22 6[22 5[22 22 22 1[22
8[22 3[22 1[22 3[22 2[22 22 22 22 22 22 22 22 22 22 22
22 22 22 22 2[22 22 40[{}49 37.500000 /Courier rf /Fc
135[23 120[{}1 45.624989 /Times-BoldItalic rf /Fd 130[25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
1[25 25 25 25 25 25 25 25 25 25 25 4[25 25 25 25 25 25
25 25 25 1[25 25 25 25 25 25 1[25 25 25 25 25 25 25 25
25 2[25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 1[25 1[25 35[{}80 41.666668 /Courier
rf /Fe 2 107 df<03C00FF01FF83FFC7FFE7FFEFFFFFFFFFFFFFFFFFFFFFFFF7FFE7FFE
3FFC1FF80FF003C010127D9317>15 D<C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0022D7BA10D>106
D E /Ff 166[33 33 43 33 33 28 25 30 33 25 33 33 40 28
33 1[15 33 33 25 28 33 30 30 33 7[23 23 23 23 23 23 23
23 23 23 13 11 15 11 44[{.167 SlantFont}38 45.624989
/Times-Roman rf /Fg 171[22 20 24 1[20 26 26 4[12 2[20
22 1[24 67[{}10 36.499977 /Times-Roman rf /Fh 130[27
27 27 27 27 27 27 27 27 27 27 27 27 27 27 27 27 27 27
1[27 27 27 27 27 27 27 27 27 1[27 2[27 1[27 27 27 27
27 27 27 27 27 1[27 27 27 27 27 27 27 27 27 27 27 27
27 27 27 27 2[27 27 27 27 27 27 27 27 27 27 27 27 27
27 27 27 27 27 27 1[27 27 27 27 2[27 27 27 34[{}81 45.624989
/Courier rf /Fi 81[33 51[27 30 30 43 30 33 20 23 27 33
33 30 33 50 17 33 1[17 33 30 20 27 33 27 33 30 7[43 1[60
1[43 40 33 43 47 37 47 43 56 40 2[23 47 47 37 40 43 43
1[43 7[30 30 30 30 30 30 30 30 30 30 17 15 20 15 44[{}60
59.999973 /Times-Bold rf /Fj 80[23 23 51[18 20 20 30
20 23 13 18 18 1[23 23 23 33 13 20 1[13 23 23 13 20 23
20 23 23 6[25 25 28 1[28 33 25 23 28 1[28 33 30 38 25
30 1[15 33 33 28 28 33 30 28 28 42 5[15 6[23 23 23 23
13 11 15 11 44[{}59 45.624989 /Times-Italic rf /Fk 14
122 df<78FCFCFCFC7806067D850D>58 D<000001C00000078000001E00000078000001
E00000078000000E0000003C000000F0000003C000000F0000003C000000F0000000F000
00003C0000000F00000003C0000000F00000003C0000000E0000000780000001E0000000
780000001E0000000780000001C01A1A7C9723>60 D<E0000000780000001E0000000780
000001E0000000780000001C0000000F00000003C0000000F00000003C0000000F000000
03C0000003C000000F0000003C000000F0000003C000000F0000001C00000078000001E0
0000078000001E00000078000000E00000001A1A7C9723>62 D<007C01FE078F0F1F1E1F
1C1E3C0C780078007800F000F000F000F000F00070027007381E1FF80FE010147E9314>
99 D<007C01FE07870E031E033C033C06781C7FF87FC0F000F000F000F0007000700270
07381E1FF807E010147E9315>101 D<0000F00003FC00073C00077C000F7C000F38000F
00001E00001E00001E00001E00001E0003FFF007FFF0003C00003C00003C000078000078
0000780000780000780000F80000F00000F00000F00000F00000F00001E00001E00001E0
0001E00001C00003C00003C000738000FB8000FF0000F70000FE000078000016297D9F16
>I<00F0000FF0000FE00001E00001E00001E00003C00003C00003C00003C00007800007
8000079F8007BFC00FE1E00FC0E00F80F00F00F01E01E01E01E01E01E01E01E03C03C03C
03C03C03C03C078678078C780F0C780F18780738F007F06001C017207E9F1A>104
D<007000F800F800F000E000000000000000000000000007001FC039C031E061E063C0C3
C00780078007800F000F000F001E181E303C303C601CE01FC007000D1F7F9E10>I<01E0
1FE01FC003C003C003C007800780078007800F000F000F000F001E001E001E001E003C00
3C003C003C007800780078007980F300F300F300F3007E001C000B207E9F0E>108
D<00F0C003FBC0070F800E0F801C07803C07803C0F00780F00780F00780F00F01E00F01E
00F01E00F01E00F03C00F03C00707C0070FC003FF8000F780000780000780000F00000F0
0000F00000F00001E0001FFE001FFE00121D7E9314>113 D<0E0F003FBF8033F18063E3
C063C7C063C7C0C787800787000780000780000F00000F00000F00000F00001E00001E00
001E00001E00003C000018000012147F9315>I<007C01FE0387070F070F070E0F000FF0
07FC07FE03FE00FF001F780FF80EF80EF01C70383FF01FC010147E9315>I<00C001E003
C003C003C003C007800780FFF8FFF80F000F000F000F001E001E001E001E003C003C003C
003C1878307830786078C03F800F000D1C7F9B10>I<0700301FC07839C0F031E0F061E0
F063C0F0C3C1E00781E00781E00781E00F03C00F03C00F03C00F03C00F07800F07800F07
800F1F8007FF0001EF00000F00000F00381E007C1C007C3C0078780070F0003FE0001F80
00151D7F9316>121 D E /Fl 78[23 1[25 25 49[10 1[20 23
23 33 23 25 15 18 20 25 25 23 25 38 13 25 15 13 25 23
15 20 25 20 25 23 3[15 1[15 30 33 33 45 33 33 30 25 33
35 28 35 33 43 30 35 1[18 35 35 28 30 33 33 30 33 1[23
1[26 1[15 15 23 23 23 23 23 23 23 23 23 23 13 11 15 11
26 23 15 15 15 3[23 25 34[{}82 45.624989 /Times-Bold
rf /Fm 139[34 40 3[52 57 8[46 33[75 67[{}6 103.666679
/Times-Bold rf /Fn 80[25 25 3[20 45[9 1[20 23 23 33 23
23 13 18 15 23 23 23 23 35 13 23 13 13 23 23 15 20 23
20 23 20 3[15 1[15 28 33 33 43 33 33 28 25 30 33 25 33
33 40 28 33 18 15 33 33 25 28 33 30 30 33 42 2[26 1[13
13 23 23 23 23 23 23 23 23 23 23 13 11 15 11 26 23 15
15 15 1[38 2[19 34[{}83 45.624989 /Times-Roman rf /Fo
133[22 2[36 25 1[14 1[17 3[25 1[14 2[14 3[22 25 2[22
13[28 33 3[36 6[36 1[30 1[33 22[12 44[{}18 50.000000
/Times-Roman rf /Fp 134[43 43 62 1[48 29 33 38 1[48 43
48 72 24 48 1[24 48 43 29 38 48 38 48 43 11[62 57 48
62 1[53 67 1[81 3[33 67 67 53 1[62 62 1[62 8[43 43 43
43 43 43 43 43 1[24 1[29 45[{}46 86.416687 /Times-Bold
rf /Fq 61[17 19[28 51[22 25 25 36 25 28 17 19 22 28 28
25 28 41 14 28 1[14 28 25 17 22 28 22 28 25 7[36 1[50
36 36 33 28 36 39 30 39 2[33 1[25 19 39 39 30 33 1[36
33 36 6[17 25 25 25 25 25 25 25 25 25 2[12 17 12 44[{}60
50.000000 /Times-Bold rf /Fr 4 40 df<7FE0000000000000000000FFFFC0000000
0000000000FFFFFC00000000000000007FFFFFC000000000000000003FFFF80000000000
000000007FFF00000000000000000007FFC00000000000000000007FF800000000000000
00000FFE00000000000000000001FF800000000000000000007FE0000000000000000000
0FF000000000000000000003FC00000000000000000000FE000000000000000000003F80
0000000000000000001FC000000000000000000007F000000000000000000003F8000000
00000000000000FC000000000000000000007F000000000000000000001F800000000000
000000000FC000000000000000000007E000000000000000000001F00000000000000000
0000F8000000000000000000007C000000000000000000003E000000000000000000001F
000000000000000000000F8000000000000000000007C000000000000000000003E00000
0000000000000001F000000000000000000000F000000000000000000000F80000000000
00000000007C000000000000000000003E000000000000000000001E0000000000000000
00001F000000000000000000000F80000000000000000000078000000000000000000007
C000000000000000000003E000000000000000000001E000000000000000000001F00000
0000000000000000F80000000000000000000078000000000000000000007C0000000000
00000000003C000000000000000000003E000000000000000000001E0000000000000000
00001F000000000000000000000F000000000000000000000F000000000000000000000F
80000000000000000000078000000000000000000007C000000000000000000003C00000
0000000000000003C000000000000000000003E000000000000000000001E00000000000
0000000001E000000000000000000001F000000000000000000000F00000000000000000
0000F000000000000000000000F000000000000000000000F80000000000000000000078
00000000000000000000780000000000000000000078000000000000000000007C000000
000000000000003C000000000000000000003C000000000000000000003C000000000000
000000003C000000000000000000003C000000000000000000003C000000000000000000
003E000000000000000000001E000000000000000000001E000000000000000000001E00
0000000000000000001E000000000000000000001E000000000000000000001E00000000
0000000000001E000000000000000000001E000000000000000000001E00000000000000
0000000C5757D383A6>36 D<000000000000000000000C000000000000000000001E0000
00000000000000001E000000000000000000001E000000000000000000001E0000000000
00000000001E000000000000000000001E000000000000000000001E0000000000000000
00001E000000000000000000001E000000000000000000003E000000000000000000003C
000000000000000000003C000000000000000000003C000000000000000000003C000000
000000000000003C000000000000000000003C000000000000000000007C000000000000
000000007800000000000000000000780000000000000000000078000000000000000000
00F800000000000000000000F000000000000000000000F000000000000000000000F000
000000000000000001F000000000000000000001E000000000000000000001E000000000
000000000003E000000000000000000003C000000000000000000003C000000000000000
000007C000000000000000000007800000000000000000000F800000000000000000000F
000000000000000000000F000000000000000000001F000000000000000000001E000000
000000000000003E000000000000000000003C000000000000000000007C000000000000
000000007800000000000000000000F800000000000000000001F0000000000000000000
01E000000000000000000003E000000000000000000007C0000000000000000000078000
00000000000000000F800000000000000000001F000000000000000000001E0000000000
00000000003E000000000000000000007C00000000000000000000F80000000000000000
0000F000000000000000000001F000000000000000000003E000000000000000000007C0
0000000000000000000F800000000000000000001F000000000000000000003E00000000
0000000000007C00000000000000000000F800000000000000000001F000000000000000
000007E00000000000000000000FC00000000000000000001F800000000000000000007F
00000000000000000000FC00000000000000000003F800000000000000000007F0000000
0000000000001FC00000000000000000003F80000000000000000000FE00000000000000
000003FC0000000000000000000FF00000000000000000007FE0000000000000000001FF
8000000000000000000FFE0000000000000000007FF8000000000000000007FFC0000000
00000000007FFF00000000000000003FFFF8000000000000007FFFFFC000000000000000
FFFFFC0000000000000000FFFFC000000000000000007FE00000000000000000005757D3
D6A6>I<6000000000000000000000F000000000000000000000F0000000000000000000
00F000000000000000000000F000000000000000000000F000000000000000000000F000
000000000000000000F000000000000000000000F000000000000000000000F000000000
000000000000F80000000000000000000078000000000000000000007800000000000000
000000780000000000000000000078000000000000000000007800000000000000000000
78000000000000000000007C000000000000000000003C000000000000000000003C0000
00000000000000003C000000000000000000003E000000000000000000001E0000000000
00000000001E000000000000000000001E000000000000000000001F0000000000000000
00000F000000000000000000000F000000000000000000000F8000000000000000000007
80000000000000000000078000000000000000000007C000000000000000000003C00000
0000000000000003E000000000000000000001E000000000000000000001E00000000000
0000000001F000000000000000000000F000000000000000000000F80000000000000000
000078000000000000000000007C000000000000000000003C000000000000000000003E
000000000000000000001F000000000000000000000F000000000000000000000F800000
0000000000000007C000000000000000000003C000000000000000000003E00000000000
0000000001F000000000000000000000F000000000000000000000F80000000000000000
00007C000000000000000000003E000000000000000000001E000000000000000000001F
000000000000000000000F8000000000000000000007C000000000000000000003E00000
0000000000000001F000000000000000000000F8000000000000000000007C0000000000
00000000003E000000000000000000001F000000000000000000000FC000000000000000
000007E000000000000000000003F000000000000000000001FC00000000000000000000
7E000000000000000000003F800000000000000000001FC000000000000000000007F000
000000000000000003F800000000000000000000FE000000000000000000007F80000000
0000000000001FE00000000000000000000FFC00000000000000000003FF000000000000
00000000FFE00000000000000000003FFC00000000000000000007FFC000000000000000
0001FFFC0000000000000000003FFFF8000000000000000007FFFFFC0000000000000000
7FFFFE000000000000000007FFFE0000000000000000000FFC575780D6A6>I<00000000
00000000000FFC000000000000000007FFFE00000000000000007FFFFE00000000000000
07FFFFFC000000000000003FFFF80000000000000001FFFC000000000000000007FFC000
000000000000003FFC000000000000000000FFE0000000000000000003FF000000000000
0000000FFC0000000000000000001FE00000000000000000007F80000000000000000000
FE00000000000000000003F800000000000000000007F00000000000000000001FC00000
000000000000003F800000000000000000007E00000000000000000001FC000000000000
00000003F000000000000000000007E00000000000000000000FC0000000000000000000
1F000000000000000000003E000000000000000000007C00000000000000000000F80000
0000000000000001F000000000000000000003E000000000000000000007C00000000000
000000000F800000000000000000001F000000000000000000001E000000000000000000
003E000000000000000000007C00000000000000000000F800000000000000000000F000
000000000000000001F000000000000000000003E000000000000000000003C000000000
000000000007C00000000000000000000F800000000000000000000F0000000000000000
00001F000000000000000000003E000000000000000000003C000000000000000000007C
000000000000000000007800000000000000000000F800000000000000000000F0000000
00000000000001F000000000000000000001E000000000000000000001E0000000000000
00000003E000000000000000000003C000000000000000000007C0000000000000000000
078000000000000000000007800000000000000000000F800000000000000000000F0000
00000000000000000F000000000000000000001F000000000000000000001E0000000000
00000000001E000000000000000000001E000000000000000000003E0000000000000000
00003C000000000000000000003C000000000000000000003C000000000000000000007C
000000000000000000007800000000000000000000780000000000000000000078000000
000000000000007800000000000000000000780000000000000000000078000000000000
00000000F800000000000000000000F000000000000000000000F0000000000000000000
00F000000000000000000000F000000000000000000000F000000000000000000000F000
000000000000000000F000000000000000000000F000000000000000000000F000000000
000000000000600000000000000000000057578083A6>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin
%%PaperSize: a4

%%EndSetup
%%Page: 0 1
0 0 bop -172 -165 a Fr(')p -172 2892 4 2976 v -172 2976
a(&)2072 -165 y($)p 2072 2892 V 2072 2976 a(\045)p -87
2976 2079 4 v -87 -165 V -65 192 a @beginspecial 0 @llx
0 @lly 43 @urx 43 @ury 850 @rwi @setspecial
%%BeginDocument: /usr/local/lib/tex/ps/cern15.eps
%!PS CERNLOGO
%%BoundingBox: 0 0 43 43
/logocrn {
gsave
.18243 dup scale
.275 sub 153.85 mul exch .177 sub 153.85 mul exch
translate scale
3.5 setlinewidth
20 20 moveto  0 155 rlineto 155 0 rlineto
0 -155 rlineto -155 0 rlineto
closepath clip stroke
2.5 setlinewidth
105 94 53 0 360 arc stroke
157.86 90.22 moveto 162 148 lineto stroke
4.5 setlinewidth
37.86 98.97 moveto 48 46 lineto stroke
120.36 75.54 moveto 51 0 lineto stroke
131.03 121.61 moveto 167 0 lineto stroke
85 108 48 0 360 arc stroke
85 156 moveto 175 156 lineto stroke
newpath
50 94 moveto 64 89 lineto 64 123 lineto 50 126 lineto
1 setgray  fill
0 setgray 45.5 96.5 translate .48 .48 scale
 
newpath % C
43.5 40 moveto 26 58 0 47 0 23.5 curveto
0 0 26 -11 43.5 7 curveto
41 9 lineto 25 -5.5 9 4 9 23.5 curveto
9 43 25 52.5 41 38 curveto 43.5 40 lineto
closepath fill
 
newpath % E
75 47 moveto 66 46.7 59 46.7 49 47 curveto
50 30 50 16 49 0 curveto
59 .3 66 .3 75 0 curveto 75 3.5 lineto
58.5 3.5 lineto
57.5 10 57.5 15 57.5 21.5 curveto
70 21.5 lineto 70 24.5 lineto 57.5 24.5
lineto 57.5 31 57.5 37 58 43.5 curveto
75 43.5 lineto 75 47 lineto
closepath fill
 
newpath % R
83 47 moveto 84 30 84 16 83 0 curveto 92 0
lineto 91 16 91 30 92 43 curveto 100 43 lineto
107 43 110 40 110 32.5 curveto
110 29 107 24 103 24 curveto 94 24 lineto 110 0 lineto
119.5 0 lineto 105 20 lineto
115 20 118 27 118 32 curveto
118 41 115 47.5 104.5 47 curveto
98 46.7 92 46.7 83 47 curveto
closepath fill
 
newpath  % N
160 47 moveto 159.7 30 159.7 16 160 0 curveto
154 0 lineto 130 38 lineto 130 0 lineto 126 0 lineto
126.3 16 126.3 30 126 47 curveto 135 47 lineto
156 14 lineto 156 47 lineto 160 47 lineto
closepath fill
grestore  } def
1.5 1.5 0.0 -0.3 logocrn         % x-scale y-scale x-offset y-offset
showpage
%%EndDocument
 @endspecial 825 97 a Fq(CORE)13 b(Computing)e(Services)181
1098 y Fp(A)22 b(Refer)n(ence)h(Manual)f(f)n(or)f(SHIFT)h(Softwar)n(e)
210 1333 y Fq(J)o(ean-Philippe)11 b(Baud,)h(F)o(abrizio)g(Cane,)h(F)o
(elix)f(Hassine,)h(Fr)s(\302)-20 b(ed)s(\302)g(eric)13
b(Hemmer)335 1427 y(Gordon)e(Lee,)i(Les)h(Robertson,)e(Ben)g(Segal,)h
(Antoine)e(T)l(rannoy)822 1603 y(V)-5 b(ersion)13 b(1.3)657
1696 y(Updated:)j(3rd)c(A)n(ugust)g(1994)661 2802 y Fo(CERN)i(Gene)o(v)
o(a,)e(Switzerland)p eop
%%Page: 1 2
1 1 bop 929 2958 a Fn(1)p eop
%%Page: 2 3
2 2 bop -64 379 a Fm(Contents)-64 649 y Fl(1)45 b(The)13
b(SHIFT)e(Disk)g(P)o(ool)f(Manager)1309 b(1)4 707 y Fn(1.1)48
b(DPM)12 b(nfs)p 278 707 14 2 v 16 w(pathname)45 b Fk(:)23
b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)87 b Fn(1)4 765 y(1.2)48 b(DPM)12 b(User)f(Commands)g(-)h
(sfget,)f(sfrm,)h(sfsh)j Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
87 b Fn(2)4 823 y(1.3)48 b(The)11 b(DPM)h(Daemon)f(-)h(sfdpmd)25
b Fk(:)d(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)87
b Fn(3)4 880 y(1.4)48 b(DPM)12 b(Con\256guration)e(Files)i
Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)87 b Fn(5)4 938 y(1.5)48 b(DPM)12 b(Con\256guration)e(Syntax)45
b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
87 b Fn(8)4 996 y(1.6)48 b(SHIFT)12 b(DPM)f(Options)f(Style)j
Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)65 b Fn(12)4 1054 y(1.7)48 b(The)11 b(SHIFT)h(Garbage)f(Collector)f
(-)i(sfgc)19 b Fk(:)j(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(12)-64 1158 y Fl(2)45 b(T)l(ape)12 b(Copy)f(Scheduling)1460
b(16)4 1216 y Fn(2.1)48 b(User)11 b(Commands)30 b Fk(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)
g(:)h(:)f(:)g(:)65 b Fn(16)4 1274 y(2.2)48 b(System)11
b(Commands)17 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(19)109 1331
y(2.2.1)54 b(rtcopyd)13 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(19)109 1389 y(2.2.2)54 b(cptpdsk,)11 b(cpdsktp)22
b Fk(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)65 b Fn(20)-64 1494 y Fl(3)45 b(T)l(ape)12 b(Staging)f(Softwar)o
(e)1458 b(22)4 1551 y Fn(3.1)48 b(stagein,)10 b(stageout,)h(stage)o
(wrt)f(-)h(copy)g(\256les)g(from)h(tape)f(to)f(disk)g(or)i(from)f(disk)
g(to)f(tape)i Fk(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(22)4 1609 y(3.2)48 b(stageclr)o(-)11 b(remo)o(v)o(e)h(staged)f
(\256les)29 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)g(:)65 b Fn(24)4 1667 y(3.3)48 b(stageput)10
b(-)h(copy)g(disk)f(\256les)h(to)g(tapes)h Fk(:)23 b(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(25)4 1725
y(3.4)48 b(stageqry)10 b(-)i(gi)o(v)o(e)f(the)g(status)e(of)j(all)e
(staged)h(tapes)39 b Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(26)4 1783 y(3.5)48 b(stgdaemon)10 b(-)i(start)e(the)h(stage)g
(daemon)h Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(28)-64 1887 y Fl(4)45 b(P)o(ortable)11 b(Unix)g(T)l(ape)h
(Subsystem)1300 b(31)4 1945 y Fn(4.1)48 b(dumptape)11
b(-)g(dump)g(a)h(tape)f(and)g(analyze)g(its)f(contents)k
Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(31)4 2002 y(4.2)48
b(reserv)11 b(-)h(reserv)o(e)g(tape)f(resources)31 b
Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(32)4 2060 y(4.3)48 b(rls)11 b(-)g(release)h(tape)f(resources)30
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)65 b Fn(33)4 2118 y(4.4)48 b(tmsreq)11 b(-)h(send)e(a)i(request)e
(to)h(TMS)h(through)e(the)h(tms)g(daemon)18 b Fk(:)k(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(33)4 2176 y(4.5)48 b(tmstat)10 b(-)i(gi)o(v)o(e)f(the)g(status)f
(of)h(the)g(current)g(TMS)h(MOUNT)f(commands)27 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(34)4 2234 y(4.6)48 b(tpcon\256g)10 b(-)i(con\256gure)f(tape)g
(units)f(up/do)o(wn)41 b Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
65 b Fn(34)4 2292 y(4.7)48 b(tpdaemon)11 b(-)g(start)g(the)g(tape)g
(daemon)g Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
65 b Fn(35)4 2349 y(4.8)48 b(tplabel)10 b(-)i(initialize)d(a)j(ne)o(w)e
(blank)h(tape)j Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)65 b Fn(36)4 2407 y(4.9)48 b(tpmnt)10 b(-)i(ask)f(operator)g(to)f
(mount)h(a)g(tape)h(and)f(position)d(the)j(tape)27 b
Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)65 b Fn(37)4 2465 y(4.10)25 b(tprstat)10 b(-)h(gi)o(v)o(e)g
(the)g(de)o(vice)g(group)f(reserv)o(ations)g(for)i(all)e(tape)i(users)
26 b Fk(:)d(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)65 b Fn(39)4 2523 y(4.11)25 b(tpstat)10 b(-)h(gi)o(v)o(e)g(the)g
(status)f(of)h(all)g(tape)g(units)33 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)65 b Fn(39)4 2581 y(4.12)25 b(User)11
b(Callable)g(Routines)f(to)h(Read/Write)g(T)l(ape)g(Labels)j
Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(40)-64 2685 y Fl(5)45
b(RFIO)11 b(-)h(Remote)f(File)g(I/O)g(System)1282 b(42)4
2743 y Fn(5.1)48 b(C)12 b(Interface)24 b Fk(:)f(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)65 b Fn(42)109 2800 y(5.1.1)54 b(Opening)10 b(a)i(\256le)37
b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)g(:)65 b Fn(43)109 2858 y(5.1.2)54 b(Closing)10
b(a)i(\256le)k Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(44)929 2958 y(2)p
eop
%%Page: 1 4
1 3 bop 1931 -125 a Fn(i)109 46 y(5.1.3)54 b(Reading)11
b(a)h(\256le)42 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(44)109 102 y(5.1.4)54
b(Writing)10 b(a)i(\256le)k Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(45)109
159 y(5.1.5)54 b(Flushing)10 b(the)h(data)g(stream)25
b Fk(:)e(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(46)109 215 y(5.1.6)54 b(Obtaining)10 b(File)h(Status)f
(Information)32 b Fk(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(46)109 271 y(5.1.7)54 b(Printing)10 b(error)i(messages)41
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(47)109 328 y(5.1.8)54 b(C)12 b(Bindings)e(for)h(the)g(F)o(ortran)g
(Interface)h(Routines)31 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(47)4
384 y(5.2)48 b(F)o(ortran)11 b(Interface)29 b Fk(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)
g(:)h(:)f(:)g(:)65 b Fn(49)109 441 y(5.2.1)54 b(Assign)25
b Fk(:)e(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(49)109 497 y(5.2.2)54
b(Opening)10 b(a)i(\256le)37 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(49)109
554 y(5.2.3)54 b(Reading)11 b(a)h(\256le)42 b Fk(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)65 b Fn(50)109 610 y(5.2.4)54 b(Writing)10 b(a)i(\256le)k
Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)
g(:)h(:)f(:)g(:)65 b Fn(51)109 667 y(5.2.5)54 b(Closing)10
b(a)i(\256le)k Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(51)109 723 y(5.2.6)54
b(Re)o(winding)10 b(a)i(\256le)30 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(52)-64
825 y Fl(6)45 b(Operator)13 b(Interface)1525 b(53)4 881
y Fn(6.1)48 b(Operator)11 b(Display)f(Manager)i(-)f(oper)46
b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(53)4 938 y(6.2)48 b(Reply)11 b(to)g(a)g(message)h(-)f(rep)27
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)65 b Fn(54)4 994 y(6.3)48 b(Send)11 b(an)g(informati)o(v)o(e)g
(message)g(to)g(the)g(operator)19 b Fk(:)k(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
65 b Fn(54)109 1051 y(6.3.1)54 b(msgi)11 b(command)16
b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)g(:)65 b Fn(54)109 1107 y(6.3.2)54 b(msgi)11
b(function)42 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(55)4 1164 y(6.4)48
b(Send)11 b(message)h(to)e(operator)h(and)g(wait)f(for)i(reply)26
b Fk(:)d(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(55)109 1220
y(6.4.1)54 b(msgr)12 b(command)h Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(55)109
1277 y(6.4.2)54 b(msgr)12 b(function)39 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(55)4 1333 y(6.5)48 b(Display)10 b(operator)h(messages)g(-)g(msgd)
28 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(56)4 1390 y(6.6)48 b(The)11 b(operator)g(message)g(daemon)g(-)h
(msgdaemon)k Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(56)-64 1491 y Fl(7)45 b(Account)12 b(F)o(acilities)1547
b(57)4 1548 y Fn(7.1)48 b(Account)10 b(File)27 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(57)4 1604 y(7.2)48 b(Get)11
b(Current)g(Account)g(Identi\256er)21 b Fk(:)h(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(57)4 1661 y(7.3)48
b(Change)11 b(Current)g(Account)20 b Fk(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65 b Fn(58)-64
1763 y Fl(8)45 b(General-Purpose)12 b(Routines)1381 b(59)4
1819 y Fn(8.1)48 b(Error)11 b(messages)g(and)g(codes)39
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)65 b Fn(59)4 1876 y(8.2)48 b(SYSREQ/TCP)12 b(interface)34
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)65 b Fn(59)109 1932 y(8.2.1)54 b(SYSREQ)12 b(Command)26
b Fk(:)c(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(59)109 1989 y(8.2.2)54 b(Issue)11 b(a)h(SYSREQ)f(request)17
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)65
b Fn(60)p eop
%%Page: 1 5
1 4 bop -64 407 a Fp(Chapter)22 b(1)-64 643 y(The)g(SHIFT)g(Disk)g(P)n
(ool)g(Manager)-64 916 y Fn(This)13 b(chapter)g(describes)g(the)g
(interface)g(to)g(the)g Fj(shift)f Fn(disk)g(pool)g(management)i
(system.)23 b(The)13 b(user)g(interface)g(commands)-64
972 y Fl(sfget)p Fn(,)e Fl(sfrm)p Fn(,)g Fl(sfsh)g Fn(are)g(described)f
(in)g(the)h(\256rst)f(part)h(together)e(with)h(the)g(SHIFT)h(pool)f
(manager)h(daemon.)17 b(The)10 b(subsequent)-64 1029
y(sections)g(describe)h(the)g(con\256guration)f(\256les)h(used)f(by)h
(the)g(disk)f(pool)g(manager)m(.)-64 1225 y Fi(1.1)60
b(DPM)15 b(nfs)p 302 1225 18 2 v 22 w(pathname)-64 1378
y Fn(The)c Fl(nfs)p 79 1378 14 2 v 16 w(pathname)g Fn(is)g(the)f
(system-wide)g(name)h(of)f(a)h(\256le)g(in)g(the)f Fj(shift)f
Fn(en)n(vironment.)16 b(The)10 b(name)h(is)f(normally)g(generated)-64
1435 y(by)h(the)g Fj(shift)f Fn(disk)g(pool)g(management)i(system)e(as)
h(a)h(result)e(of)i(an)f Fj(sfget)f Fn(command.)17 b(Its)10
b(format)i(is)f(as)g(follo)o(ws.)-64 1553 y Fh(/disk_servers)q(/no)q
(de/p)q(ool_)q(fil)q(e_sy)q(stem)q(/gr)q(oup/)q(user)q(/us)q(ppn)-64
1695 y Fl(disk)p 20 1695 V 16 w(servers:)195 1751 y Fn(is)h(the)g
(high-le)o(v)o(el)f(directory)h(used)g(on)g(all)g Fj(shift)f
Fn(serv)o(ers)h(to)g(hold)g(the)g(directories)f(which)h(are)h(in)f
(turn)g(used)195 1808 y(as)f Fg(NFS)h Fn(mount)f(points)e(for)j(the)f
(disk)f(pool)g(\256le)i(systems.)j(This)10 b(is)h(normally)g
Fl(/shift)p Fn(.)-64 1902 y Fl(node:)151 b Fn(is)11 b(the)g(network)f
(node)g(name)i(of)f(the)g(disk)f(serv)o(er)i(on)f(which)f(the)h(\256le)
h(resides.)-64 1975 y Fl(pool)p 23 1975 V 16 w(\256le)p
97 1975 V 16 w(system:)195 2031 y Fn(de\256nes)g(the)g(name)h(of)f(the)
g(\256le)g(system)f(on)h(a)h(disk)e(serv)o(er)h(in)g(which)f(the)h
(\256le)g(resides,)g(and)g(which)g(belongs)195 2088 y(to)f(the)h(pool)e
(to)h(which)g(the)h(\256le)f(is)g(assigned.)17 b(It)12
b(is)f(normally)g(the)g(name)h(of)g(the)f(special)g(\256le)h(in)f(/de)o
(v)g(which)195 2144 y(identi\256es)f(the)h(\256le)h(system.)-64
2238 y Fl(gr)o(oup:)129 b Fn(is)11 b(the)g(name)h(of)f(the)g
(accounting)f(group)g(of)h(the)g(o)o(wner)g(of)g(the)g(\256le.)-64
2332 y Fl(user:)161 b Fn(is)11 b(the)g(name)h(of)f(the)g(o)o(wner)g(of)
g(the)g(\256le.)-64 2405 y Fl(user)p 22 2405 V 17 w(supplied)p
203 2405 V 16 w(partial)p 351 2405 V 16 w(pathname:)195
2461 y Fn(is)g(supplied)f(by)h(the)h(user)m(.)18 b(It)11
b(may)h(include)f(one)g(or)h(more)g(directories)f(which)g(will)f(be)i
(created)g(by)f(the)g(disk)195 2518 y(pool)f(management)i(system)f(if)g
(necessary)m(.)929 2958 y(1)p eop
%%Page: 2 6
2 5 bop -64 -125 a Fn(2)994 b Ff(CHAPTER)11 b(1.)28 b(THE)11
b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)-64 46 y Fi(1.2)60
b(DPM)15 b(User)f(Commands)h(-)g(sfget,)g(sfrm,)f(sfsh)4
172 y Fe(\017)23 b Fj(N)o(AME)50 249 y Fl(sfget,)11 b(sfrm,)h(sfsh)f
Fn(-)h(Disk)e(Pool)h(Manager)h(\(DPM\))4 348 y Fe(\017)23
b Fj(SYNOPSIS)50 460 y Fl(sfget:)153 b Fn(-help)14 b([-pool)g(name])i
([-user)f(name)g(])g([-size)g(v)o(alue)f(])h([-look])f([-k)h(])g
([-table])g([-remo)o(v)o(e])h([-Linkdir)309 517 y(path])11
b([-quiet])f(\256lename)50 592 y Fl(sfrm:)153 b Fn(-help)11
b([-pool)f(name])i([-user)f(name)h(])g([-v)o(erbose])f([-Linkdir)f
(path])h(\256lename)50 668 y Fl(sfsh:)168 b Fn(-help)16
b([-pool)g(name])i([-user)f(name])h([-group)e(name])h([-cshell])g
([-rshell])f([-v)o(erbose])h([-space])h([-)309 724 y(directory])10
b(command)i(ar)o(guments)f(])4 837 y Fe(\017)23 b Fj(DESCRIPTION)50
914 y Fn(These)10 b(commands)h(pro)o(vide)e(an)i(interface)f(to)g(the)g
(shift)g(disk)f(pool)h(management)h(\(DPM\))g(system.)16
b(The)10 b(commands)50 971 y(are)g(issued)e(by)h(users)g(on)g(a)h
(shift)e(cpu)h(serv)o(er)m(.)17 b Fl(sfget)10 b Fn(creates)f(a)h
(\256le)g(in)f(a)g(disk)g(pool,)g(or)g(\256nds)g(a)h(\256le)g(which)e
(has)h(already)50 1027 y(been)j(created.)20 b Fl(sfrm)13
b Fn(deletes)e(a)i(\256le)f(from)h(a)g(disk)e(pool.)19
b Fl(sfsh)12 b Fn(issues)f(a)i(shell)e(command)i(in)f(each)g(\256le)h
(system)f(of)g(a)50 1084 y(disk)e(pool.)50 1161 y(The)j(commands)h(can)
g(be)g(e)o(x)o(ecuted)g(either)f(locally)g(\(local)g(mode\))h(or)g(on)f
(a)h(remote)h(host)d(\(remote)i(mode\).)25 b(In)14 b(the)50
1218 y(latter)9 b(case)i(the)e Fl(sfget)h Fn(and)g Fl(sfrm)g
Fn(are)h(forwarded)e(to)g(the)h(sfdpmd\(1\))g(daemon)g(while)f
Fl(sfsh)h Fn(selects)f(the)g(rshell)h(option.)50 1274
y Fl(sfget)i Fn(can)f(be)h(e)o(x)o(ecuted)g(in)f(either)h(the)f(atomic)
h(or)f(noatomic)g(mode.)18 b(When)12 b(more)g(than)f(one)h
Fl(sfget)f Fn(is)g(issued)g(at)h(the)50 1331 y(same)e(time)f(with)f
(the)h(same)h(pool)e(name,)j(the)e(same)h(user)f(name)h(and)f
(\256lename)h(and)f(the)g(associated)f(\256le)h(doesn')o(t)g(e)o(xist)
50 1387 y(and)g(without)e(the)h(look)g(option,)g(the)h(atomic)g(mode)g
(garantees)g(that)f(all)h Fl(sfget)g Fn(echo)g(the)f(same)i
(nfs-pathname.)15 b(That)9 b(is)50 1444 y(only)h(one)h(copy)f(of)h(the)
g(associated)g(\256le)g(is)g(created.)17 b(The)11 b(mode)g(is)g
(selected)f(by)h(mean)h(of)f(the)g(item)g(SFGETMODE)50
1500 y(in)g(the)f(cate)o(gory)i(DPM)g(\()f(see)g(sfsyntax)f(\).)17
b(Users)11 b(shoulf)f(be)h(a)o(ware)h(that)f(atomic)g(mode)g(is)g(much)
g(slo)o(wer)m(.)4 1599 y Fe(\017)23 b Fj(OPTIONS)50 1711
y Fl(-help:)146 b Fn(sho)o(ws)10 b(the)h(a)o(v)o(ailable)f(options)f
(and)i(a)h(brief)f(description)e(\()j(sfoptions\(1\))d(\).)50
1787 y Fl(\256lename:)80 b Fn(The)13 b(\256lename)h(parameter)g
(normally)e(speci\256es)h(a)g(user)p 1217 1787 14 2 v
16 w(supplied)p 1389 1787 V 15 w(partial)p 1521 1787
V 15 w(pathname)g(which)g(is)f(as-)309 1843 y(sociated)f(with)h(a)h
(disk)e(pool)h(and)g(a)h(user)f(name.)21 b(This)12 b(partial)f
(pathname)i(is)f(used)g(to)g(search)h(for)f(an)309 1900
y(e)o(xisting)g(copy)i(of)g(the)g(\256le)g(within)f(the)h(disk)f(pool.)
24 b(The)14 b(partial)g(pathname)g(will)f(be)h(appended)g(to)309
1956 y(a)f(shift-generated)e(path)h(to)g(form)h(an)g(nfs-pathname)f
(\(see)g(the)h(SHIFT)g(User)f(Guide)g(\).)21 b(The)12
b(partial)309 2013 y(pathname)i(may)h(include)e(directory)h(names.)26
b(If)15 b(the)f(\256le)h(is)f(created)h(the)f(directories)f(will)g
(also)h(be)309 2069 y(created)d(if)g(necessary)m(.)16
b Fl(sfget)11 b Fn(echos)f(on)g(the)h(standard)f(output)f(the)h
(nfs-pathname)g(of)h(the)f(\256le)h(unless)309 2126 y(the)i(quiet)g
(option)e(is)i(used.)23 b Fl(sfrm)14 b Fn(echos)f(the)g(nfs-pathname)g
(of)h(the)f(\256le)h(if)f(the)h(v)o(erbose)f(option)f(is)309
2182 y(used.)50 2258 y Fl(-pool)f(name:)28 b Fn(to)11
b(specify)h(the)g(shift)f(disk)g(pool)g(to)g(be)h(used.)19
b(A)12 b(default)f(pool)g(name)h(can)h(be)f(pro)o(vided)f(in)h(the)f
(shift)309 2314 y(con\256guration)f(by)g(mean)i(of)f(the)g(item)h
(DEFPOOL)e(in)h(the)g(cate)o(gory)g(DPM)h(\()g(see)f(sfsyntax\(1\))f
(\).)50 2390 y Fl(-user)i(name:)28 b Fn(to)8 b(specify)h(the)g(user)g
(name)h(to)e(be)h(used)g(when)g(searching)f(for)i(the)e(\256le)i(\(sfe)
o(gt)f(and)g(sfrm\))h(or)f(e)o(x)o(ecuting)309 2446 y(the)j(shell)f
(command)i(\(sfsh\).)19 b(The)13 b(default)e(is)h(the)g(name)g(of)h
(the)f(user)g(issuing)e(the)i(dpm)g(command.)309 2502
y(This)e(option)g(also)g(implies)g(a)i(group)e(name,)i(that)f(of)g(the)
g(user)m(.)50 2557 y Fl(-gr)o(oup)h(name:)309 2613 y
Fn(to)f(specify)f(the)h(group)f(name)i(to)f(be)g(used)g(when)g(e)o(x)o
(ecuting)g(the)f(shell)h(command.)50 2689 y Fl(-size)g(value:)43
b Fn(to)9 b(specify)f(the)i(anticipated)e(size)h(of)g(the)g(\256le.)16
b(The)10 b(v)o(alue)e(is)h(a)h(positi)o(v)o(e)e(inte)o(ger)h
(optionally)e(follo)o(wed)309 2745 y(by)j(a)g Fl(unit)h(character)g
Fn(that)f(can)g(be)g(either)g(M)h(for)g(me)o(gabytes)e(or)i(K)f(for)g
(kilobytes.)k(A)d(default)e(v)o(alue)309 2802 y(can)14
b(be)f(pro)o(vided)g(in)g(the)h(shift)e(con\256guration)h(by)g(mean)h
(of)g(the)f(item)h(DEFSIZE)g(in)f(the)g(cate)o(gory)309
2858 y(DPM)f(\()f(see)h(sfsyntax\(1\))d(\).)17 b(The)11
b(default)g(unit)f(character)i(is)e(M.)p eop
%%Page: 3 7
3 6 bop -64 -125 a Ff(1.3.)28 b(THE)11 b(DPM)h(D)n(AEMON)f(-)g(SFDPMD)
1263 b Fn(3)50 46 y Fl(-look)11 b(\()g(-k)h(\):)41 b
Fn(to)12 b(specify)h(that)g(the)f(\256le)i(should)d(not)i(be)g
(created.)23 b(If)14 b(the)e(\256le)i(doesn')o(t)e(e)o(xist)h(an)g
(error)h(is)e(returned.)309 102 y(The)f(earlier)g(name)h(of)f(this)f
(option)g(is)h(-k.)50 173 y Fl(-r)o(emove:)86 b Fn(to)11
b(specify)f(that)h(an)g(e)o(xisting)f(\256les)h(should)e(\256rst)i(be)h
(deleted.)50 243 y Fl(-table:)133 b Fn(to)11 b(specify)g(that)f(the)h
(\256le)h(should)e(not)h(be)g(created)h(by)f Fl(sfget)p
Fn(.)17 b(This)10 b(is)h(not)g(the)g(same)h(as)f(for)h(the)f(-look)309
299 y(option)f(because)j(in)e(this)h(case)g(if)g(the)g(\256le)h(doesn')
o(t)e(e)o(xist,)i(a)f(v)o(alid)f(nfs-pathname)h(is)g(returned.)19
b(This)309 356 y(is)10 b(useful)h(when)g(the)g(\256le)g(has)g(to)g(be)g
(created)h(by)e(the)h(user)g(issuing)f(the)h(command.)309
419 y(F)o(or)i(e)o(xample,)h(assume)f Fl(oldname)f Fn(is)g(a)h(\256le)g
(in)g(the)f(shift)g(disk)f(pool)h(test)g(and)h(that)f
Fl(newname)h Fn(does)309 476 y(not)d(e)o(xist.)16 b(The)11
b(command)309 539 y Fd(mv)25 b(-i)f(`sfget)h(-pool)f(test)h(-look)f
(oldname`)g(`sfget)h(-pool)f(test)g(-table)h(-size)309
596 y(0)g(newname`)309 659 y Fn(does)12 b(not)g(ask)h(for)g(a)g
(con\256rmation.)21 b(If)14 b(the)e(table)h(option)e(were)i(not)f
(present,)i(con\256rmation)e(would)309 716 y(be)f(requested)g(because)g
(the)g(\256le)g(ne)o(wname)h(would)d(ha)o(v)o(e)j(been)f(created)h(by)e
(the)h Fl(sfget.)50 786 y(-quiet:)131 b Fn(to)11 b(specify)f(that)h
(the)g(nfs-pathname)f(should)g(not)g(be)i(echoed.)50
857 y Fl(-verbose:)80 b Fn(to)10 b(echo)g(the)g(nfs-pathname)f(of)i
(the)e(\256le)i(remo)o(v)o(ed)g(\()p Fl(sfrm)p Fn(\).)17
b(to)9 b(echo)h(the)g(standard)g(error)g(stream)h(that)309
913 y(by)g(default)f(is)g(suppressed)g(\()p Fl(sfsh)p
Fn(\).)50 983 y Fl(-cshell:)120 b Fn(to)11 b(use)f(the)h(C)h(shell)e(e)
o(x)o(ecuting)h(the)g Fl(sfsh)g Fn(command)h(speci\256ed.)50
1054 y Fl(-rshell:)120 b Fn(to)11 b(use)f(the)h(remote)h(shell)e(e)o(x)
o(ecuting)h(the)g Fl(sfsh)g Fn(command)h(speci\256ed)f(\(see)g
(sfdpmd\(1\)\).)50 1124 y Fl(-dir)o(ectory:)51 b Fn(to)11
b(echo)g(the)g(nfs-pathname)f(of)i(the)f(\256le)g(system)g(before)g
(issuing)e(the)i Fl(sfsh)g Fn(command.)50 1195 y Fl(-space:)123
b Fn(to)11 b(sho)o(w)f(the)h(space)g(statistic)e(of)i(the)g(\256le)h
(system)e(before)i(issuing)d(the)i(optional)e Fl(sfsh)i
Fn(command.)50 1254 y Fl(-Linkdir)h(path:)309 1310 y
Fn(to)f(create)h(\()p Fl(sfget)p Fn(\))f(and)g(remo)o(v)o(e)i(\()p
Fl(sfrm)p Fn(\))e(the)g(symbolic)g(link)f(to)h(the)g(shift)f(\256le.)17
b(Links)10 b(are)i(located)f(in)309 1367 y(the)g(directory)f
(speci\256ed)h(by)g(path.)50 1427 y Fl(command)g(\()h(arguments)f(\):)
309 1483 y Fn(an)o(y)g(shell)e(command)i(with)f(its)g(ar)o(guments)g
(to)g(be)h(e)o(x)o(ecuted)g(by)f Fl(sfsh)p Fn(.)17 b(By)11
b(default)e(the)i(Bourne)f(shell)309 1539 y(is)f(used)g(in)g(the)h
(local)f(mode)h(and)f(the)g(remote)i(shell)d(in)h(the)h(remote)g(mode.)
16 b(The)10 b(command)g(is)f(always)309 1596 y(required)i(unless)f(the)
h(space)g(option)e(is)i(used.)4 1697 y Fe(\017)23 b Fj(RETURN)11
b(CODES)50 1771 y Fl(sfget)f Fn(returns)g(0)g(when)g(the)g(\256le)g
(already)h(e)o(xists)e(and)h(returns)g(1)g(when)g(either)g(the)g
(\256le)g(is)g(successfully)f(created)h(or)h(the)50 1827
y(\256le)g(doesn')o(t)g(e)o(xist)f(and)h(the)g Fh(-look)i
Fn(option)c(is)i(speci\256ed.)50 1901 y Fl(sfrm)g Fn(returns)g(0)g(if)g
(successful)f(and)h(1)g(if)g(the)g(\256le)h(doesn')o(t)e(e)o(xist.)50
1975 y Fl(sfsh)h Fn(returns)g(0)g(if)g(successful)f(and)h(1)g(if)g(at)g
(least)g(one)g(\256le)h(system)e(wasn')o(t)g(accessible.)4
2066 y Fe(\017)23 b Fj(SEE)10 b(ALSO)50 2140 y Fn(sfmake\(1\),)h
(sfsyntax\(1\),)g(sfoptions\(1\),)e(sfdpmd\(1\))4 2231
y Fe(\017)23 b Fj(A)n(UTHOR)50 2305 y Fn(F)o(abrizio)11
b(Cane,)h(CERN-CN)g(Di)o(vision)d(CH-1211)h(Gene)o(v)o(a)h(23,)g
(Switzerland)g(\(cane@cern)n(vm.cern.ch\))-64 2499 y
Fi(1.3)60 b(The)14 b(DPM)h(Daemon)g(-)g(sfdpmd)4 2619
y Fe(\017)23 b Fj(N)o(AME)50 2693 y Fn(The)11 b(Shift)g(DPM)h(daemon)4
2784 y Fe(\017)23 b Fj(SYNOPSIS)50 2858 y Fl(sfdpmd)12
b Fn(-help)e(|)i([)f(-dpmport)g(port)g(])p eop
%%Page: 4 8
4 7 bop -64 -125 a Fn(4)994 b Ff(CHAPTER)11 b(1.)28 b(THE)11
b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)4 46 y Fe(\017)23
b Fj(DESCRIPTION)50 120 y Fn(sfdpmd)18 b(starts)f(the)h(daemon)g
(handling)e(the)i(shift)g(remote)g(dpm)g(operations)f(\()h(sfget\(1\),)
i(sfrm\(1\))f(\).)38 b(The)18 b(port)50 177 y(number)10
b(required)g(used)g(by)f(the)h(daemon)h(for)f(remote)g(requests)g(is)f
(speci\256ed)h(by)g(means)h(of)f(either)g(the)g(shiftport,)f(the)50
233 y(shell)j(en)n(vironment)g(v)o(ariable)g(DPMPOR)m(T)m(,)i(the)f
(DPMPOR)m(T)h(number)f(in)g(the)f(\256le)h Fh(/etc/shift.c)q(onf)k
Fn(or)c(the)50 289 y Fh(/etc/services)i Fn(\256le.)50
364 y(The)c(SIGQUIT)g(signal)f(is)g(used)h(to)g(terminate)g(properly)f
(the)h(sfdpm)g(daemon.)4 456 y Fe(\017)23 b Fj(REMO)n(TE)11
b(SHIFT)g(OPERA)n(TIONS)50 531 y Fn(The)17 b(sfget,)i(sfrm)f(and)f
(sfsh)g(commands)g(can)h(be)g(e)o(x)o(ecuted)f(either)g(locally)g(to)g
(the)g(cpu)g(serv)o(er)h(where)f(the)o(y)h(are)50 587
y(issued)c(or)h(remotely)f(by)h(an)g(sfdpm)g(daemon.)28
b(The)15 b(mode)g(is)g(selected)f(by)h(mean)h(of)f(the)f(items)h
(SFGETMODE,)50 644 y(SFRMMODE)i(and)e(SFSHMODE)h(in)f(the)g(cate)o
(gory)g(DPM)h(\()g(see)g(sfsyntax\(1\))e(\).)29 b(Where)16
b(the)f(remote)h(mode)g(is)50 700 y(speci\256ed,)g(the)e
Fl(sfget)h Fn(and)g Fl(sfrm)g Fn(commands)g(connect)f(the)h(sfdpm)g
(daemons)f(running)g(on)g(the)h(host)f(listed)f(in)i(the)50
756 y(item)d(SFD)n(AEMONS.)h(The)e(shift)g(request)h(is)f(sent)g(to)h
(the)f(\256rst)h(daemon)g(answering)f(to)g(the)h(connect)f(request.)18
b Fl(sfsh)50 813 y Fn(uses)10 b(the)g(remote)g(shell)g(to)g(e)o(x)o
(ecute)h(on)f(a)g(remote)h(host.)k(If)c(yes)f(is)g(speci\256ed)g(in)g
(the)g(item)h(REMO)n(TESFSH,)g(the)f Fl(sfsh)50 869 y
Fn(command)k(is)f(e)o(x)o(ecuted)i(on)e(the)h(remote)g(host)f
(speci\256ed)g(in)h(the)f(item)h(RHOSTSFSH.)h(Otherwise)e(only)g(the)g
(shell)50 926 y(command)i(ar)o(gument)f(of)g Fl(sfsh)h
Fn(is)f(sent)f(to)h(the)g(disk)g(serv)o(er)g(associated)g(with)f(the)h
(\256le)h(system)f(unless)f(a)i(speci\256ed)50 982 y(host)10
b(is)h(selected)f(by)h(means)h(of)f(the)g(item)g(RHOSTSFSH.)4
1075 y Fe(\017)23 b Fj(EXAMPLE)50 1149 y Fn(Here)11 b(is)f(an)h(e)o
(xample)g(of)g(shift)f(dpm)h(installation)d(for)j(a)g(shift)f(en)n
(vironment)g(formed)h(by)f(host)p 1558 1149 14 2 v 15
w(1,)h(host)p 1695 1149 V 16 w(2,)g(host)p 1833 1149
V 15 w(3)f(and)50 1206 y(host)p 130 1206 V 15 w(4.)16
b(Host)p 282 1206 V 16 w(4)11 b(has)g(no)g(NFS)g(\256le)h(system)e
(mounted)h(and)g(host)p 1087 1206 V 15 w(2)g(cannot)g(size)g(all)f(of)i
(the)f(NFS)g(\256le)h(systems.)77 1325 y Fh(category)30
b(DPM)104 1381 y(SFGETMODE)g(:)e(local)g(noatomic)104
1438 y(\()104 1494 y(host_2)h(:)f(remote)h(noatomic)104
1551 y(host_4)g(:)f(remote)h(atomic)104 1607 y(\))104
1663 y(SFRMMODE)h(:)d(local)104 1720 y(\()104 1776 y(host_2)i(:)f
(remote)104 1833 y(\))104 1889 y(SFSHMODE)i(:)d(local)104
1946 y(\()104 2002 y(host_2)i(:)f(remote)104 2059 y(host_4)h(:)f
(remote)104 2115 y(\))104 2172 y(SFDAEMONS)i(:)e(host_1)h(host_3)104
2228 y(REMOTESFSH)h(:)e(yes)104 2284 y(RHOSTSFSH)i(:)e(host_1)50
2404 y Fn(The)14 b(sfget)h(and)f(sfrm)i(requests)e(issued)f(on)h(host)p
850 2404 V 16 w(4)g(are)i(sent)e(to)g(either)h(host)p
1308 2404 V 15 w(1)f(or)h(host)p 1490 2404 V 15 w(3.)28
b(The)14 b(sfrm)i(is)e(the)g(only)50 2460 y(request)e(that)f(is)h(e)o
(x)o(ecuted)h(locally)e(to)h(host)p 754 2460 V 15 w(2)g(\()h(sfrm)f
(doesn')o(t)g(need)g(the)g(\256le)h(system)f(size)g(to)g(remo)o(v)o(e)h
(a)g(\256le)f(\).)20 b(The)50 2517 y(sfsh)10 b(requests)h(issued)f(on)h
(host)p 557 2517 V 15 w(2)g(and)g(host)p 760 2517 V 15
w(4)g(are)h(sent)e(to)h(host)p 1084 2517 V 15 w(1.)4
2609 y Fe(\017)23 b Fj(SEE)10 b(ALSO)50 2683 y Fn(sfmake\(1\),)h
(sfsyntax\(1\),)g(sfoptions\(1\),)e(sfget\(1\),)i(sfrm\(1\),)h
(sfsh\(1\))4 2776 y Fe(\017)23 b Fj(A)n(UTHOR)50 2850
y Fn(F)o(abrizio)11 b(Cane,)h(CERN-CN)g(Di)o(vision)d(CH-1211)h(Gene)o
(v)o(a)h(23,)g(Switzerland)g(\(cane@cern)n(vm.cern.ch\))p
eop
%%Page: 5 9
5 8 bop -64 -125 a Ff(1.4.)28 b(DPM)12 b(CONFIGURA)-5
b(TION)11 b(FILES)1278 b Fn(5)-64 46 y Fi(1.4)60 b(DPM)15
b(Con\256guration)f(Files)4 177 y Fe(\017)23 b Fj(N)o(AME)50
258 y Fl(sfmake,)11 b(sfmaked)g Fn(-)h(Shift)e(Disk)h(Pool)f(Manager)i
(\(DPM\))g(con\256gurator)4 364 y Fe(\017)23 b Fj(SYNOPSIS)50
486 y Fl(sfmake:)105 b Fn(-help)18 b([-shiftascii)e(path])i
([-shiftbinary)f(path])g([-shiftport)g(port])h(-read)h([-list])e
([-pools])g([-users])309 542 y([-conf])g(-binary)g([-list])f([-remo)o
(v)o(e])j(-ascii)d(-e)o(xport)h([)g([:-|:+]host:[-|+]host)d(])k
([-touch])e(-import)h([)309 599 y(host:host)8 b(])k(-wlock)e
([\256lesystem,\256lesystem])h(-wunlock)f
(all|\256lesystem,\256lesystem)50 678 y Fl(sfmaked:)80
b Fn(-help)11 b([-shiftascii)e(path])i([-shiftbinary)f(path])g
([-shiftport)g(port])4 800 y Fe(\017)23 b Fj(DESCRIPTION)50
881 y Fn(The)14 b(Shift)g(DPM)h(con\256guration)e(can)i(be)f(pro)o
(vided)g(in)f(two)h(dif)o(ferent)g(formats:)22 b(-)15
b(the)f Fl(ascii)f Fn(format)i(used)f(by)g(the)50 937
y(administrator)c(to)h(create)i(or)f(change)f(a)h(con\256guration)f
(and)g(a)i Fl(binary)e Fn(format)h(required)g(by)f(sfget,)h(sfrm,)h
(sfsh,)e(sfgc)50 994 y(and)e(sfdpmd.)16 b(While)9 b(a)h(copy)e(of)i
(the)g(binary)e(format)i(must)g(be)f(pro)o(vided)g(where)o(v)o(er)h
(the)f(DPM)i(is)e(installed,)f(the)i(ascii)50 1050 y(format)h(usually)e
(e)o(xists)h(while)f(the)i(administrator)e(to)h(makes)g(changes)g(in)h
(the)f(ascii)g(\256les.)16 b(sfmake)11 b(reads)g(and)f(writes)50
1107 y(both)h(formats)h(locally)f(and)i(through)d(the)i(network)f
(while)h(sfmaked)g(starts)f(the)h(daemon)g(handling)f(remote)h(sfmake)
50 1163 y(operations.)4 1269 y Fe(\017)23 b Fj(OPTIONS)50
1391 y Fl(-help:)146 b Fn(to)11 b(sho)o(w)f(the)h(a)o(v)o(ailable)f
(options)f(and)i(a)h(brief)f(description.)50 1458 y Fl(-r)o(ead)h([)f
(-list)g(])g([)h(-pools)f(])g([)h(-users)f(])h([)f(-conf)h(])f(:)309
1515 y Fn(to)j(read)i(the)f(binary)f(con\256guration)g(and)h(print)f
(the)h(v)o(ersion)f(number)h(and)g(the)g(shift)f(en)n(vironment)309
1571 y(host)d(list.)19 b(If)13 b(pools)e(is)h(speci\256ed)g(the)h(disk)
e(serv)o(er)i(and)f(pool)g(con\256guration)f(is)h(printed.)19
b(If)13 b(users)f(is)309 1628 y(speci\256ed)i(the)f(pool)g(access)i
(con\256guration)d(is)i(printed.)24 b(If)14 b(conf)g(is)f(speci\256ed)h
(the)g(shift)f(processes)309 1684 y(con\256guration)g(is)i(printed.)26
b(If)15 b(list)f(is)g(speci\256ed)h(the)f(whole)h(shift)e
(con\256guration)h(is)g(printed)g(\()h(see)309 1741 y(sfsyntax\(1\))10
b(\).)50 1808 y Fl(-binary)h([)h(-list)e(])i([)f(-r)o(emove)g(])g(:)309
1865 y Fn(to)d(produce)h(a)h(ne)o(w)e(binary)h(con\256guration)f(from)h
(an)g(e)o(xisting)f(ascii)h(con\256guration.)14 b(The)9
b(ne)o(w)g(binary)309 1921 y(con\256guration)f(is)h(automatically)g(e)o
(xported.)15 b(If)10 b(remo)o(v)o(e)h(is)e(speci\256ed)h(then)f
(\256rst)g(the)h(e)o(xisting)e(binary)309 1978 y(con\256guration)h(is)g
(remo)o(v)o(ed)i(so)f(that)g(a)g(ne)o(w)g(shift)f(en)n(vironment)g
(host)h(list)e(will)i(be)g(created)g(including)309 2034
y(the)h(local)f(host)h(only)m(.)k(If)d(list)e(is)g(speci\256ed)h(the)g
(parser)h(input)e(is)g(echoed.)50 2113 y Fl(-ascii:)142
b Fn(to)14 b(produce)h(the)f(ascii)h(con\256guration)e(from)j(an)e(e)o
(xisting)g(binary)g(con\256guration.)26 b(The)15 b(ascii)f(con-)309
2170 y(\256guration)g(is)h(automatically)f(remo)o(v)o(ed)i(when)f(the)g
(binary)f(con\256guration)g(is)h(either)g(successfully)309
2226 y(e)o(xported)c(to)f(at)h(least)g(one)g(remote)h(host)e(or)h
(successfully)f(imported.)50 2294 y Fl(-export)i([)f
([:-|:+]host:[-|+]host)h(])g([)f(-touch)h(])g(:)309 2350
y Fn(to)e(e)o(xport)g(the)g(binary)g(con\256guration)f(to)h(the)g
(shift)f(en)n(vironment.)16 b(The)10 b(latter)g(can)h(be)g(also)e
(modi\256ed)309 2407 y(pro)o(viding)j(a)i(list)e(of)i(hosts.)22
b(If)14 b(the)f(host)g(name)h(is)f(preceded)h(by)f(a)h(dash)f(then)g
(it)g(is)g(remo)o(v)o(ed)i(from)309 2463 y(the)j(shift)e(en)n
(vironment)i(otherwise)e(it)i(is)f(added)h(unless)f(already)h
(included.)36 b(If)18 b(the)g(host)f(name)309 2520 y(is)e(preceded)h
(by)f(a)h(plus)e(then,)j(if)e(added,)i(it)e(will)g(not)f(be)i
(authorized)f(to)g(modify)g(and)g(e)o(xport)h(the)309
2576 y(con\256guration.)28 b(In)15 b(case)h(the)f(shift)g(en)n
(vironment)f(is)h(modi\256ed)h(the)f(local)g(binary)g(\256le)g(is)g
(updated)309 2632 y(before)g(being)f(transfered.)28 b(The)15
b(binary)f(\256le)h(is)f(ef)o(fecti)o(v)o(ely)h(e)o(xported)f(only)g
(to)h(the)f(remote)i(hosts)309 2689 y(ha)o(ving)11 b(a)i(less)f(recent)
g(binary)g(con\256guration.)19 b(An)12 b(attemp)g(to)g(e)o(xport)g(the)
h(con\256guration)e(to)h(a)g(host)309 2745 y(ha)o(ving)c(a)i(more)g
(recent)f(v)o(ersion)g(produces)f(the)h(W)-5 b(ARNING)9
b(too)g(recent.)16 b(If)9 b(touch)g(is)g(speci\256ed)g(then)309
2802 y(the)k(local)g(v)o(ersion)g(number)g(is)g(\256rst)h(changed.)23
b(This)12 b(should)g(force)i(sfmake)g(to)f(ef)o(fecti)o(v)o(ely)g(e)o
(xport)309 2858 y(the)e(\256le)g(a)o(v)o(oiding)f(the)h(warning)f(just)
g(described.)p eop
%%Page: 6 10
6 9 bop -64 -125 a Fn(6)994 b Ff(CHAPTER)11 b(1.)28 b(THE)11
b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)50 31 y Fl(-import)g([)h
(host:host)f(])g(:)309 87 y Fn(to)g(update)g(the)h(local)f(binary)g
(con\256guration)g(importing)f(the)i(most)f(recent)h(v)o(ersion)f(a)o
(v)o(ailable)g(in)h(the)309 144 y(shift)c(en)n(vironment.)15
b(The)9 b(binary)g(\256le)g(is)g(ef)o(fecti)o(v)o(ely)f(imported)h
(only)f(if)h(the)g(remote)h(v)o(ersion)e(is)h(more)309
200 y(recent)16 b(than)e(the)i(local.)29 b(An)15 b(attempt)g(to)g
(import)g(the)g(con\256guration)f(from)i(a)g(host)f(ha)o(ving)f(a)i
(less)309 257 y(recent)11 b(v)o(ersion)f(produces)g(the)h(W)-5
b(ARNING)10 b(too)h(old.)k(If)d(the)f(shift)e(en)n(vironment)i(cannot)f
(be)h(loaded)309 313 y(from)h(the)e(binary)h(con\256guration)f(then)g
(the)h(optional)f(host)g(list)g(is)g(used.)50 376 y Fl(-wlock)h([)g
(\256lesystem,)h([\256lesystem])f(])g(:)309 432 y Fn(to)j(either)h
(write-lock)f(one)g(or)h(more)h(\256le)f(systems)f(or)h(get)f(the)h
(list)e(of)i(write-locked)f(\256le)h(systems.)309 489
y(The)10 b(\256le)h(system)f(path)g(can)h(be)f(either)g(the)h(complete)
f(nfs-pathname)g(as)h(returned)f(by)g(sfget)g(or)g(in)h(the)309
545 y(format)g Fh(<host>:<path)q(>.)20 b Fn(sfget)10
b(cannot)h(create)h(\256les)f(in)g(write-locked)e(\256le)j(systems.)50
608 y Fl(-wunlock)g(all)e(|)h(\256lesystem,)g([\256lesystem])g(:)309
664 y Fn(to)e(write-unlock)f(one)h(or)h(more)g(\256le)g(system.)15
b(If)10 b(all)g(is)f(speci\256ed)g(then)g(all)g(write-locked)f(\256le)i
(systems)309 720 y(are)i(unlocked.)4 829 y Fe(\017)23
b Fj(ENVIR)n(ONMENT)50 905 y Fl(sfmake)11 b Fn(and)g
Fl(sfmaked)g Fn(need)g(to)f(kno)o(w)h(the)f(location)g(of)h(the)g
(ascii)g(and)g(binary)f(con\256guration)g(and)h(the)g(socket)f(port)50
962 y(number)h(to)g(connect)g(the)f(remote)i(sfmake)f(daemons.)50
1038 y(The)g(shift)f(ascii)h(directory)f(path)h(is)g(searched)g(in)g
(the)g(follo)o(wing)e(places)h(and)h(order:)104 1166
y Fh(-)28 b(the)g(command)h(line)g(\()e(shiftascii)j(option)f(\))104
1222 y(-)f(the)g(shell)h(environment)h(\()d(setenv)i(SHIFTASCII)h
(<path>)f(\))104 1279 y(-)f(the)g(file)g(/etc/shift.c)q(onf)j(\()c
(SHIFT)i(ASCII)g(<path>)f(\))50 1407 y Fn(The)11 b(shift)f(binary)h
(directory)f(path)h(is)f(searched)i(in)e(the)h(follwing)e(places)i(and)
g(order:)104 1535 y Fh(-)28 b(the)g(command)h(line)g(\()e(shiftbinary)j
(option)f(\))104 1591 y(-)f(the)g(shell)h(environment)h(\()d(setenv)i
(SHIFTBINARY)i(<path>)e(\))104 1648 y(-)f(the)g(file)g(/etc/shift.c)q
(onf)j(\()c(SHIFT)i(BINARY)g(<path>)g(\))50 1776 y Fn(The)11
b(shift)f(port)h(number)g(is)g(searched)g(in)g(the)g(follo)o(wing)e
(places)i(and)g(order:)104 1904 y Fh(-)28 b(the)g(command)h(line)g(\()e
(shiftport)j(option)f(\))104 1960 y(-)f(the)g(shell)h(environment)h(\()
d(setenv)i(SHIFTMAKEPOR)q(T)h(<path>)f(\))104 2017 y(-)f(the)g(file)g
(/etc/shift.c)q(onf)j(\()c(SHIFT)i(MAKEPORT)g(<number>)h(\))104
2073 y(-)e(the)g(Internet)h(Services)h(data)e(base)h(\()e(shiftmake)j
(<number>/tcp)g(\))4 2201 y Fe(\017)23 b Fj(FILES)93
2310 y Fn(1.)g Fl(/etc/shift.conf)12 b Fn(is)e(the)h(installation)e
(setup)h(\256le)50 2419 y(The)h(follo)o(wing)e(\256les)i(are)h
(produced)e(by)h(sfmake)g(and)g(placed)g(in)g(the)g(shift)f(binary)h
(directory)93 2527 y(1.)23 b Fl(shiftdb)12 b Fn(the)f(binary)f(shift)g
(con\256guration)93 2601 y(2.)23 b Fl(shiftdb)n(.lock)12
b Fn(the)f(binary)f(con\256guration)g(lock)93 2675 y(3.)23
b Fl(shiftdb)n(.net)93 2749 y Fn(4.)g Fl(shiftdb)n(.copy)50
2858 y Fn(The)11 b(follo)o(wing)e(\256les)i(are)h(placed)f(in)g(the)g
(shift)f(ascii)g(directory)h(\()g(see)h(sfsyntax\(1\))e(\))p
eop
%%Page: 7 11
7 10 bop -64 -125 a Ff(1.4.)28 b(DPM)12 b(CONFIGURA)-5
b(TION)11 b(FILES)1278 b Fn(7)93 46 y(1.)23 b Fl(shift.defaults)11
b Fn(is)g(the)g(shift)f(defaults)g(\256le)93 121 y(2.)23
b Fl(shift.pools)10 b Fn(is)h(the)g(shift)f(resource)i(con\256guration)
d(\256le)93 196 y(3.)23 b Fl(shift.users)11 b Fn(is)g(the)g(shift)f
(pool)g(access)i(control)e(\256le)93 271 y(4.)23 b Fl(shift.pairs)11
b Fn(is)g(the)g(shift)f(process)g(con\256guration)g(\256le)4
383 y Fe(\017)23 b Fj(EXAMPLES)50 460 y Fl(Cr)o(eation)11
b(of)g(a)g(new)h(shift)f(con\256guration)h(and)f(en)n(vir)o(onment)104
572 y(\261)23 b Fn(mo)o(v)o(e)12 b(to)f(the)f(shift)h(ascii)f
(directory)104 647 y Fl(\261)23 b Fn(edit)10 b(the)h(shift)f
(con\256guration)g(ascii)h(\256les)g(and)g(write)g(the)g
(con\256guration)104 722 y Fl(\261)23 b Fn(sfmake)11
b(-binary)g(to)f(create)i(the)f(local)g(binary)f(con\256guration)104
798 y Fl(\261)23 b Fn(sfmake)11 b(-e)o(xport)g(hostname)g(when)f(a)i
(ne)o(w)f(host)f(is)h(added)g(to)f(the)h(shift)f(en)n(vironment)50
909 y Fl(Modi\256cation)h(of)g(the)h(curr)o(ent)h(shift)e
(con\256guration)104 1021 y(\261)23 b Fn(sfmake)11 b(-ascii)g(to)g
(produce)f(the)h(ascii)g(\256les)g(containing)e(the)i(current)g
(con\256guration.)50 1132 y Fl(Con\256guration)g(Changes)104
1231 y(\261)23 b Fn(mo)o(v)o(e)12 b(to)f(the)f(shift)h(ascii)f
(directory)104 1306 y Fl(\261)23 b Fn(edit)10 b(and)h(modify)g(the)g
(con\256guration)f(as)h(required)104 1381 y Fl(\261)23
b Fn(sfmake)11 b(-binary)g(to)f(update)h(and)g(e)o(xport)g(the)g(local)
f(binary)h(con\256guration)50 1479 y Fl(Modi\256cation)g(of)g(the)h
(curr)o(ent)h(shift)e(en)n(vir)o(onment)104 1577 y(\261)23
b Fn(sfmake)11 b(-e)o(xport)g(:-host1:-host2:)o(hos)o(t3)d(to)j(remo)o
(v)o(e)h(host1)e(and)h(host2,)f(to)h(add)g(host3)4 1675
y Fe(\017)23 b Fj(INST)n(ALLA)n(TION)50 1753 y Fn(The)10
b(\256le)g Fh(/etc/shift.con)q(f)p Fn(,)k(the)c(shell)f(en)n(vironment)
g(and)g(the)h(Internet)g(Services)g(data)g(base)g(should)e(be)i(setup)
50 1809 y(follo)o(wing)d(the)j(section)e(ENVIR)n(ONMENT)m(.)h(If)h(the)
g(shift)e(en)n(vironment)h(does)g(not)g(include)f(only)h(the)g(local)g
(host)g(then)50 1866 y(at)i(system)f(startup,)h(an)g
Fl(sfmake)f Fn(daemon)h(must)g(be)g(started)f(and)h(an)g(import)f(e)o
(x)o(ecuted)i(in)e(order)h(to)g(update)f(the)h(local)50
1922 y(con\256guration)h(in)i(case)g(some)g(modi\256cations)e(were)i
(propagated)f(from)h(a)g(remote)h(host)d(while)h(the)h(local)f(machine)
50 1979 y(was)d(not)h(accessible.)4 2077 y Fe(\017)23
b Fj(A)o(CCESS)10 b(PR)n(OBLEMS)h(and)f(LOCKING)50 2154
y Fn(The)h(access)g(to)g(the)g(binary)f(con\256guration)g(\256le)h(is)g
(protected)f(by)h(a)g(lock)g(\256le)g Fl(shiftdb)n(.lock)h
Fn(in)f(order)g(to)g(suspend)f(the)50 2210 y(sfget,)h(sfrm,)i(sfsh)e
(and)g(sfdpmd)h(while)e(the)i(con\256guration)e(is)h(being)g
(modi\256ed.)17 b(The)12 b(lock)f(mechanism)h(guarantees)50
2267 y(that)k(a)i(process)f(can)g(upgrade)g(a)h(shared)f(lock)g(to)f
(an)i(e)o(xclusi)o(v)o(e)e(lock,)j(and)e(vice)g(v)o(ersa,)j(without)15
b(releasing)i(the)50 2323 y(pre)o(vious)d(lock.)30 b(There)16
b(is)g(no)f(deadlock)g(in)h(the)f(sfmake)h(operations)f(b)o(ut)g(there)
h(is)f(no)h(guarantee)f(that)h(the)f(shift)50 2380 y(en)n(vironment)c
(ha)o(v)o(e)i(the)f(same)g(con\256guration)f(if)h(two)f(dif)o(ferent)h
(modi\256cations)f(are)h(propagated)g(at)g(the)g(same)g(time)50
2436 y(from)g(two)f(dif)o(ferent)h(hosts.)17 b(Let)12
b(delta-t)f(be)h(the)g(positi)o(v)o(e)e(time)i(dif)o(ference)g(between)
g(to)f(hosts)g(named)h(A)g(and)g(B.)h(If)50 2493 y(the)d(last)f
(con\256guration)g(was)h(created)g(on)g(A)g(at)h(time)f(t)g(then)f(the)
h(ne)o(w)g(con\256guration)f(created)i(on)f(B)g(will)f(be)i(e)o
(xported)50 2549 y(to)k(A)h(only)e(if)i(its)f(creation)g(time)h(is)f
(more)h(recent)g(than)f(t)g(+)h(delta-t)f(otherwise)f(the)i(warning)e
(too)h(recent)h(will)e(be)50 2606 y(printed)c(as)h(described)g(for)g
(the)g(e)o(xport)g(option.)4 2704 y Fe(\017)23 b Fj(RETURN)11
b(CODES)50 2781 y Fn(0)g(successful)f(completion)50 2858
y(1)h(failure)p eop
%%Page: 8 12
8 11 bop -64 -125 a Fn(8)999 b Ff(CHAPTER)11 b(1.)23
b(THE)11 b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)4 46 y
Fe(\017)23 b Fj(SEE)10 b(ALSO)50 120 y Fn(sfsyntax\(1\),)g(sfget\(1\),)
h(sfsh\(1\),)g(sfrm\(1\),)h(sfgc\(1\),)g(sfdpmd\(1\),)f(sfoptions\(1\))
4 213 y Fe(\017)23 b Fj(A)n(UTHOR)50 287 y Fn(F)o(abrizio)11
b(Cane,)h(CERN-CN)g(Di)o(vision)d(CH-1211)h(Gene)o(v)o(a)h(23,)g
(Switzerland)g(\(cane@cern)n(vm.cern.ch\))-64 482 y Fi(1.5)60
b(DPM)15 b(Con\256guration)f(Syntax)4 603 y Fe(\017)23
b Fj(N)o(AME)50 678 y Fl(sfsyntax)10 b Fn(-)i(Shift)f(DPM)g
(con\256guration)f(syntax)4 770 y Fe(\017)23 b Fj(DESCRIPTION)50
844 y Fn(The)11 b(Shift)g(DPM)h(con\256guration)d(is)i(de\256ned)g(in)g
(four)g(ascii)g(con\256guration)e(\256les:)93 948 y(1.)23
b Fl(The)12 b(Resour)o(ce)g(Con\256guration)f(File)f
Fn(de\256nes)i(disk)e(pools)g(and)h(their)f(attrib)o(utes.)93
1020 y(2.)23 b Fl(The)12 b(P)o(ool)e(Access)h(Contr)o(ol)g(File)g
Fn(de\256nes)g(access)h(rights)e(to)g(speci\256c)h(users)g(and)g
(groups.)93 1091 y(3.)23 b Fl(The)12 b(Defaults)f(File)g
Fn(de\256nes)g(global)f(defaults)f(for)j(the)f(other)g(DPM)g
(con\256guration)f(\256les.)93 1163 y(4.)23 b Fl(The)14
b(Pr)o(ocess)f(Con\256guration)g(File)g Fn(de\256nes)g(the)f(DPM)i
(processes)f(con\256guration)f(sfget,)h(sfrm,)i(sfsh,)e(sfgc,)150
1219 y(sfdpmd.)4 1323 y Fe(\017)23 b Fj(RESOURCE)10 b(CONFIGURA)n(TION)
i(FILE)50 1397 y Fn(This)f(\256le)h(de\256nes)h(the)e(shift)h(disk)f
(serv)o(ers,)i(\256le)f(systems)g(and)g(pools.)18 b(There)12
b(are)h(three)f(types)f(of)i(entry:)k(SER)l(VER,)50 1454
y(POOL)11 b(and)g(SUPERPOOL.)93 1546 y(1.)23 b(The)11
b(SER)l(VER)h(entry)f(de\256nes)g(the)g(name)h(of)f(a)g(disk)f(serv)o
(er)i(and)f(its)f(SHIFT)i(\256le)g(systems.)93 1618 y(2.)23
b(The)13 b(POOL)f(entry)h(speci\256es)f(the)h(name)g(of)g(a)g(disk)f
(pool,)g(whether)h(it)f(is)g(temporary)h(\(garbage-collected\))f(or)150
1674 y(not,)f(whether)g(it)g(is)h(public)e(or)i(pri)o(v)o(ate,)f(and)g
(speci\256es)g(the)h(list)e(of)i(\256le)g(systems)e(which)h(form)h(the)
g(pool.)17 b(If)12 b(the)150 1731 y(pool)f(is)g(temporary)h(the)f
(garbage)h(collector)f(polic)o(y)g(is)g(de\256ned)h(by)f(specifying)g
(two)f(space)i(thresholds)e(to)i(the)150 1787 y(COLLECT)e(parameter)m
(.)18 b(gcmax)11 b(de\256nes)g(the)g(maximum)g(space)g(utilisation)d
(of)j(the)f(pool)g(as)h(a)g(percentage)g(of)150 1844
y(its)f(total)f(capacity)m(.)16 b(If)11 b(the)g(space)g(usage)f(rises)g
(abo)o(v)o(e)h(this)f(le)o(v)o(el)g(when)g(the)h(garbage)f(collector)g
(e)o(x)o(ecutes,)h(\256les)150 1900 y(will)h(be)h(remo)o(v)o(ed)i(from)
e(the)g(pool)g(until)e(the)i(utilisation)e(le)o(v)o(el)i(falls)f(belo)o
(w)h(the)g(gcmin)g(threshold.)21 b(A)13 b(SIZE)150 1957
y(parameter)f(may)g(also)e(be)h(speci\256ed,)h(which)e(de\256nes)h(a)h
(maximum)g(size)f(for)g(an)o(y)g(indi)o(vidual)e(\256le)i(in)g(the)g
(pool.)93 2028 y(3.)23 b(The)13 b(SUPERPOOL)h(entry)g(speci\256es)f
(the)h(name)g(of)g(a)g(pool)f(set)g(and)h(its)e(access)i(polic)o(y)m(.)
24 b(The)13 b(access)h(to)g(the)150 2085 y(superpool)9
b(is)h(de\256ned)h(by)f(two)f(binary)h(operators:)15
b(the)10 b(union)g(operator)g(\()h(+)f(\))h(speci\256es)g(that)e(the)i
(left)f(element)150 2141 y(has)i(the)h(same)g(access)g(priority)e(as)i
(for)g(the)g(right)e(element;)j(the)e(sequence)h(operator)f(\()h(:)19
b(\))h(speci\256es)12 b(that)h(the)150 2198 y(left)e(element)g(has)g(a)
h(higher)e(priority)g(than)g(the)h(right)g(element.)50
2310 y Fd(BNF)24 b(SYNTAX)75 2360 y(shiftconfig)123 b(::=)25
b(serverconfig)f({)g(serverconfig)g(})h(poolconfig)f({)h(poolconfig)f
(})174 2410 y({)h(superpoolconfig)f(})h(END)75 2460 y(serverconfig)98
b(::=)25 b(SERVER)f(servername)g(mountpath)g(filesystem)g({)h
(filesystem)f(})75 2510 y(poolconfig)148 b(::=)25 b(POOL)f(poolname)h
(poolattribute)e(poolfilesystem)174 2559 y({)i(poolfilesystem)f(})75
2609 y(superpoolconfig)f(::=)i(SUPERPOOL)f(superpoolname)g
(superpoolelem)f({)i(superpoolprty)174 2659 y(superpoolelem)f(})75
2709 y(poolfilesystem)48 b(::=)25 b(servername)f(filesystem)75
2759 y(filesystem)148 b(::=)25 b(filesystempath)e(|)i(filesystempath)f
(filesystemattr)75 2808 y(filesystemattr)48 b(::=)25
b(WLOCK)75 2858 y(poolattribute)73 b(::=)25 b({)g(timeattribute)e(|)i
(accessattribute)f(|)h(collectattribute)p eop
%%Page: 9 13
9 12 bop -64 -125 a Ff(1.5.)23 b(DPM)12 b(CONFIGURA)-5
b(TION)11 b(SYNT)l(AX)1223 b Fn(9)174 46 y Fd(|)25 b(sizeattribute)f(})
75 95 y(timeattribute)73 b(::=)25 b(PERMANENT)f(|)h(TEMPORARY)75
145 y(accessattribute)e(::=)i(PRIVATE)f(|)h(PUBLIC)75
195 y(collectattribute::=)e(COLLECT)h(\()h(gcmin)f(:)h(gcmax)g(\))75
245 y(sizeattribute)73 b(::=)25 b(SIZE)f(\()h(non-negative-number)e(\))
50 b(|)g(SIZE)174 295 y(\()25 b(non-negative-number)e(unitcharacter)h
(\))75 345 y(unitcharacter)73 b(::=)25 b(M)g(|)g(K)75
394 y(superpoolelem)73 b(::=)25 b(superpoolname)f(|)g(poolname)75
444 y(superpoolprty)73 b(::=)25 b(+)g(|)g(:)75 494 y(servername)148
b(::=)25 b(id)75 544 y(poolname)198 b(::=)25 b(id)75
594 y(superpoolname)73 b(::=)25 b(id)75 643 y(mountpath)173
b(::=)25 b(path)75 693 y(filesystempath)48 b(::=)25 b(path)75
743 y(path)298 b(::=)25 b(/)g(id)f({)h(/)g(id)g(})75
793 y(id)348 b(::=)25 b({digit)f(|)h(<->)g(})f(\(letter)h(|)g(_)f(\))h
({letter)f(|)h(digit)g(|)g(<->)f(|)h(_)g(})50 898 y Fn(where)11
b(the)g(follo)o(wing)e(constraints)g(apply:)104 987 y
Fl(\261)23 b Fn(serv)o(ername)12 b(must)f(be)g(a)h(v)o(alid)e(host)g
(name)104 1055 y Fl(\261)23 b Fn(either)15 b Fh(0)27
b(<=)h(gcmin)h(<)e(gcmax)i(<=)f(100)16 b Fn(or)f Fh(0)27
b(=)h(gcmin)h(=)e(gcmax)17 b Fn(\(no)e(default)f(garbage)g(col-)150
1111 y(lection)c(polic)o(y\))104 1179 y Fl(\261)23 b
Fn(an)o(y)11 b(of)g(the)g(poolattrib)o(ute)e(cannot)i(be)g(repeated)g
(e)o(v)o(en)h(if)f(speci\256ed)g(in)f(the)h(defaults)f(\256le)104
1247 y Fl(\261)23 b Fn(pool\256lesystem)10 b(must)h(be)h(a)g(v)o(alid)e
(tuple)h(\(i.e)h(the)f(serv)o(er)h(and)g(its)e(\256lesystem)h(must)g
(be)h(pre)o(viously)e(declared.\))150 1304 y(The)h(full)f(pathname)h
(of)h(a)f(\256le)h(system)e(is)h(generated)g(as)g(the)g(concatenation)f
(of)h(mountpath)f(+)h(\256lesystem.)50 1402 y Fd(EXAMPLE)75
1452 y(SERVER)24 b(shift1)g(/shift/shift1)100 1502 y(/data1)100
1552 y(/data2)100 1601 y(/data3)75 1651 y(SERVER)g(shd01)h
(/shift1/shd01)100 1701 y(/data1)100 1751 y(/data4)100
1801 y(/data5)75 1850 y(POOL)f(public)h(TEMPORARY)f(PUBLIC)g
(COLLECT\(50:80\))g(SIZE\(250M\))100 1900 y(shift1)g(/data1)100
1950 y(shd01)g(/data4)100 2000 y(shd01)g(/data5)75 2050
y(POOL)g(test)h(PERMANENT)f(PRIVATE)g(COLLECT\(0:0\))g(SIZE\(50K\))100
2099 y(shd01)g(/data1)100 2149 y(shift1)g(/data3)75 2199
y(POOL)g(shift1)h(TEMPORARY)f(PRIVATE)100 2249 y(shift1)g(/data2)75
2299 y(SUPERPOOL)g(cern)g(public+shift1+test)75 2349
y(SUPERPOOL)g(opal)g(shift1:public)75 2398 y(END)4 2503
y Fe(\017)f Fj(POOL)11 b(A)o(CCESS)g(CONTR)n(OL)h(FILE)50
2576 y Fn(This)h(\256le)h(de\256nes)f(the)h(users)f(who)h(are)g
(permitted)f(to)h(allocate)f(\256les)h(in)f(pri)o(v)o(ate)g(pools.)23
b(Each)14 b(entry)f(consists)f(of)i(a)50 2632 y(pool)c(name)h(and)g(a)g
(list)e(of)i(group/user)e(names.)17 b(Each)11 b(group)f(and)h(user)f
(name)i(must)e(be)h(able)f(to)h(be)g(translated)e(into)h(a)50
2689 y(Unix)i(gid)g(or)g(uid)g(by)h(the)f(getgrnam)h(and)f(getpwnam)h
(functions.)19 b(A)13 b(groupname)f(of)h(*)g(means)g(that)f(the)g
(follo)o(wing)50 2745 y(list)g(of)h(users)f(may)i(belong)e(to)g(an)o(y)
i(group.)21 b(If)14 b(a)f(groupname)g(is)f(speci\256ed)h(a)h(check)f
(will)f(be)h(performed)g(that)g(each)50 2802 y(user)f(belongs)f(to)h
(the)h(speci\256ed)f(group.)19 b(All)12 b(users)g(in)g(a)h(group)f(may)
h(be)f(selected)g(by)g(means)h(of)g(an)f(*.)21 b(Users)12
b(who)50 2858 y(are)g(authorized)e(to)h(initiate)e(the)i(garbage)g
(collector)g(for)g(a)h(pool)e(are)i(speci\256ed)f(by)f(means)i(of)f
(the)g(G)g(option.)p eop
%%Page: 10 14
10 13 bop -64 -125 a Fn(10)976 b Ff(CHAPTER)11 b(1.)23
b(THE)11 b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)50 46
y Fd(BNF)24 b(SYNTAX)75 95 y(shiftaccount)g(::=)g(poolaccount)g({)h
(poolaccount)f(})h(END)75 145 y(poolaccount)49 b(::=)g(POOL)25
b(poolname)f(account)g({)h(account)f(})75 195 y(poolname)124
b(::=)24 b(\()h(see)g(the)f(resource)g(configuration)g(syntax)g(\))75
245 y(account)149 b(::=)49 b(groupaccount)24 b(:)h(useraccount)75
295 y(groupaccount)f(::=)49 b(*)25 b(|)g(groupname)f(|)h(*\(G\))f(|)h
(groupname\(G\))75 345 y(useraccount)49 b(::=)g(*)25
b(|)g(username)f(|)h(*\(G\))f(|)h(username\(G\))75 394
y(groupname)99 b(::=)24 b(id)75 444 y(username)124 b(::=)24
b(id)75 494 y(id)274 b(::=)24 b(\()h(see)g(the)f(resource)g
(configuration)g(syntax)g(\))50 616 y Fn(The)11 b(follo)o(wing)e
(constraints)g(apply:)104 721 y Fl(\261)23 b Fn(poolname)10
b(must)h(be)h(a)f(v)o(alid)f(pool)g(\(i.e.)17 b(pre)o(viously)10
b(declared)h(in)g(the)g(shift)f(eesource)h(con\256guration\))104
794 y Fl(\261)23 b Fn(groupname)11 b(must)f(be)i(a)f(v)o(alid)f(group)h
(name)h(on)e(the)h(local)g(host)104 866 y Fl(\261)23
b Fn(username)11 b(must)g(be)g(a)h(v)o(alid)e(user)h(name)h(on)f(the)g
(local)f(host)50 988 y Fh(EXAMPLE)77 1045 y(POOL)28 b(public)104
1101 y(ws)g(:)g(*)f(,)h(panzer\(G\))104 1158 y(*)g(:)f(root\(G\))77
1214 y(POOL)h(public)104 1270 y(*)g(:)f(*)77 1327 y(POOL)h(shift1)104
1383 y(ws)g(:)g(*)104 1440 y(c3)g(:)g(gordon)h(,)e(cane)i(,)e(hemmer)i
(,)f(trannoy)h(,)e(les)104 1496 y(*)h(:)f(root\(G\))77
1553 y(END)4 1675 y Fe(\017)c Fj(DEF)-5 b(A)n(UL)o(TS)10
b(FILE)50 1750 y Fn(Speci\256es)j(default)f(v)o(alues)g(for)i(the)e
(abo)o(v)o(e)i(con\256guration)e(\256les.)22 b(At)12
b(present)h(defaults)f(may)h(be)g(speci\256ed)g(only)f(for)50
1806 y(the)f(pool)f(attrib)o(utes.)50 1929 y Fh(BNF)28
b(SYNTAX)77 1985 y(shiftdefaults)j(::=)d(poolattribute)j(END)77
2041 y(poolattribute)g(::=)d(\()g(see)g(the)g(resource)h(configuration)
i(syntax)e(\))50 2164 y(EXAMPLE)77 2220 y(PERMANENT)77
2277 y(PRIVATE)77 2333 y(SIZE\(0\))77 2390 y(END)4 2512
y Fe(\017)23 b Fj(PR)n(OCESS)10 b(CONFIGURA)n(TION)i(FILE)50
2587 y Fn(This)f(\256le)i(de\256nes)g(the)f(con\256guration)f(of)i(the)
f(DPM)i(processes.)20 b(The)12 b(con\256guration)g(is)g(a)h(set)f(of)h
(v)o(alues)e(identi\256ed)50 2643 y(by)g(an)g(item)g(name)h(and)f(a)g
(cate)o(gory)h(name)f(\()h(see)f(getconfent\(2\))g(\).)50
2759 y Fd(BNF)24 b(SYNTAX)75 2808 y(shiftpair)99 b(::=)24
b(categorylist)75 2858 y(categorylist)g(::=)49 b(CATEGORY)24
b(categoryname)g(itemlist)p eop
%%Page: 11 15
11 14 bop -64 -125 a Ff(1.5.)28 b(DPM)12 b(CONFIGURA)-5
b(TION)11 b(SYNT)l(AX)1196 b Fn(11)125 46 y Fd({)24 b(CATEGORY)h
(categoryname)e(itemlist)h(})75 95 y(categoryname)g(::=)g(id)75
145 y(itemlist)124 b(::=)24 b(itemvalue)g(hostlist)g({)h(itemvalue)f
(hostlist)g(})75 195 y(itemvalue)99 b(::=)49 b(itemname)24
b(:)h(|)g(itemname)f(:)h(value)75 245 y(itemname)124
b(::=)24 b(id)75 295 y(hostlist)124 b(::=)49 b(\()25
b(hostvalue)f({)h(hostvalue)f(})h(\))75 345 y(hostvalue)99
b(::=)49 b(hostname)24 b(:)h(|)g(hostname)f(:)h(value)75
394 y(hostname)124 b(::=)24 b(id)75 444 y(value)199 b(::=)24
b(the)h(sequence)f(of)h(ascii-character)e(until)i(the)f(end)h(of)g
(line)75 494 y(id)274 b(::=)24 b(\()h(see)g(the)f(resource)g
(configuration)g(syntax)g(\))50 682 y(EXAMPLE)75 732
y(category)g(DPM)100 782 y(OPTIONSTYLE)g(:)g(unix)100
832 y(DEFPOOL)g(:)h(public)100 882 y(\()100 931 y(rigel)f(:)h(test)100
981 y(\))100 1031 y(DEFSIZE)f(:)h(200M)75 1081 y(category)f(RFIO)100
1131 y(IOBUFSIZ)g(:)h(131072)100 1180 y(NDPRIORITY)f(:)g(30)4
1326 y Fe(\017)f Fj(CA)n(TEGOR)o(Y)12 b(DPM)50 1407 y
Fn(This)f(is)h(the)h(list)e(of)h(items)h(required)f(by)g(the)g(dpm)h
(processes.)20 b(Each)12 b(line)g(sho)o(ws)f(the)i(item)f(name)h(follo)
o(wed)e(by)i(the)50 1464 y(v)o(alue)e(syntax)f(and)h(a)g(reference)i
(to)d(other)h(manual)g(pages.)75 1602 y Fd(OPTIONSTYLE)49
b(xwindow)24 b(|)h(unix)49 b(sfoptions\(1\))75 1652 y(DEFPOOL)g
(poolname)g(sfget\(1\),)24 b(sfrm\(1\),)g(sfsh\(1\))75
1702 y(DEFSIZE)49 b(\()25 b(see)f(sfget)h(size)f(option)h(\))49
b(sfget\(1\))75 1752 y(SFGETMODE)g(\()25 b(remote)f(|)h(local)f(\))h
(\()g(atomic)f(|)h(noatomic)f(\))h(sfdpmd\(1\),)f(sfget\(1\))75
1802 y(SFRMMODE)49 b(remote)24 b(|)h(local)49 b(sfdpmd\(1\))75
1851 y(SFSHMODE)g(remote)24 b(|)h(local)49 b(sfdpmd\(1\))75
1901 y(SFDAEMONS)g(hostname)24 b({)h(:)g(hostname)f(})49
b(sfdpmd\(1\))75 1951 y(REMOTESFSH)g(yes)24 b(|)h(no)50
b(sfdpmd\(1\))75 2001 y(RHOSTSFSH)f(hostname)g(sfdpmd\(1\))50
2146 y Fn(The)11 b(follo)o(wing)e(items)i(ha)o(v)o(e)g(no)g(reference)i
(to)d(other)h(manual)g(pages)g(b)o(ut)g(a)g(prototype)f(v)o(alue)g(is)h
(pro)o(vided.)75 2285 y Fd(TMPTIMEOUT)49 b(positive-integer)f(1)75
2334 y(TMPRETRY)h(non-negative-integer)f(10)75 2384 y(SFDEBUG)h(yes)25
b(|)f(no)50 b(no)75 2434 y(RESIDENT)f(yes)24 b(|)h(no)50
b(no)4 2579 y Fe(\017)23 b Fj(SEE)10 b(ALSO)50 2661 y
Fn(sfmake\(1\),)h(sfget\(1\),)g(sfsh\(1\),)g(sfrm\(1\),)h(sfgc\(1\),)g
(sfdpmd\(1\),)f(sfoptions\(1\))4 2768 y Fe(\017)23 b
Fj(A)n(UTHOR)50 2850 y Fn(F)o(abrizio)11 b(Cane,)h(CERN-CN)g(Di)o
(vision)d(CH-1211)h(Gene)o(v)o(a)h(23,)g(Switzerland)g(\(cane@cern)n
(vm.cern.ch\))p eop
%%Page: 12 16
12 15 bop -64 -125 a Fn(12)971 b Ff(CHAPTER)11 b(1.)28
b(THE)11 b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)-64 46
y Fi(1.6)60 b(SHIFT)14 b(DPM)h(Options)g(Style)4 173
y Fe(\017)23 b Fj(N)o(AME)50 251 y Fl(sf)o(options)10
b Fn(-)i(Shift)f(option)e(style)4 351 y Fe(\017)23 b
Fj(DESCRIPTION)50 430 y Fn(The)7 b(shift)g(dpm)h(commands)g(\()g
(sfget\(1\),)g(sfrm\(1\),)h(sfsh\(1\),)f(sfgc\(1\))g(and)g(sfdpmd\(1\))
f(\))h(and)f(the)h(shift)e(dpm)i(on\256gurator)50 486
y(\()i(sfmake\(1\))f(and)g(sfmaked\(1\))g(\))h(ha)o(v)o(e)g(an)g(help)e
(option)g(printing)g(for)h(each)h(a)o(v)o(ailable)f(option)f(a)i(line)e
(in)h(the)g(follo)o(wing)50 543 y(format:)50 621 y Fh(option-name)30
b(option-type)g(shell-enviro)q(nmen)q(t)g(option-descr)q(ipti)q(on)4
721 y Fe(\017)23 b Fj(OPTION)11 b(N)o(AME)50 800 y Fn(The)g(option)e
(name)j(format)g(speci\256es)f(ho)o(w)f(the)h(option)f(is)g(matched)i
(in)e(the)h(command)h(line:)-17 914 y(-\(n\)ame)24 b(speci\256es)11
b(that)f(only)g(the)h(\256rst)g(character)h(of)g(name)f(is)g(required)g
(\(UNIX)g(style\).)-17 991 y(-n\(ame\))24 b(speci\256es)11
b(that)f(an)o(y)i(pre\256x)f(of)g(name)h(can)g(be)f(used)f(\()i(xwindo)
o(w/vms)d(style)h(\))14 1067 y(-name)23 b(speci\256es)11
b(that)f(the)h(long)f(name)i(is)f(required.)50 1181 y(The)18
b(dpm)g(commands)g(option)f(style)g(can)i(be)f(selected)g(by)f(mean)i
(of)f(the)g(item)g(OPTIONSTYLE)g(DPM)h(\()f(see)50 1238
y(sfsyntax\(1\))10 b(\).)4 1338 y Fe(\017)23 b Fj(SEE)10
b(ALSO)50 1416 y Fn(sfmake\(1\),)h(sfsyntax\(1\),)g(sfdpmd\(1\),)g
(sfget\(1\),)g(sfrm\(1\),)h(sfsh\(1\),)f(sfgc\(1\))4
1517 y Fe(\017)23 b Fj(A)n(UTHOR)50 1595 y Fn(F)o(abrizio)11
b(Cane,)h(CERN-CN)g(Di)o(vision)d(CH-1211)h(Gene)o(v)o(a)h(23,)g
(Switzerland)g(\(cane@cern)n(vm.cern.ch\))-64 1801 y
Fi(1.7)60 b(The)14 b(SHIFT)h(Garbage)e(Collector)g(-)i(sfgc)4
1928 y Fe(\017)23 b Fj(N)o(AME)50 2006 y Fl(sfgc)11 b
Fn(-)g(the)g Fj(shift)f Fn(garbage)h(collector)4 2107
y Fe(\017)23 b Fj(SYNOPSIS)50 2185 y Fl(sfgc)11 b([)g(option)h(])4
2285 y Fe(\017)23 b Fj(DESCRIPTION)50 2364 y Fl(sfgc)15
b Fn(deletes)h(\256les)f(in)h(order)f(to)h(deallocate)f(space)h(on)f
(disk.)29 b(Not)15 b(all)g(users)h(are)g(permitted)f(to)h(use)f(the)g
(garbage)50 2420 y(collector)m(.)21 b(In)12 b(the)h(shift)f(pool)f
(access)i(control)f(\256le)h(it)f(is)g(possible)f(to)h(de\256ne)h(who)f
(can)h(run)g(the)f Fj(sfgc)g Fn(on)h(each)g(pool.)50
2477 y(The)e(options)e(can)j(be)f(grouped)f(in)h(three)g(sets)g(:)93
2591 y(1.)23 b(options)9 b(specifying)h(the)h(area)h(to)e(be)i(scanned)
93 2668 y(2.)23 b(options)9 b(specifying)h(ho)o(w)g(much)i(space)f
(must)g(be)g(deallocated)f(in)h(that)g(area)93 2744 y(3.)23
b(others)10 b(options)4 2858 y Fe(\017)23 b Fj(GR)n(OUP)10
b(1)h(-)h(Ar)n(ea)f(to)g(be)g(Scanned)p eop
%%Page: 13 17
13 16 bop -64 -125 a Ff(1.7.)28 b(THE)11 b(SHIFT)h(GARB)n(A)n(GE)f
(COLLECT)o(OR)g(-)h(SFGC)984 b Fn(13)50 46 y Fl(-p)12
b(name:)86 b Fn(Speci\256es)12 b(the)f Fj(pool)f Fn(on)h(which)g
(garbage)g(collection)f(is)h(to)g(be)h(performed.)18
b(T)l(wo)11 b(special)g Fj(names)g Fn(are)309 102 y(pro)o(vided:)23
b Fj(any)15 b Fn(to)g(garbage)g(an)o(y)g(pool)g(on)g(which)f(the)h
(client)g(is)f(authorized)h(to)f(run)h(the)g(garbage)309
159 y(collector;)8 b Fj(all)g Fn(to)f(garbage)i(all)f(pools.)14
b(If)9 b(the)f(client)g(is)f(not)h(authorized)f(to)h(garbage)h(all)f
(pools)f(selected)309 215 y(an)k(error)h(is)e(returned.)50
288 y Fl(-g)h(gr)o(oup:)80 b Fn(The)11 b(garbage)g(collection)e(is)i
(restricted)g(to)f(\256les)i(in)e(the)h(speci\256ed)g
Fj(gr)n(oup)f Fn(directory)m(.)16 b Fl(-p)c Fn(is)e(required.)50
362 y Fl(-u)i(user:)109 b Fn(The)11 b(garbage)g(collection)e(is)i
(restricted)g(to)f(\256les)i(in)e(the)h(speci\256ed)g
Fj(user)g Fn(directory)m(.)16 b Fl(-p)11 b Fn(is)g(required.)50
435 y Fl(dir)o(ectories:)38 b Fn(The)17 b(garbage)g(collection)e(is)i
(restricted)g(to)f(\256les)i(in)e(the)h(speci\256ed)g
Fj(dir)n(ectories)p Fn(.)33 b(P)o(aths)17 b(must)g(be)309
492 y(relati)o(v)o(e)9 b(to)f(the)h(current)g(directory)f(unless)g
Fl(-p)i Fn(is)f(speci\256ed,)g(when)g Fl(-u)h Fn(is)e(also)h(required)f
(and)h(the)g(paths)309 548 y(must)h(be)g(relati)o(v)o(e)g(to)g(the)g
(user)g(directory)g(in)g(the)g(speci\256ed)g(pool.)15
b(The)10 b(directory)g(list)f(must)h(be)g(at)h(the)309
604 y(end)g(of)g(the)g(command)h(line.)50 678 y Fl(-P:)201
b Fn(Normally)13 b Fj(sfgc)g Fn(selects)g(only)g(TEMPORAR)m(Y)h(pools.)
23 b(This)12 b(option)g(speci\256es)i(that)f(garbage)g(col-)309
734 y(lection)d(is)h(to)f(be)i(performed)f(e)o(v)o(en)h(if)f(the)g
(pool)f(speci\256ed)h(is)f(PERMANENT)m(.)50 841 y(EXAMPLES)50
927 y Fl(sfgc)h(-p)h(opal:)309 984 y Fn(will)e(process)h(the)f(pool)h
Fj(opal)p Fn(.)50 1046 y Fl(sfgc)g(dir1)g(dir2)g(dir3:)309
1102 y Fn(will)f(process)h(the)f(three)i(directories)e
Fj(dir1,)g(dir2)h Fn(and)g Fj(dir3)p Fn(.)50 1164 y Fl(sfgc)g(-p)h
(opal)e(-u)i(opalpr)o(od)g(data23)e(batch02f:)309 1220
y Fn(will)g(process)g(the)h(sub-directories)f(named)h
Fj(data23)f Fn(and)h Fj(batc)o(h02f)e Fn(in)i(the)g Fj(opalpr)n(od)e
Fn(user)i(directory)309 1277 y(of)g(the)g(pool)f Fj(opal)p
Fn(.)50 1339 y Fl(sfgc)h(-p)h(any)f(-g)g(ws:)309 1395
y Fn(will)18 b(process)g(the)h Fj(ws)h Fn(group)e(directory)g(in)h(an)o
(y)g(TEMPORAR)m(Y)h(pool)e(for)h(which)g(the)g(user)g(is)309
1451 y(authorised.)50 1525 y Fl(sfgc)11 b(-p)h(all:)56
b Fn(will)10 b(process)h(all)f(TEMPORAR)m(Y)i(pools.)4
1632 y Fe(\017)23 b Fj(GR)n(OUP)10 b(2)h(-)h(Space)f(Deallocated)50
1727 y Fl(-s)g(number)p 250 1727 14 2 v 17 w(unit:)309
1783 y Fn(will)j(deallocate)g Fj(number)p 737 1783 V
15 w(unit)g Fn(space)h(in)g(the)g(selected)f(area.)29
b Fj(Unit)14 b Fn(can)i(be)f Fl(G,)h(M,)f(K)h Fn(or)f(absent,)309
1840 y(speci\256ng)10 b(Gigabytes,)g(Me)o(gabytes,)h(Kilobytes)f(and)h
(bytes.)50 1902 y Fl(-t)g(days:hours:)309 1958 y Fn(will)f(deallocate)h
(\256les)g(older)f(than)h(speci\256ed.)50 2031 y Fl(-r)h(per)o(cent:)53
b Fn(will)10 b(reduce)h(the)g(space)h(used)e(by)h(the)g(speci\256ed)g
(percentage.)50 2105 y Fl(-left:)166 b Fn(implies)10
b(that)h Fl(-r)g Fn(or)g Fl(-s)h Fn(refer)g(to)f(the)f(space)i(which)e
(should)g Fl(r)o(emain)h(after)h(garbage)f(collection)p
Fn(.)50 2178 y Fl(-D:)196 b Fn(When)19 b(used)g(with)f
Fl(-left)i Fn(and)f Fl(-r)h Fn(the)f(space)g(left)g(after)h(garbage)f
(collection)f(is)h(computed)g(as)g(a)309 2235 y(percentage)11
b(of)g(the)g(physical)f(de)o(vice.)50 2308 y Fl(-B)i(size:)116
b Fn(Speci\256es)17 b(that)f(\256les)g(lar)o(ger)h(than)f
Fj(size)g Fn(should)f(\256rst)i(be)f(remo)o(v)o(ed.)34
b(If)17 b(no)f Fj(size)g Fn(is)g(speci\256ed,)j(the)309
2364 y(default)10 b(size)h(for)g(the)g(pool)f(speci\256ed)h(by)g(the)g
Fl(-p)h Fn(option)d(will)i(be)g(used.)50 2438 y Fl(-k)h(weight:)63
b Fn(The)10 b Fj(sfgc)f Fn(makes)h(a)g(list)f(of)h(the)f(\256les)h
(present)g(in)f(the)h(selected)f(area.)17 b(The)10 b(list)f(is)g
(sorted)g(as)h(a)h(function)309 2494 y(of:)17 b(selected)12
b(time)g(of)g(the)g(\256le)g(\()g(last)g(modi\256cation)f(or)h(access)g
(time)g(\),)h(the)f(size)g(of)g(the)f(\256le)i(and)f(the)309
2551 y(speci\256ed)f(\252weight".)17 b(By)12 b(default)f(k)g(is)g(100.)
18 b(The)11 b(permissible)g(v)o(alues)g(of)g Fj(par)o(am)g
Fn(are)i(in)e(the)g(range)309 2607 y(0)g(to)g(500.)309
2672 y(The)g(function)f(used)g(is:)309 2737 y Fh(f)27
b(=)h(t)f(-)h(k/100)h(*)e(log\(s/1024\)*S)q(ECD)q(AY)309
2802 y Fn(where)11 b(t)g(is)f(the)h(time,)g(s)g(is)f(the)h(size,)g(k)g
(is)f(the)h(parameter)g(and)g(SECD)n(A)-5 b(Y)11 b(is)g(the)f(number)h
(of)g(seconds)309 2858 y(in)g(one)g(day)m(.)p eop
%%Page: 14 18
14 17 bop -64 -125 a Fn(14)971 b Ff(CHAPTER)11 b(1.)28
b(THE)11 b(SHIFT)g(DISK)h(POOL)f(MAN)n(A)n(GER)50 46
y Fn(If)f(no)f(option)f(of)i(this)e(group)h(is)g(speci\256ed)h(and)f
Fl(-p)i Fn(is)e(the)g(only)g(option)f(of)i(group)e(1)i(to)f(be)h
(speci\256ed,)g(then)f(the)g(garbage)50 102 y(collector)h(threshholds)f
(declared)j(in)e(the)h(shift)f(pool)h(con\256guration)e(\256les)i(are)h
(used.)50 177 y(EXAMPLES)50 263 y Fl(sfgc)f(-p)h(opal)e(-s)i(5G:)309
319 y Fn(will)e(deallocate)h(5)g(Gigabytes)e(in)i(the)g(pool)f
Fj(opal)p Fn(.)50 381 y Fl(sfgc)h(-p)h(any)f(-t)g(21:0:)309
437 y Fn(will)f(delete)h(\256les)g(older)g(than)f(3)h(weeks)g(from)h
(an)o(y)f(pools)f(the)h(user)g(is)g(authorised)f(to)g(process.)50
499 y Fl(sfgc)h(-p)h(test)f(-r)h(40)f(-left)g(-D:)309
556 y Fn(the)g(space)g(used)g(by)g(the)f(pool)h Fj(test)f
Fn(is)h(reduced)g(to)g(40\045)50 617 y Fl(sfgc)g(-p)h(test)f(-g)g(ws)g
(-s)g(10G)h(-left:)309 674 y Fn(the)f(space)g(occupied)f(by)h(group)g
Fj(ws)g Fn(in)g(the)g(pool)f Fj(test)g Fn(is)h(reduced)g(to)g(10)g
(Gigabytes.)50 747 y Fl(sfgc)g(-p)h(any:)34 b Fn(will)17
b(use)g(the)h(threshholds)e(and)h(\256le)i(size)e(limit)h(declared)g
(in)f(the)h(pool)f(con\256guration)f(\256le,)k(and)309
803 y(process)10 b(all)h(pools)f(for)i(which)e(the)h(client)f(is)h
(authorized)f(to)h(run)g(the)g(garbage)g(collector)m(.)50
865 y Fl(sfgc)g(-p)h(opal)e(-B)i(180:)309 921 y Fn(will)h(use)h(the)g
(threshholds)e(declared)i(in)g(the)g(pool)f(con\256guration)g(\256le)h
(and)g(delete)g(all)g(\256les)g(bigger)309 978 y(than)c(180Me)o
(gabytes.)4 1084 y Fe(\017)23 b Fj(GR)n(OUP)10 b(3)h(-)h(Other)e
(Options)50 1191 y Fl(-M:)186 b Fn(the)11 b(last)f(modi\256cation)g
(time)i(is)e(used)h(to)g(sort)f(\256le.)50 1264 y Fl(-A:)196
b Fn(the)11 b(last)f(access)i(time)f(is)g(used)f(to)h(sort)f(\256le)i
(\()f(this)f(is)h(the)g(DEF)m(A)m(UL)l(T)f(\).)50 1337
y Fl(-v:)206 b Fn(\(v)o(erbose\))11 b(-)h(all)e(\256les)i(remo)o(v)o
(ed)g(are)f(listed.)50 1410 y Fl(-T)m(:)202 b Fn(the)11
b(\256les)g(are)h(not)e(really)h(deleted)g(b)o(ut)f(just)g(selected)h
(and)g(listed.)50 1483 y Fl(-i:)216 b Fn(the)11 b(user)g(is)f(asked)h
(for)g(a)h(con\256rmation)e(before)i(each)g(\256le)f(is)g(deleted.)50
1556 y Fl(-L:)199 b Fn(the)11 b(sub-directories)e(are)j(not)f(scanned)f
(\()i(a)f(directory)g(list)f(is)g(required)h(\).)50 1663
y(EXAMPLES)50 1749 y Fl(sfgc)g(-T)h(-M)f(-t)h(0:0)f(.:)309
1805 y Fn(will)e(list)g(all)h(\256les)g(in)g(the)g(current)g(directory)
g(and)g(its)f(sub-directories)g(sorted)h(by)g(modi\256cation)f(time.)50
1870 y Fl(sfgc)i(-p)h(test)f(-M)h(-v)f(-u)h(mark)f(-s)g(2G)h
Fe(j)f Fl(tee)h(mask.2g:)309 1926 y Fn(will)f(deallocate)h(2)h
(Gigabytes)d(from)j(the)g(directory)e(of)i(user)f Fj(mark)g
Fn(in)g(the)h(pool)e Fj(test)p Fn(.)20 b(The)12 b(\256les)h(are)309
1983 y(sorted)f(by)g(modi\256cation)f(time)i(and)f(the)h(list)e(of)i
(\256les)f(selected)g(is)g(sa)o(v)o(ed)h(in)f(the)g('mark.2g')i(\256le)
e(and)309 2039 y(output)d(on)i(the)g(screen.)4 2146 y
Fe(\017)23 b Fj(POOL)11 b(A)o(CCESS)g(CONTR)n(OL)50 2221
y Fn(In)16 b(the)f(pool)g(access)h(control)e(\256le)i(it)f(is)g
(possible)f(to)h(specify)h(for)f(each)i(pool)d(the)i(names)g(of)f
(users)h(authorised)e(to)50 2277 y(perform)e(garbage)f(collection.)k
(This)10 b(is)h(checked)f(each)i(time)f Fl(sfgc)g Fn(is)g(called)g
(with)f(the)h(follo)o(wing)e(e)o(xceptions:)104 2371
y Fl(\261)23 b Fn(if)15 b(a)g(list)f(of)g(directories)g(is)h(gi)o(v)o
(en)f(then)g(the)h(normal)g(UNIX)f(permission)g(rules)g(are)i(used)e
(unless)g Fl(-p)h Fn(is)g(also)150 2428 y(speci\256ed.)104
2501 y Fl(\261)23 b Fn(if)11 b Fl(-u)g Fn(is)g(used)f(and)h(the)g(user)
g(speci\256ed)g(is)f(the)h(name)h(of)f(the)f(client.)16
b(This)10 b(allo)o(ws)g Fl(sfgc)h Fn(to)f(be)h(used)g(to)g(clean)g(up)
150 2557 y(the)g(user')m(s)g(o)o(wn)g(\256les.)4 2651
y Fe(\017)23 b Fj(EXAMPLES)50 2727 y Fl(sfgc)10 b Fn(may)h(be)g(used)f
(interacti)o(v)o(ely)f(or)i(inserted)f(in)g(the)g Fj(cr)n(on)g
Fn(tables.)16 b(Here)11 b(are)g(some)g(e)o(xamples)f(of)h(ho)o(w)f
Fl(sfgc)g Fn(can)h(be)50 2783 y(used.)50 2858 y Fl(sfgc)g(-p)h(all)p
eop
%%Page: 15 19
15 18 bop -64 -125 a Ff(1.7.)28 b(THE)11 b(SHIFT)h(GARB)n(A)n(GE)f
(COLLECT)o(OR)g(-)h(SFGC)984 b Fn(15)50 46 y(is)13 b(a)h(simple)f(way)g
(to)g(process)g(all)g(pools)f(using)g(the)i(threshholds)d(and)i(size)h
(limits)e(speci\256ed)h(in)g(the)h(con\256guration)50
102 y(\256les.)50 177 y Fl(sfgc)d(-p)h(all)e(-t)i(28:00)e(-B)i(200M)50
234 y(sfgc)f(-p)h(all)50 309 y Fn(deletes)g(\256rst)h(\256les)f(older)g
(than)h(4)f(weeks)h(and)f(then)g(uses)g(the)h(v)o(alues)f(from)h(the)f
(con\256guration)g(tables)g(if)g(additional)50 365 y(space)f(must)g(be)
g(freed.)50 440 y(A)g(simple)g(kind)f(of)h(quota)f(can)i(be)f
(implemented)g(as)g(follo)o(ws.)50 516 y Fl(sfgc)g(-p)h(pool1)e(-g)h
(grp1)g(-r)h(40)f(-left)g(-D)h(-B)f(200M)50 572 y(sfgc)g(-p)h(pool1)e
(-g)h(grp2)g(-r)h(25)f(-left)g(-D)h(-B)f(100M)50 628
y(sfgc)g(-p)h(pool1)e(-g)h(grp3)g(-r)h(15)f(-left)g(-D)h(-B)f(100M)50
685 y(sfgc)g(-p)h(pool)50 760 y Fn(This)d(\256rst)h(reduces)g(the)g
(space)h(occupied)e(by)h(each)h(of)f(the)g(three)g(groups)f
(speci\256ed)h(to)g(the)g(gi)o(v)o(en)f(percentages)h(of)h(the)50
817 y(total)f(space)h(in)g(the)g(pool.)16 b(Then)10 b(the)h(garbage)g
(collector)g(is)f(run)h(using)f(the)h(standard)f(defaults.)p
eop
%%Page: 16 20
16 19 bop -64 406 a Fp(Chapter)22 b(2)-64 641 y(T)-8
b(ape)22 b(Copy)g(Scheduling)-64 913 y Fn(This)13 b(chapter)h
(describes)f(the)g(user)h(interface)f(to)h(the)f Fj(shift)f
Fn(tape)i(copy)f(scheduler)m(.)24 b(The)13 b(user)h(commands)g
(described)f(are:)-64 969 y Fl(tpr)o(ead)g Fn(and)f Fl(tpwrite)p
Fn(.)19 b(The)11 b(system)g(programs)h(used)f(by)h(these)f(commands,)h
Fl(rtcopyd)p Fn(,)h Fl(cptpdsk)g Fn(and)f Fl(cpdsktp)p
Fn(,)h(are)g(also)-64 1026 y(described.)-64 1220 y Fi(2.1)60
b(User)14 b(Commands)4 1372 y Fe(\017)23 b Fj(N)o(AME)50
1446 y Fn(tpread)11 b(-)g(schedule)g(the)g(copying)e(of)i(data)g(from)h
(tape)f(to)g(disk.)50 1502 y(tpwrite)f(-)h(schedule)g(the)g(copying)e
(of)i(data)g(from)h(disk)e(to)h(tape.)4 1594 y Fe(\017)23
b Fj(SYNOPSIS)50 1696 y Fl(tpr)o(ead)h Fn([-v)11 b(vsn])g([-V)g(vid])g
([-g)g(de)o(vice-group-name])g([-l)g(label)p 1103 1696
14 2 v 16 w(type])f([-d)i(density])e([-q)h(sequence])150
1760 y([-f)h(\256leid])f([-F)g(record-format])h([-L)g(record-length])e
([-b)i(block-size])e([-N)h(nread])h([-G])150 1824 y([-S)g(serv)o(er])g
(\256lenames)50 1895 y Fl(tpwrite)23 b Fn([-v)11 b(vsn])g([-V)g(vid])g
([-g)g(de)o(vice-group-name])g([-l)g(label)p 1116 1895
V 16 w(type])g([-d)g(density])f([-q)h(sequence])150 1958
y([-f)h(\256leid])f([-t)g(retention-period])e([-F)j(record-format])g
([-L)f(record-length])g([-b)g(block-size])f([-G])150
2022 y([-S)i(serv)o(er])g(\256lenames)4 2124 y Fe(\017)23
b Fj(DESCRIPTION)50 2198 y Fn(These)12 b(commands)h(pro)o(vide)g(an)g
(interface)f(to)h(the)f Fj(shift)g Fn(tape)h(copy)f(scheduler)m(.)21
b(The)13 b(commands)g(are)g(e)o(x)o(ecuted)h(by)50 2255
y(users)h(on)h(a)g Fj(shift)f Fn(cpu)h(serv)o(er)n(,)i(and)e(normally)f
(result)g(in)h(the)g(scheduling)e(of)i(a)g(tape)g(copy)f(operation,)i
(using)e(the)50 2311 y(cptpdsk)10 b(and)h(cpdsktp)f(commands)i(which)f
(will)f(e)o(x)o(ecute)i(on)g(a)f Fj(shift)f Fn(tape)i(serv)o(er)n(,)h
(copying)c(data)j(to)f(or)g(from)h(a)g(disk)50 2368 y(\256le)f(on)g(a)h
Fj(shift)d Fn(disk)h(serv)o(er)m(.)50 2442 y(If)k(the)g(tape)h(is)e
(labelled,)i(the)e(record)i(format)g(options)d(supplied)g(on)i(a)h
(tpwrite)e(command)h(will)f(be)i(written)e(to)h(the)50
2498 y(tape)d(label.)16 b(These)11 b(options)e(may)j(be)f(used)g(to)g
(o)o(v)o(erride)g(the)g(label)g(data)g(when)g(using)e(tpread.)50
2572 y(At)g(least)g(one)g(of)h Fj(vsn)p Fn(,)g Fj(vid)f
Fn(must)g(be)g(speci\256ed.)16 b(Options)8 b(may)i(be)f(supplied)f(in)h
(an)o(y)h(order)n(,)g(b)o(ut)f(must)g(all)g(come)h(before)50
2629 y(the)h(\256rst)g Fj(\256lename)p Fn(.)4 2720 y
Fe(\017)23 b Fj(P)l(ARAMETERS)50 2802 y Fl(-b)12 b(block-size:)309
2858 y Fn(Speci\256es)f(the)g(maximum)h(block)e(length)g(in)h(bytes.)
917 2958 y(16)p eop
%%Page: 17 21
17 20 bop -64 -125 a Ff(2.1.)28 b(USER)12 b(COMMANDS)1472
b Fn(17)50 46 y Fl(-d)12 b(density:)53 b Fn(speci\256es)13
b(the)g(density)f(of)h(the)g(tape)h(v)o(olume,)g(which)e(may)i(be)g
(1600)e(or)i(6250)e(bpi.)23 b(This)12 b(option)g(is)309
102 y(v)o(alid)e(only)g(for)h(half-inch)g(round)f(tapes.)50
179 y Fl(-f)h(\256leid:)107 b Fn(speci\256es)8 b(the)h(\256le)g
(identi\256er)f(for)h(the)g(tape)f(label.)16 b(\256leid)8
b(will)g(be)h(stored)f(in)g(labels)g(which)g(are)i(written,)309
235 y(and)j(checked)g(against)f(labels)h(which)f(are)j(read.)23
b(It)14 b(can)f(be)h(speci\256ed)f(in)g(lo)o(wercase)g(or)g(uppercase)
309 292 y(letters,)i(ho)o(we)o(v)o(er)n(,)h(the)e(system)g
(automatically)f(con)n(v)o(erts)h(lo)o(wercase)h(letters)e(to)i
(uppercase)f(letters)309 348 y(\(ANSI)9 b(requirement\).)15
b(T)n(railing)8 b(blanks)f(are)j(remo)o(v)o(ed.)16 b(If)9
b(the)g(result)e(is)h(longer)g(than)g(17)h(characters,)309
404 y(the)j(last)h(17)f(characters)h(are)h(used.)21 b(If,)14
b(after)f(an)o(y)g(trailing)e(blanks)h(are)i(remo)o(v)o(ed,)g(the)f
(result)f(is)g(less)309 461 y(than)f(17)h(characters,)g(it)g(is)f
(padded)g(with)g(blanks.)18 b(In)12 b(the)f(case)i(of)e(multiple)g
(\256les)h(a)g(series)g(of)g Fj(\256leid)p Fn(s)309 517
y(may)e(be)f(gi)o(v)o(en,)h(separated)f(by)g(\252:"s.)15
b(These)9 b(apply)g(to)g(the)g(tape)g(\256les)h(in)e(the)i(speci\256ed)
f(order)m(.)16 b(If)10 b(there)309 574 y(are)15 b(more)g(\256les)g
(than)f(\256leids,)h(the)g(last)f(\256leid)g(will)g(be)g(used)h(for)f
(all)h(e)o(xcess)f(\256les.)27 b(Thus,)15 b(a)h(single)309
630 y(\256leid)11 b(may)g(be)h(gi)o(v)o(en)e(which)h(applies)f(to)g
(all)h(\256les)g(on)g(the)g(tape.)50 707 y Fl(\256lenames:)62
b Fn(The)11 b(\256lenames)h(parameter)g(speci\256es)f(one)g(or)g(more)h
Fj(nfs)p 1226 707 14 2 v 15 w(pathname)p Fn(s)e(as)h(described)f(in)h
(Section)g(1.1.)309 763 y(Multiple)f(\256lenames)h(are)h(used)f(for)g
Fj(multi\256le)f(tape)g(copying)h Fn(described)f(belo)o(w)m(.)309
830 y(Each)i(\256le)g(must)f(e)o(xist.)19 b(Normally)11
b(the)h(user)g(will)e(ha)o(v)o(e)j(pre)o(viously)d(used)h(sfget)g
(\(see)i(Chapter)f(1\))g(to)309 886 y(locate)f(an)g(e)o(xisting)f
(\256le)h(or)g(create)h(a)g(ne)o(w)f(one.)50 951 y Fl(-F)g(r)o(ecord-f)
o(ormat:)309 1008 y Fn(speci\256es)g(the)g(record)g(format)h(of)f(the)g
(data)g(on)g(the)g(tape.)16 b(It)11 b(may)h(be)f(one)g(of)g(the)g
(follo)o(wing:)309 1084 y Fl(U:)211 b Fn(Blocks)7 b(may)g(be)h(of)f(v)o
(ariable)g(length.)14 b(A)8 b(single)e(logical)g(record)i(on)f(disk)f
(corresponds)568 1141 y(to)14 b(one)h(tape)g(block.)27
b(The)15 b(disk)f(copy)g(of)h(the)f(\256le)h(is)g(formatted)g
(according)f(to)h(the)568 1197 y(con)n(v)o(ention)10
b(for)h(sequential)f(F)o(ortran)h(unformatted)g Fg(I)p
Fn(/)p Fg(O)p Fn(.)309 1264 y Fl(F:)216 b Fn(Fix)o(ed)11
b(length)f(records.)568 1320 y(On)i(output)e(\()p Fj(tpwrite)p
Fn(\))i(each)g(tape)g(block)g(created)g(is)g(e)o(xactly)g
Fj(bloc)o(k-size)f Fn(bytes)g(long)568 1377 y(\(see)d(the)f(-L)h
(option\),)g(with)f(the)g(e)o(xception)g(of)h(the)g(last)f(block,)h
(which)f(may)h(be)g(shorter)m(.)568 1433 y(On)f(input)g(\()p
Fj(tpr)n(ead)p Fn(\))g(data)h(is)f(copied)g(from)i(tape)e(to)h(disk)e
(as)i(a)g(continuous)e(data)i(stream.)568 1490 y(This)i(format)h(is)g
(suitable)f(for)h(use)g(with)f(direct)h(access)h(F)o(ortran)f
(unformatted)g Fg(I)p Fn(/)p Fg(O)p Fn(.)50 1545 y Fl(-g)g(de)o
(vice-gr)o(oup-name:)309 1602 y Fn(requests)f(a)i(de)o(vice)f(from)h
(an)g(installation)c(de\256ned)j(set)h(of)f(\252de)o(vice)g(groups".)16
b(This)10 b(may)i(de\256ne,)g(for)309 1658 y(e)o(xample,)g(that)e(a)i
(cartridge)f(tape)g(in)g(the)g(Computer)g(Centre)g(tape)g(robot)g
(should)e(be)j(used)e(\(SMCF\).)50 1735 y Fl(-G:)194
b Fn(speci\256es)11 b(that)h(the)f(tape)h(should)e(be)i(read)g(or)g
(written)f(under)h(a)g(standard)f(group)g(account)g(\(speci\256ed)309
1791 y(in)g(a)g Fj(shift)f Fn(con\256guration)g(\256le\).)50
1856 y Fl(-l)h(label)p 186 1856 V 16 w(type:)309 1913
y Fn(speci\256es)e(the)g(type)f(of)i(label)f(which)f(should)g(be)h
(checked)g(or)g(generated.)16 b(The)9 b(follo)o(wing)e(label)i(types)
309 1969 y(are)j(supported.)309 2046 y Fl(al:)208 b Fn(ANSI)11
b(label)309 2112 y Fl(blp:)181 b Fn(bypass)10 b(label)h(processing)e
(\(input)h(only\))309 2179 y Fl(nl:)206 b Fn(no)11 b(label)309
2245 y Fl(sl:)213 b Fn(standard)10 b(IBM)i(label)50 2301
y Fl(-L)g(r)o(ecord-length:)309 2357 y Fn(speci\256es)g(the)g(record)h
(length)e(for)i(\256x)o(ed-length)f(record)h(format)f(\256les.)21
b(It)12 b(is)g(optional)f(on)h(input)f(and)309 2414 y(required)g(on)f
(output.)15 b(See)d(the)f Fl(-F)h Fn(option.)50 2490
y Fl(-N)f(nr)o(ead:)73 b Fn(If)11 b(speci\256ed)g(only)g
Fj(nr)n(ead)f Fn(records)h(will)g(be)g(copied.)50 2546
y Fl(-q)h(sequence:)309 2602 y Fn(speci\256es)g(the)g(\256le)h
(sequence)f(number\(s\))h(of)f(the)g(tape)h(\256le\(s\))g(to)f(be)g
(copied)g(or)g(created.)21 b(This)12 b(may)309 2659 y(be)g(speci\256ed)
g(as)g(the)g(letter)g Fl(n)p Fn(,)h(implying)e(the)h(\256le)g(after)h
(the)e(current)i(end)p 1500 2659 V 16 w(of)p 1554 2659
V 16 w(tape)f(\(i.e.)20 b(append)12 b(the)309 2715 y(\256le)f(to)g(the)
g(tape\).)17 b(Multiple)9 b(\256les)j(may)f(be)h(speci\256ed)e(using)g
(the)h(follo)o(wing)e(syntax:)309 2792 y Fl(f1-f2:)153
b Fn(Files)11 b Fj(f1)f Fn(to)h Fj(f2)g Fn(inclusi)o(v)o(e.)309
2858 y Fl(f1-:)191 b Fn(Files)11 b Fj(f1)f Fn(to)h(the)g(last)f(\256le)
i(on)f(the)g(tape.)p eop
%%Page: 18 22
18 21 bop -64 -125 a Fn(18)1143 b Ff(CHAPTER)12 b(2.)22
b(T)l(APE)11 b(COPY)h(SCHEDULING)309 31 y Fl(f1-f2,f6,f8-f11:)568
87 y Fn(A)f(series)g(of)g(non-consecuti)o(v)o(e)e(ranges)i(of)h
(\256les.)309 151 y Fl(n:)219 b Fn(Append)10 b(one)h(\256le)g(to)g(the)
g(tape.)309 214 y Fl(n)p Fc(x)p Fl(:)196 b Fn(Append)10
b Fj(x)i Fn(\256les)f(to)f(the)h(tape.)309 278 y Fl(u:)219
b Fn(Position)9 b(the)i(tape)g(by)g(\256leid.)309 348
y(F)o(or)h(further)f(details)f(of)h(multi\256le)f(tape)h(copying)f(see)
h(belo)o(w)m(.)50 419 y Fl(-S)h(server:)71 b Fn(speci\256es)11
b(the)g(node)f(name)i(of)f(a)h(speci\256c)f(tape)g(serv)o(er)h(which)e
(should)g(be)h(used.)50 477 y Fl(-t)g(r)o(etention-period:)309
534 y Fn(speci\256es)g(the)g(tape)g(retention)f(period)g(in)h(days)g
(\(default)f(0\).)50 604 y Fl(-v)h(vsn:)129 b Fn(speci\256es)12
b(the)g(v)o(olume)h(serial)f(number)g(of)h(the)f(tape.)21
b(In)13 b(the)f(case)h(of)g(a)f(multi-v)o(olume)g(\256le)h(a)g(series)
309 661 y(of)e Fj(vsn)p Fn(s)g(may)g(be)h(gi)o(v)o(en,)e(separated)h
(by)g(\252:"s,)g(in)g(the)g(order)g(in)g(which)f(the)h(tapes)g(are)h
(to)e(be)i(used.)50 731 y Fl(-V)f(vid:)124 b Fn(speci\256es)11
b(the)g(tape)g(VID)g(if)g(dif)o(ferent)g(from)g(the)g(VSN.)h(In)f(the)g
(case)h(of)f(multi-v)o(olume)f(\256les)h(a)h(series)309
788 y(of)i Fj(VID)p Fn(s)g(may)h(be)g(gi)o(v)o(en,)g(separated)f(by)g
(\252:"s,)h(in)f(the)g(order)g(in)g(which)g(the)g(tapes)g(are)h(to)f
(be)g(used.)309 844 y(When)d(-v)g(and)g(-V)g(are)h(both)e(used,)h(each)
h Fj(vsn)f Fn(must)g(be)g(matched)g(by)g(a)h Fj(VID)f
Fn(in)g(the)f(same)i(order)m(.)50 945 y(Default)e(v)o(alues)g(are)i(as)
g(follo)o(ws.)50 1046 y Fl(-b)g(32760:)77 b Fn(block-size,)10
b(unless)g(the)h(-L)h(option)d(is)i(speci\256ed)g(on)g(output)e(when)i
(the)g(default)f(is)h Fj(r)n(ecor)n(d-length)50 1117
y Fl(-d)h(6250:)100 b Fn(half-inch)10 b(tape)h(density)50
1187 y Fl(-F)g(U:)157 b Fn(record)11 b(format)50 1257
y Fl(-g)g(CAR)n(T)m(:)71 b Fn(de)o(vice)11 b(group)f(name)50
1328 y Fl(-l)h(sl:)174 b Fn(label)11 b(type)50 1398 y
Fl(-q)h(1:)169 b Fn(\256le)11 b(sequence)g(number)50
1469 y Fl(-t)g(0:)180 b Fn(tape)11 b(retention)f(period.)4
1570 y Fe(\017)23 b Fj(COPYING)12 b(MUL)o(TIFILE)f(T)n(APES)50
1644 y Fn(Multi\256le)f(tapes)h(can)h(be)f(copied)f(to)h(or)g(from)h
(one)f(or)g(more)h(disk)e(\256les.)50 1717 y(The)17 b
Fl(-q)g(sequence)i Fn(option)c(speci\256es)i(a)h(list)d(of)j(\256le)f
(sequence)g(numbers)g(of)g(the)g(tape)g(\256les.)34 b(The)17
b(list)f(must)g(be)50 1774 y(speci\256ed)c(in)g(ascending)g(order)m(.)
21 b(In)13 b(the)f(case)h(of)g(copying)e(from)i(disk)f(to)g(tape,)h
(the)f(list)g(of)g(\256le)h(sequence)g(numbers)50 1830
y(must)e(be)g(contiguous,)e(and)i(the)g(form)h Fj(f1-)f
Fn(may)g(not)g(be)g(used.)50 1904 y(The)g Fl(\256lenames)g
Fn(parameter)h(speci\256es)f(one)g(or)g(more)h(disk)e(\256les.)50
1978 y(During)g(the)g(copy)h(operation,)f(when)g(the)h(end)g(of)g(the)g
(input)e(\256le)i(is)g(encountered)f(and)h(there)g(is)f(another)h
(input)e(\256le)j(in)50 2034 y(the)e(list,)h(the)f(system)g(closes)h
(the)f(current)h(\256le)g(and)g(opens)f(the)h(ne)o(xt)f(input)g
(\256le.)16 b(If)c(the)e(output)g(\256le)h(is)f(not)g(the)h(last)f
(\(or)50 2091 y(only\))g(one)i(in)f(the)g(list)f(the)h(system)g(also)g
(closes)f(the)i(current)f(output)f(\256le)h(and)h(opens)e(the)h(ne)o
(xt)h(one.)17 b(Thus,)11 b(multiple)50 2147 y(input)f(\256les)h(can)g
(be)h(copied)e(into)g(one)h(or)g(a)h(series)f(of)g(output)f(\256les.)50
2221 y(Example:)50 2336 y Fh(tpread)29 b(-v)f(XX1234)g(-q)g(1-2,5)56
b(/shiftmnt/ds5)q(k03)q(/p23)q(f1/o)q(pal)q(/tau)q(/sam)q(p1)77
2392 y(/shiftmnt/ds5)q(k03/)q(p23)q(f1/o)q(pal/)q(tau)q(/sam)q(pres)q
(t})50 2507 y Fn(will)10 b(copy)g(the)h(\256rst)g(\256le)h(from)f(tape)
g(XX1234)f(into)g(samp1,)i(and)f(the)g(second)f(and)h(\256fth)h
(\256les)f(into)f(samprest.)50 2580 y(On)i(input)f(from)j(labelled)d
(tapes,)i(the)f(format)h(\256elds)g(in)f(the)g(labels)g(of)h(each)g
(\256le)g(are)g(used)f(unless)f(o)o(v)o(erriden)i(by)f(an)50
2637 y(e)o(xplicit)f(option)f(\(-F)l(,)j(-L,)f(-b\).)19
b(All)11 b(label)g(options)f(e)o(xcept)i Fj(\256leid)f
Fn(may)h(be)g(speci\256ed)g(only)e(once)i(for)g(multi\256le)f(tapes,)50
2693 y(and)g(apply)f(to)h(all)g(the)g(tape)g(\256les)g(read)g(or)h
(written.)4 2784 y Fe(\017)23 b Fj(ERR)n(OR)10 b(CODES)50
2858 y Fn(The)h(commands)g(return)g(0)g(if)g(successful,)g(otherwise)f
(a)i(number)f(specifying)e(the)i(error)h(encountered,)f(as)g(follo)o
(ws:)p eop
%%Page: 19 23
19 22 bop -64 -125 a Ff(2.2.)23 b(SYSTEM)12 b(COMMANDS)1414
b Fn(19)50 46 y Fh(1)27 b(User)i(error)50 102 y(2)e(System)i(error)50
159 y(3)e(Unknown)j(error)50 215 y(4)d(Internal)j(error)50
326 y Fn(Other)11 b(error)g(messages)g(may)h(be)f(generated)g(by)g(the)
g(tape)g(serv)o(er)n(,)h(and)f(return)g(to)g(the)g(user)g(in)g(stderr)m
(.)-64 521 y Fi(2.2)60 b(System)14 b(Commands)-64 676
y Fq(2.2.1)51 b(rtcopyd)4 782 y Fe(\017)23 b Fj(N)o(AME)50
857 y Fn(rtcopyd)10 b(-)h(Remote)h(tape)f(copy)f(daemon)4
950 y Fe(\017)23 b Fj(SYNOPSIS)50 1025 y Fn(/usr/local/bin/)o(rtcop)o
(yd)8 b([-dls])j([-p)g(port])4 1118 y Fe(\017)23 b Fj(DECSRIPTION)50
1193 y Fl(rtcopyd)13 b Fn(is)f(the)g(daemon)h(handling)e(remote)h(tape)
h(copy)e(operations.)19 b(It)13 b(is)f(used)g(with)f(the)h
(corresponding)f Fl(tpr)o(ead)50 1250 y Fn(and)g Fl(tpwrite)h
Fn(client)e(commands.)50 1325 y Fl(rtcopyd)i Fn(is)e(usually)g(started)
h(with)f(the)h Fh(-s)h Fn(option)d(from)j(the)f(machine)g(startup)f
(scripts:)50 1399 y Fh(/etc/rc.local)15 b Fn(or)c Fh(/etc/init.d/S)q
(xxrt)q(copy)k Fn(with)10 b(the)h Fh(-s)50 1474 y Fn(It)h(may)h(also)f
(be)g(started)g(by)f(the)h(internet)g(services)g(daemon)g(\(see)h
Fl(inetd)g(\(8\))p Fn(.)20 b Fl(rtcopyd)13 b Fn(will)e(autofork)g
(itself)h(when)50 1531 y(not)e(started)h(by)g Fl(inetd)p
Fn(.)50 1606 y Fl(rtcopyd)g Fn(listens)e(for)i(requests)f(on)g(the)h
Fl(rtcopy)g Fn(internet)f(port)g(number)g(as)h(indicated)f(by)g(the)g
(/etc/services)g(\256le)h(-)g(see)50 1662 y Fh(services)29
b(\(5\))p Fn(.)50 1737 y Fl(rtcopyd)20 b Fn(operates)f(by)h(forking)e
(a)i(subprocess)e(for)i(a)g(client)f(for)h(which)e(a)i(tape)g(de)o
(vice)f(is)g(reserv)o(ed)h(and)g(the)50 1793 y(appropriate)11
b(copy)f(operation)h(is)g(issued.)16 b(All)11 b(errors)g(messages)h
(are)g(logged)e(in)h Fl(/usr/spool/rtcopyd.err)h Fn(and)f(sent)50
1850 y(to)g(the)f(originator)m(.)4 1943 y Fe(\017)23
b Fj(A)n(UTHORIZA)n(TION)50 2018 y Fn(The)10 b Fl(rtcopyd)i
Fn(daemon)f(requires)f(that)g(the)h(cooperating)e(hosts)h(share)h(the)f
(same)h(user)g(information)f(databases.)15 b(The)50 2074
y(uid,)10 b(gid)g(and)h(usernames)g(must)f(be)h(the)f(same)h(on)g(the)f
(two)g(cooperating)f(hosts.)15 b(Additionaly)m(,)9 b(uids)g(belo)o(w)h
(100)g(will)50 2131 y(not)g(be)i(serviced.)50 2206 y
Fl(rtcopyd)j Fn(will)e(only)g(service)h(hosts)f(listed)g(in)h
Fh(/etc/rtcopyd.)q(host)q(s)j Fn(\256le)e(it)f(it)f(e)o(xists.)25
b(Otherwise)13 b(no)h(host)50 2262 y(restriction)c(is)g(applied.)4
2356 y Fe(\017)23 b Fj(OPTIONS)50 2461 y Fl(-d:)204 b
Fn(Used)11 b(for)g(deb)o(ugging.)50 2533 y Fl(-l:)216
b Fn(T)n(urns)10 b(on)h(logging)e(information)h(in)h
Fh(/usr/spool/rt)q(copy)q(/rtc)q(opy)q(d.lo)q(g)50 2606
y Fl(-s:)211 b Fn(Starts)11 b(the)g(daemon)g(as)g(a)h(standalone)d
(serv)o(er)j(instead)e(of)i(using)d Fl(inetd)j(\(8C\))p
Fn(.)50 2678 y Fl(-p)g(")f(port":)48 b Fn(Speci\256es)11
b(an)h(alternate)e(port)h(number)g(to)g(be)g(used)g(\(useful)g(for)g
(deb)o(ugging\).)4 2783 y Fe(\017)23 b Fj(CONFIGURA)n(TION)50
2858 y Fl(rtcopyd)12 b Fn(does)e(not)h(require)g(an)o(y)g
(con\256guration)f(parameters.)p eop
%%Page: 20 24
20 23 bop -64 -125 a Fn(20)1138 b Ff(CHAPTER)12 b(2.)27
b(T)l(APE)11 b(COPY)h(SCHEDULING)4 46 y Fe(\017)23 b
Fj(FILES)50 161 y Fh(/usr/local/bin)q(/rtc)q(opy)q(d)50
217 y(/usr/spool/RTC)q(OPY)50 274 y(/usr/spool/rtc)q(opy/)q(rtc)q(opyd)
q(.log)50 330 y(/usr/spool/rtc)q(opy/)q(rtc)q(opyd)q(.err)50
387 y(/etc/rtcopyd.h)q(osts)50 443 y(/etc/shift.con)q(f)50
500 y(/etc/services)4 615 y Fe(\017)g Fj(SEE)10 b(ALSO)50
689 y Fn(The)h(SHIFT)h(Reference)g(manual,)50 763 y(inetd)e(\(8C\),)i
(services)f(\(5\),)h(tpread)f(\(l\),)g(tpwrite)f(\(l\))4
854 y Fe(\017)23 b Fj(BUGS)50 928 y Fl(rtcopyd)d Fn(currently)e(does)g
(not)h(check)g(whether)f(the)h(remote)h(hosts)d(is)i(in)f(the)h
Fh(hosts.equiv)j Fn(remote)e(hosts)50 984 y(authentication)9
b(database.)50 1058 y(The)i(log)f(\256les)h(tend)g(to)g(gro)o(w)f(o)o
(v)o(er)i(time)f(and)g(a)h(re)o(gular)f(cleanup)g(should)f(be)h
(performed.)50 1132 y Fl(rtcopyd)19 b Fn(creates)g(v)o(arious)e
(temporary)h(\256les)g(in)g(the)g Fh(/usr/spool/R)q(TCOP)q(Y)j
Fn(working)c(directory)m(.)37 b(Process)50 1189 y(numbers)11
b(are)h(used)e(in)h(the)g(name)h(of)f(those)f(\256les,)i(b)o(ut)e
(there)i(errors)f(due)g(to)g(reuse)g(of)g(a)h(same)f(\256le)h(with)e
(another)h(uid.)4 1280 y Fe(\017)23 b Fj(NO)n(TES)50
1354 y Fn(The)15 b(location)f(of)i Fl(rtcopyd)g Fn(\256les)f(may)h(be)f
(altered)h(by)f(recompiling)f(the)h(rtcopy)f(subdirectory)g(source)h
(tree)h(after)50 1411 y(modifying)10 b(the)h Fh(rtcopy.mk)i
Fn(make)f(\256le.)50 1526 y Fh(/usr/spool/rtc)q(opy/)q(rtc)q(opyd)q
(.log)50 1582 y(/usr/spool/rtc)q(opy/)q(rtc)q(opyd)q(.err)50
1639 y(/etc/rtcopy.ho)q(sts)222 b(-)27 b(the)h(host)h(authorization)h
(file)50 1695 y(/usr/spool/RTC)q(OPY)222 b(-)27 b(the)h(working)h
(directorylin)q(g)h(the)e(rtcopy)4 1810 y Fe(\017)23
b Fj(A)n(UTHORS)50 1884 y Fn(Jean-Philippe)10 b(Baud,)h(Felix)g
(Hassine,)g(Frederic)h(Hemmer)n(,)h(Antoine)c(T)n(rannoy)50
1958 y(CERN-CN)j(Di)o(vision)d(CH-1211)h(Gene)o(v)o(a)h(23,)g
(Switzerland)-64 2130 y Fq(2.2.2)51 b(cptpdsk,)11 b(cpdsktp)-64
2266 y Fn(These)h(routines)e(are)i(used)g(by)f(the)g(remote)i(tape)e
(copy)g(daemon)h Fl(rtcopyd)p Fn(.)19 b(The)o(y)11 b(will)g(not)g
(normally)g(be)h(used)f(directly)g(by)-64 2322 y(a)h(user)m(.)4
2469 y Fe(\017)23 b Fj(N)o(AME)50 2543 y Fl(cptpdsk,)12
b(cpdsktp)g Fn(-)g(\(remote)f(tape)g(copy\))f(copies)g(data)h(between)f
(a)h(local)g(tape)f(and)h(a)g(remote)g(\(or)g(local\))g(disk)f(\256le.)
4 2634 y Fe(\017)23 b Fj(SYNOPSIS)50 2735 y Fl(cptpdsk)12
b Fe(j)f Fl(cpdsktp)38 b Fn([-v)14 b(vsn])f([-V)g(vid])g([-g)h(de)o
(vice-group-name])f([-l)h(label)p 1349 2735 14 2 v 16
w(type])f([-d)g(density])g([-q)g(sequence])150 2792 y([-f)f(\256leid])
150 2848 y([-t)f(retention-period])e([-F)j(record-format])g([-L)g
(record-length])e([-b)h(block-size])g([-N)g(nread])h(\256lenames)p
eop
%%Page: 21 25
21 24 bop -64 -125 a Ff(2.2.)28 b(SYSTEM)12 b(COMMANDS)1409
b Fn(21)4 46 y Fe(\017)23 b Fj(DESCRIPTION)50 121 y Fn(cptpdsk)10
b(and)h(cpdsktp)e(copy)i(data)g(from)h(tape)f(to)g(disk)f(or)h(disk)f
(to)h(tape.)16 b(The)o(y)c(e)o(x)o(ecute)f(on)g(the)g(computer)g(to)g
(which)50 177 y(the)k(tape)g(is)g(attached,)i(b)o(ut)e(can)g(access)h
(a)g(local)f(or)g(remote)h(disk)e(\256le.)30 b(In)16
b(the)f(latter)g(case)h(the)f Fj(Remote)g(F)n(ile)g(I/O)50
234 y Fn(routines)10 b(will)g(be)h(used)g(if)g(a)o(v)o(ailable.)50
309 y(The)o(y)g(use)g Fj(tpmnt)f Fn(on)h(the)g(local)f(machine)i(to)e
(allocate)h(a)h(unit,)e(mount)h(the)g(tape,)g(and)g(handle)g(labels.)50
384 y(The)g(parameters)h(are)g(thes)e(same)i(as)f(those)f(de\256ned)i
(in)e(tpread)h(and)g(tpwrite.)4 478 y Fe(\017)23 b Fj(ERR)n(OR)10
b(RECO)n(VER)o(Y)50 553 y Fn(In)j(general)f(the)g(copy)g(programs)h
(perform)g(no)f(error)h(reco)o(v)o(ery)h(\(the)e(tape)h(daemon,)g(tape)
g(dri)o(v)o(er)f(and)h(controller)e(of)50 609 y(course)g(attempt)g(to)f
(reco)o(v)o(er)j(from)e(medium)h(and)f(operational)f(errors\).)50
685 y(The)h(command)h(returns)e(0)h(if)g(successful,)g(otherwise)f(a)i
(number)f(specifying)e(the)i(error)h(encountered.)p eop
%%Page: 22 26
22 25 bop -64 406 a Fp(Chapter)22 b(3)-64 643 y(T)-8
b(ape)22 b(Staging)f(Softwar)n(e)-64 914 y Fn(This)9
b(chapter)i(describes)e(the)h(user)g(interface)g(to)g(the)g(SHIFT)h(T)l
(ape)g(Stager)f(and)g(the)g(operation)f(of)i(the)f(tape)g(stager)g
(daemon.)-64 1110 y Fi(3.1)60 b(stagein,)14 b(stageout,)g(stagewrt)g(-)
h(copy)g(\256les)f(between)g(tape)h(and)g(disk)4 1231
y Fe(\017)23 b Fj(N)o(AME)50 1306 y Fl(stagein,)11 b(stageout,)g
(stagewrt)23 b Fn(copy)10 b(\256les)h(from)h(tape)f(to)g(disk)f(or)h
(from)h(disk)e(to)g(tape)4 1399 y Fe(\017)23 b Fj(SYNOPSIS)50
1474 y Fl(stagein)11 b Fn([-b)g(max)p 343 1474 14 2 v
17 w(block)p 462 1474 V 15 w(size])g([-d)g(density])f([-F)i(record)p
979 1474 V 17 w(format])f([-f)h(\256le)p 1258 1474 V
17 w(id])e([-G)i(])f([-g)h(de)o(vice)p 1620 1474 V 16
w(group)p 1743 1474 V 15 w(name])50 1548 y([-L)f(record)p
238 1548 V 17 w(length])f([-l)h(label)p 538 1548 V 16
w(type])g([-N)g(nread])h([-o])f([-p)g(pool])g([-q)g(\256le)p
1234 1548 V 17 w(sequence)p 1418 1548 V 15 w(number])h([-S)g(tape)p
1742 1548 V 16 w(serv)o(er])50 1623 y([-s)f(size])g([-T)h(])f([-U)h
(fun])f([-u)g(user])g([-V)h(visual)p 818 1623 V 15 w
(identi\256er\(s\)])e([-v)i(v)o(olume)p 1272 1623 V 16
w(serial)p 1387 1623 V 15 w(number\(s\)])g Fj(\256les)50
1754 y Fl(stageout)f Fn([-b)g(max)p 368 1754 V 17 w(block)p
487 1754 V 15 w(size])g([-d)h(density])e([-F)h(record)p
1004 1754 V 17 w(format])h([-f)f(\256le)p 1283 1754 V
17 w(id])g([-G])g([-g)h(de)o(vice)p 1634 1754 V 15 w(group)p
1756 1754 V 16 w(name])50 1829 y([-K])f([-L)h(record)p
328 1829 V 16 w(length])e([-l)i(label)p 628 1829 V 15
w(type])f([-N)h(nread])f([-n)g(])h([)f(-o)h(])f([-p)h(pool])e([-q)h
(\256le)p 1437 1829 V 17 w(sequence)p 1621 1829 V 16
w(number])50 1904 y([-S)h(tape)p 196 1904 V 16 w(serv)o(er])g([-s)f
(size])g([-t)g(retention)p 722 1904 V 15 w(period)p 854
1904 V 16 w(in)p 906 1904 V 16 w(days])f([-U)i(fun])f([-u)g(user])h
([-V)f(visual)p 1544 1904 V 15 w(identi\256er\(s\)])50
1978 y([-v)g(v)o(olume)p 253 1978 V 16 w(serial)p 368
1978 V 16 w(number\(s\)])g Fj(\256les)50 2110 y Fl(stagewrt)g
Fn([-b)g(max)p 373 2110 V 17 w(block)p 492 2110 V 15
w(size])g([-d)h(density])e([-F)h(record)p 1009 2110 V
17 w(format])h([-f)f(\256le)p 1288 2110 V 17 w(id])g([-G)g(])h([-g)f
(de)o(vice)p 1650 2110 V 16 w(group)p 1773 2110 V 15
w(name])50 2184 y([-K)17 b(])g([-L)g(record)p 356 2184
V 16 w(length])f([-l)h(label)p 667 2184 V 16 w(type])f([-N)h(nread])g
([-n)g(])g([-o)g(])g([-p)g(pool])f([-q)h(\256le)p 1521
2184 V 17 w(sequence)p 1705 2184 V 16 w(number])g([-S)50
2241 y(tape)p 129 2241 V 16 w(serv)o(er])50 2315 y([-s)10
b(size])f([-t)h(retention)p 422 2315 V 15 w(period)p
554 2315 V 15 w(in)p 605 2315 V 16 w(days])f([-U)h(fun)g(])g([-V)g
(visual)p 1081 2315 V 15 w(identi\256er\(s\)])f([-v)g(v)o(olume)p
1531 2315 V 16 w(serial)p 1646 2315 V 16 w(number\(s\)])h
Fj(\256les)4 2408 y Fe(\017)23 b Fj(DESCRIPTION)50 2483
y Fn(These)11 b(commands)g(send)f(a)i(request)e(to)h(a)g(stager)g
(daemon)g(which)f(checks)h(and)g(updates)f(its)g(catalog)h(and)g(e)o(v)
o(entually)50 2540 y(e)o(x)o(ecutes)g(a)h Fl(tpr)o(ead)g
Fn(or)f Fl(tpwrite)h Fn(command.)50 2614 y Fj(\256le)j
Fn(may)g(be)h(a)f(local)g(path,)h(the)f(combination)f
Fj(mac)o(hine:fullpath)e Fn(\(NFS)k(syntax\),)g(a)f(full)g(path)g
(starting)e(with)i(the)50 2671 y(NFS)p 136 2671 V 17
w(R)n(OO)n(T)m(,)c(i.e.)17 b(/shift,)10 b(or)h(absent)g(if)g(a)h(F)o
(ortran)f(unit)f(number)h(is)g(speci\256ed.)50 2745 y(F)o(or)k
Fl(stagein)p Fn(,)g(if)g(pools)e(ha)o(v)o(e)i(been)f(con\256gured)g
(and)g Fl(-p)h(NOPOOL)h Fn(is)e(not)g(speci\256ed,)h(the)f(\256le)h(is)
f(allocated)g(in)g(a)50 2802 y(pool)c(of)g(which)g(the)h(space)f(is)h
(managed)f(by)h(the)f(stage)g(daemon)h(and)g(a)g(symbolic)e(link)h(is)g
(created.)17 b(The)10 b(internal)g(\256le)50 2858 y(name)i(is)e(then)h
(in)g(the)g(form)917 2958 y(22)p eop
%%Page: 23 27
23 26 bop -64 -125 a Ff(3.1.)28 b(ST)l(A)n(GEIN,)11 b(ST)l(A)n(GEOUT)m
(,)f(ST)l(A)n(GEWR)m(T)h(-)h(COPY)g(FILES)f(BETWEEN)g(T)l(APE)f(AND)h
(DISK)296 b Fn(23)869 46 y Fl(vid.fseq.label)50 169 y
Fn(If)12 b(the)g(tape)f(\256le)h(has)g(already)g(been)g(staged)f(and)g
Fj(\256le)h Fn(is)f(dif)o(ferent)g(from)i(pre)o(vious)d(job,)i(a)g
(symbolic)f(link)f(is)i(created.)50 225 y(If)j(no)f(pool)f(has)i(been)f
(con\256gured)g(or)h Fl(-p)g(NOPOOL)g Fn(is)f(speci\256ed,)i(the)e
(tape)g(is)g(staged)g(directly)f(in)h(the)h(location)50
281 y(gi)o(v)o(en)10 b(by)h Fj(\256le)g Fn(and)g(no)g(space)g
(management)h(is)f(done.)16 b(F)o(or)c Fl(stagewrt)p
Fn(,)f Fj(\256le)g Fn(must)g(e)o(xist)f(and)h(not)g(be)g(empty)m(.)4
375 y Fe(\017)23 b Fj(OPTIONS)50 459 y Fl(-b)12 b(blocksize:)309
516 y Fn(Speci\256es)f(the)g(maximum)h(block)e(size.)17
b(Default)10 b(v)o(alue)h(is)f(32760.)50 588 y Fl(-d)i(density:)53
b Fn(1600)9 b(or)i(6250)e(for)i(round)e(\(IBM)j(3420\))d(tapes,)i
(38000)e(for)i(standard)e(IBM)j(3480)d(cartridges,)i(38KC)309
645 y(for)c(3480)g(cartridges)g(with)f(compaction)g(\(IDRC\),)h(38KD)g
(for)g(dou)o(ble)g(den)o(sit)o(y)g(IBM)g(3490)g(cartri)o(dges,)309
701 y(38KDC)k(for)g(3490)f(cartridges)h(with)f(compaction)g(\(IDRC\),)j
(8200)d(or)i(8500)e(for)h(Exabytes.)50 774 y Fl(-F)g(r)o(ecfm:)78
b Fn(Speci\256es)11 b(the)g(record)h(format)f(of)g(the)g(data)g(on)g
(the)g(tape.)17 b(It)11 b(may)g(be)h(one)f(of)g(the)g(follo)o(wing:)309
850 y Fl(U:)211 b Fn(Blocks)14 b(may)h(be)f(of)h(unkno)o(wn)d(length.)
25 b(A)15 b(single)e(logical)g(record)i(on)f(disk)g(corre-)568
907 y(sponds)e(to)h(one)g(tape)h(block.)23 b(The)13 b(disk)g(copy)f(of)
i(the)f(\256le)h(is)f(formatted)h(according)568 963 y(to)j(the)g(con)n
(v)o(ention)g(for)h(sequential)e(FOR)m(TRAN)i(unformatted)f(I/O.)h
(This)e(is)i(the)568 1019 y(default.)309 1084 y Fl(F:)216
b Fn(On)12 b(output)g(with)f Fl(stagewrt)i Fn(each)g(tape)g(block)f
(created)h(is)g(e)o(xactly)f Fj(bloc)o(ksize)g Fn(bytes)568
1140 y(long)h(\(See)i(the)f(b)h(option\))d(with)i(the)g(e)o(xception)f
(of)i(the)f(last)f(block)h(which)f(may)i(be)568 1197
y(shorter)m(.)568 1253 y(On)7 b(input)g Fl(stagein)16
b Fn(data)8 b(is)f(copied)h(from)g(tape)g(to)g(disk)f(as)h(a)g
(continuous)e(data)i(stream.)568 1310 y(This)i(format)h(is)g(suitable)f
(for)h(use)g(with)f(direct)h(access)h(F)o(ortran)f(unformatted)g(I/O.)
50 1386 y Fl(-f)g(\256d:)153 b Fn(Speci\256es)11 b(the)f(\256leid)g(in)
h(HDR1.)16 b(If)11 b(more)g(than)f(17)h(characters)g(long,)f(only)g
(the)g(last)g(17)g(are)i(taken.)j(It)309 1443 y(is)d(then)h(con)n(v)o
(erted)f(to)h(upper)g(case.)22 b(F)o(or)13 b Fl(stagein,)h
Fj(\256d)e Fn(is)h(checked)f(against)g(the)g(\256d)h(in)g(HDR1.)22
b(F)o(or)309 1499 y Fl(stagewrt)p Fn(,)13 b(if)f(the)g(-f)h(parameter)h
(is)d(absent,)i(the)f(internal)g Fl(rtcopy)g Fn(tape)h(pathname)f(is)g
(used)g(instead.)309 1556 y(In)k(the)f(case)h(of)g(multiple)f(\256les,)
i(a)f(series)g(of)g(\256le)g(identi\256ers)e(may)j(be)f(gi)o(v)o(en,)g
(separated)g(by)f(":"s.)309 1612 y(These)d(apply)g(to)f(the)i(tape)f
(\256les)g(in)g(the)g(speci\256ed)g(order)m(.)21 b(If)13
b(there)g(are)g(more)g(\256les)f(than)g(identi\256ers,)309
1669 y(the)f(last)g(one)h(will)f(be)h(used)f(for)h(all)g(remaining)f
(\256les.)18 b(Thus,)12 b(a)g(single)f(\256le)h(identi\256er)f(may)h
(be)g(gi)o(v)o(en)309 1725 y(which)e(applies)g(to)h(all)g(\256les)g(on)
g(the)g(tape.)50 1798 y Fl(-G:)194 b Fn(Speci\256es)14
b(that)f(the)g(tape)h(copy)e(operations)h(should)f(be)h(issued)g(on)g
(the)h(tape)f(serv)o(er)h(by)g(the)f('group)309 1854
y(user'.)j(A)c('group)e(user')h(may)h(be)f(de\256ned)g(for)h(each)f
(group)g(in)g Fl(/etc/shift.conf)p Fn(.)17 b(F)o(or)12
b(e)o(xample:)907 1937 y(GRPUSER)g(ws)f(opalprod)50 2020
y Fl(-g)g(dgn:)122 b Fn(Requests)13 b(a)h(de)o(vice)f(from)i(an)f
(installation)d(de\256ned)i(set)h(of)g("de)o(vice)f(groups".)22
b(It)14 b(must)g(match)g(the)309 2076 y(de)o(vice)9 b(group)g
(speci\256ed)h(in)f(TMS)i(\(if)f(installed\).)k(If)c(this)f(parameter)i
(is)e(missing,)g(the)h(v)o(alue)f(is)g(taken)309 2133
y(from)j(TMS)f(or)h(defaults)d(to)i(CAR)m(T)m(.)50 2205
y Fl(-K:)194 b Fn(K)o(eeps)10 b(\256le)h(on)f(disk.)16
b(If)11 b(this)e(option)h(is)g(absent,)g(the)h(disk)e(\256le)i(is)f
(remo)o(v)o(ed)i(as)f(soon)e(as)i(the)g Fl(stagewrt)309
2262 y Fn(operation)f(is)h(successful.)50 2334 y Fl(-L)h(lr)o(ecl:)102
b Fn(Speci\256es)11 b(the)g(logical)f(record)i(length)e(for)h(\256x)o
(ed)h(length)e(record)h(format)h(\256les.)50 2407 y Fl(-l)f(lab)p
153 2407 14 2 v 16 w(type:)45 b Fn(Speci\256es)9 b(the)f(type)g(of)h
(label)f(which)g(should)f(be)i(checked)f(or)h(generated.)16
b(The)8 b(follo)o(wing)f(label)h(types)309 2463 y(are)k(supported:)309
2536 y Fl(al:)208 b Fn(ANSI)11 b(label)309 2600 y Fl(blp:)181
b Fn(bypass)10 b(label)h(processing)e(\(input)h(only\))309
2665 y Fl(nl:)206 b Fn(no)11 b(label)309 2729 y Fl(sl:)213
b Fn(standard)10 b(IBM)i(label)309 2802 y(It)h(must)g(match)g(the)g
(label)g(type)g(speci\256ed)g(in)g(TMS)h(\(if)f(installed\).)21
b(If)14 b(this)e(parameter)i(is)f(missing,)309 2858 y(the)e(v)o(alue)f
(is)h(taken)f(from)i(TMS)g(or)f(defaults)f(to)h Fl(sl)p
Fn(.)p eop
%%Page: 24 28
24 27 bop -64 -125 a Fn(24)1117 b Ff(CHAPTER)11 b(3.)28
b(T)l(APE)11 b(ST)l(A)n(GING)g(SOFTW)-5 b(ARE)50 46 y
Fl(-N)11 b(nr)o(ead:)73 b Fn(If)11 b(speci\256ed,)h(only)e
Fj(nr)n(ead)h Fn(records)g(will)f(be)h(copied.)50 122
y Fl(n:)219 b Fn(Implies)11 b(ne)o(w)h(\256leid)f(\(only)g(v)o(alid)g
(on)g(output\).)17 b(The)12 b(e)o(xisting)e(\256leid)h(is)h(not)f
(checked)g(b)o(ut)g(if)h(the)g(ne)o(w)309 178 y(\256le)f(would)f(o)o(v)
o(erwrite)h(an)g(e)o(xisting)f(one,)h(the)g(old)g(\256le)g(e)o(xpiry)g
(date)g(is)g(checked.)50 254 y Fl(-o:)206 b Fn(Implies)8
b(old)h(\256leid.)15 b(The)9 b(e)o(xisting)f(\256leid)g(is)h(checked)f
(if)h(the)g(option)f Fl(-f)h Fn(is)g(also)f(speci\256ed.)16
b(On)9 b(output,)309 311 y(if)i(the)g(ne)o(w)g(\256le)g(would)f(o)o(v)o
(erwrite)h(an)g(e)o(xisting)f(one,)h(the)g(old)g(\256le)g(e)o(xpiry)g
(date)g(is)g(checked.)50 376 y Fl(-p)h(poolname:)309
432 y Fn(Allocates)g(the)h(\256le)g(in)f(the)h(pool)f
Fj(poolname)p Fn(.)21 b(This)12 b(may)h(also)g(be)g(speci\256ed)g(thru)
f(the)h(en)n(vironment)309 489 y(v)o(ariable)d(ST)l(A)n(GE)p
609 489 14 2 v 16 w(POOL.)50 565 y Fl(-q)i(fseq:)114
b Fn(Speci\256es)12 b(the)f(\256le)h(sequence)f(number\(s\))h(of)g(the)
f(tape)g(\256le\(s\))h(to)f(be)h(copied)f(or)h(created.)18
b(Default)11 b(is)309 621 y(1.)16 b(Multiple)10 b(\256les)h(may)h(be)f
(speci\256ed)g(using)f(the)h(follo)o(wing)e(syntax:)309
701 y Fl(f1-f2:)153 b Fn(Files)11 b(f1)g(to)f(f2)i(inclusi)o(v)o(e.)309
768 y Fl(f1-:)191 b Fn(Files)11 b(f1)g(to)f(last)h(\256le)g(on)g(the)g
(tape.)309 834 y Fl(f1-f2,)g(f4,f6-:)29 b Fn(A)11 b(series)g(of)g
(nonconsecuti)o(v)o(e)e(ranges)i(of)h(\256les.)309 900
y Fl(n:)219 b Fn(Append)10 b(one)h(\256le)g(to)g(the)g(tape)g(\(output)
f(only\).)309 967 y Fl(n)h(x:)185 b Fn(Append)10 b(x)h(\256les)g(to)g
(the)g(tape.)309 1033 y Fl(u:)219 b Fn(Position)9 b(the)i(tape)g(by)g
(\256d.)309 1099 y Fl(u)g(x:)185 b Fn(Position)9 b(the)i(tape)g(by)g
(\256d)g(on)g(x)g(dif)o(ferent)g(\256les)g(\(input)f(only\).)50
1180 y Fl(-S)i(server:)71 b Fn(Speci\256es)11 b(that)g(the)g(tape)g
(copy)f(operation)g(has)h(to)g(be)g(issued)f(on)h(the)g(tape)g(serv)o
(er)h Fj(server)p Fn(.)50 1256 y Fl(-s)f(size:)129 b
Fn(If)11 b(speci\256ed,)h(only)e Fj(size)g Fn(Mbytes)h(will)f(be)i
(copied.)50 1332 y Fl(-T)m(:)202 b Fn(Does)11 b(not)f(check)h(trailer)g
(labels.)50 1408 y Fl(-t)g(days:)114 b Fn(Retention)8
b(period)g(in)h(days.)15 b(A)9 b(\256le)g(may)h(be)f(o)o(v)o(erwritten)
f(only)g(if)h(it)g(is)f(e)o(xpired.)16 b(Default)8 b(is)g(0,)i(which)
309 1465 y(means)h(that)g(the)g(\256le)g(may)h(be)f(o)o(v)o(erwritten)g
(immediately)m(.)50 1541 y Fl(-U)g(fun:)120 b Fn(F)o(ortran)13
b(unit)f(number)m(.)23 b(This)12 b(is)h(internally)f(con)n(v)o(erted)h
(to)f(a)i(local)e(path)h Fl(f)o(ort.fun)p Fn(.)24 b(The)13
b Fl(-U)g Fn(option)309 1597 y(and)e(the)g Fj(\256le)g
Fn(parameter)h(may)f(be)h(both)e(speci\256ed)h(b)o(ut)f(at)h(least)g
(one)g(of)g(them)h(must)e(be)i(present.)50 1674 y Fl(-u)g(user:)109
b Fn(A)12 b(\256le)g(allocated)f(in)g(a)h(pool)f(will)g(be)h(stored)f
(in)g(a)h(subdirectory)e Fj(user)p Fn(.)18 b(This)11
b(may)h(also)g(be)g(speci\256ed)309 1730 y(thru)7 b(the)h(en)n
(vironment)f(v)o(ariable)g(ST)l(A)n(GE)p 987 1730 V 16
w(USER.)i(The)f(default)f(subdirectory)f(name)j(is)e
Fl(stage)p Fn(.)15 b Fj(user)p Fn(.)309 1787 y(must)c(be)g(a)g(v)o
(alid)g(user)g(name)g(and)g(belong)g(to)f(the)h(same)h(group)e(as)i
(the)e(requestor)m(.)50 1863 y Fl(-V)h(vid:)124 b Fn(Speci\256es)11
b(the)g(tape)g(VID)g(if)f(dif)o(ferent)h(from)g(the)g(VSN)g(.)h(In)f
(the)f(case)i(of)f(multiv)o(olume)e(\256les)i(a)h(series)309
1919 y(of)f(VID')m(s)g(may)h(be)f(gi)o(v)o(en,)g(separated)g(by)g
(":"s,)f(in)h(the)g(order)g(in)g(which)f(the)h(tapes)g(are)h(to)f(be)g
(used.)50 1995 y Fl(-v)g(vsn:)129 b Fn(Speci\256es)12
b(the)g(v)o(olume)g(serial)g(number)g(of)g(the)g(tape.)19
b(In)13 b(the)e(case)i(of)f(a)h(multi-v)o(olume)e(\256le)h(a)h(series)
309 2052 y(of)g(VSN')m(s)g(may)h(be)f(gi)o(v)o(en,)g(separated)g(by)f
(":"s,)h(in)f(the)h(order)g(in)g(which)f(the)h(tapes)f(are)i(to)e(be)h
(used.)309 2108 y(When)e(-v)g(and)g(-V)g(are)h(both)e(used,)h(each)h
(VSN)f(must)g(be)g(matched)h(by)e(a)i(VID)f(in)g(the)g(same)h(order)m
(.)4 2222 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 2357
y Fh(0)27 b(Ok.)50 2413 y(1)g(Bad)h(parameter.)50 2470
y(2)f(System)i(error.)50 2526 y(4)e(Configuratio)q(n)j(error.)-64
2731 y Fi(3.2)60 b(stageclr)n(-)13 b(r)o(emo)o(v)o(e)g(staged)i
(\256les)4 2858 y Fe(\017)23 b Fj(N)o(AME)11 b Fl(stageclr)g
Fn(-)g(remo)o(v)o(e)h(staged)f(\256les)p eop
%%Page: 25 29
25 28 bop -64 -125 a Ff(3.3.)28 b(ST)l(A)n(GEPUT)11 b(-)g(COPY)h(DISK)f
(FILES)h(T)o(O)f(T)l(APES)1014 b Fn(25)4 46 y Fe(\017)23
b Fj(SYNOPSIS)50 123 y Fl(stageclr)11 b Fn([-c])h([-l)f(label)p
436 123 14 2 v 16 w(type])f([-m)i(minfree])g([-p)g(pool])e([-q)h
(\256le)p 1095 123 V 17 w(sequence)p 1279 123 V 16 w(number])g([-V)h
(visual)p 1645 123 V 14 w(identi\256er\(s\)])50 256 y
Fl(stageclr)f Fn([-c])h([-m)g(minfree])f([-P)h(pathname])50
390 y Fl(stageclr)f Fn([-c])h([-i])f([-m)h(minfree])4
488 y Fe(\017)23 b Fj(DESCRIPTION)50 565 y Fl(stageclr)11
b Fn(remo)o(v)o(es)i(staged)e(\256les)h(from)g(disk)f(if)g(the)h
(requestor)f(is)g(in)g(the)h(same)g(group)f(as)h(the)g(user)f(who)g
(created)i(the)50 622 y(disk)d(\256le.)4 720 y Fe(\017)23
b Fj(OPTIONS)50 831 y Fl(-c:)209 b Fn(conditional)11
b(clear)m(.)24 b(If)14 b(this)f(option)e(is)i(speci\256ed)g(the)h(remo)
o(v)o(e)g(operation)f(is)f(done)h(only)g(if)g(the)g(free)309
887 y(space)c(in)g(the)g(pool)f(is)h(lo)o(wer)g(than)g(a)g(minimum.)16
b(This)9 b(minimum)g(may)h(be)f(speci\256ed)g(thru)g(the)g(option)309
944 y Fl(-m)p Fn(.)50 1019 y Fl(-i:)216 b Fn(the)11 b(list)f(of)h(full)
f(pathnames)h(to)g(be)g(remo)o(v)o(ed)h(is)f(read)g(from)h(stdin.)50
1082 y Fl(-l)f(label)p 186 1082 V 16 w(type:)309 1139
y Fn(Label)g(type:)k Fl(al,)c(nl,)h(sl)e(or)i(blp)p Fn(.)50
1214 y Fl(-m)f(minfr)o(ee:)30 b Fn(speci\256es)14 b(the)h(minimum)g
(free)g(space)g(to)g(be)f(a)o(v)o(ailable)h(in)f(the)g(pool.)27
b(This)14 b(is)g(a)h(percentage.)28 b(F)o(or)309 1270
y(e)o(xample,)10 b Fl(-m)g(10)e Fn(corresponds)g(to)h(10The)g(default)f
(minfree)h(v)o(alue)g(is)g(taken)f(from)i(the)f(con\256guration)309
1327 y(\256le)i Fl(/etc/STGCONFIG)p Fn(.)50 1381 y Fl(-P)g(pathname:)
309 1438 y Fn(gi)o(v)o(es)f(the)h(full)g(path)f(name)i(of)f(the)g
(\256le)h(to)e(be)i(pur)o(ged,)f(either)g(internal)f(name)i(or)f(user)g
(link)f(name.)50 1501 y Fl(-p)i(poolname:)309 1558 y
Fn(restricts)e(the)h(action)f(to)h(a)h(gi)o(v)o(en)e(pool.)50
1622 y Fl(-q)i(\256le)p 163 1622 V 16 w(sequence)p 352
1622 V 18 w(number\(s\):)309 1679 y Fn(Multiple)e(\256le)i(numbers)g
(may)g(be)g(separated)f(by)h(commas)g(or)g(speci\256ed)f(as)h(a)g
(range)g(using)e(the)i(dash)309 1735 y(as)f(separator)m(.)50
1810 y Fl(-V)g(vid\(s\):)76 b Fn(restricts)10 b(the)h(search)g(to)g
(\256les)g(corresponding)f(to)g(gi)o(v)o(en)h(vids.)k(Multiple)10
b(vids)g(will)g(be)i(separated)f(by)309 1867 y(colons.)4
1978 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 2109 y Fh(0)27
b(Ok.)50 2166 y(1)g(Bad)h(parameter.)50 2222 y(2)f(System)i(error.)50
2279 y(4)e(Configuratio)q(n)j(error.)-64 2481 y Fi(3.3)60
b(stageput)15 b(-)f(copy)h(disk)g(\256les)g(to)f(tapes)4
2606 y Fe(\017)23 b Fj(N)o(AME)50 2683 y Fl(stageput)11
b Fn(-)h(copy)e(disk)g(\256les)h(to)g(tapes)4 2781 y
Fe(\017)23 b Fj(SYNOPSIS)50 2858 y Fl(stageput)11 b Fn([-G])h([-U)f
(fun])g([)h(\256les)f(])p eop
%%Page: 26 30
26 29 bop -64 -125 a Fn(26)1117 b Ff(CHAPTER)11 b(3.)28
b(T)l(APE)11 b(ST)l(A)n(GING)g(SOFTW)-5 b(ARE)4 46 y
Fe(\017)23 b Fj(DESCRIPTION)50 122 y Fl(stageput)15 b
Fn(copies)f(disk)g(\256les)g(to)h(tape.)27 b(It)15 b(can)g(only)e(be)i
(used)g(after)g(a)g Fl(stageout)f Fn(command.)28 b(The)15
b Fj(\256le)f Fn(parameter)50 179 y(must)e(match)g(the)g(one)g(used)g
(on)g Fl(stageout)p Fn(.)19 b Fj(\256le)12 b Fn(may)h(be)f(a)h(local)e
(path,)i(the)f(combination)e Fj(mac)o(hine:fullpath)g
Fn(\(NFS)50 235 y(syntax\))g(or)h(a)h(full)e(path)h(starting)f(with)g
(the)h(NFS)p 833 235 14 2 v 16 w(R)n(OO)n(T)m(,)h(i.e.)17
b(/shift.)4 332 y Fe(\017)23 b Fj(OPTIONS)50 441 y Fl(-G:)194
b Fn(Speci\256es)14 b(that)f(the)g(tape)h(copy)e(operations)h(should)f
(be)h(issued)g(on)g(the)h(tape)f(serv)o(er)h(by)g(the)f('group)309
498 y(user'.)j(A)c('group)e(user')h(may)h(be)f(de\256ned)g(for)h(each)f
(group)g(in)g Fl(/etc/shift.conf)p Fn(.)17 b(F)o(or)12
b(e)o(xample:)907 583 y(GRPUSER)g(ws)f(opalprod)50 669
y Fl(-U)g(fun:)120 b Fn(F)o(ortran)11 b(unit)f(number)m(.)18
b(This)10 b(is)g(internally)g(con)n(v)o(erted)h(to)g(a)g(local)g(path)g
Fl(f)o(ort.fun)p Fn(.)309 734 y(The)18 b(-U)f(option)g(and)g(the)h
(\256le)g(parameter)h(are)f(mutually)f(e)o(xclusi)o(v)o(e)g(b)o(ut)g
(one)h(of)g(them)g(must)f(be)309 791 y(present.)4 900
y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 1030 y Fh(0)27
b(Ok.)50 1086 y(1)g(Bad)h(parameter.)50 1142 y(2)f(System)i(error.)50
1199 y(4)e(Configuratio)q(n)j(error.)-64 1399 y Fi(3.4)60
b(stageqry)14 b(-)h(gi)o(v)o(e)f(the)h(status)g(of)g(all)f(staged)h
(tapes)4 1523 y Fe(\017)23 b Fj(N)o(AME)50 1600 y Fl(stageqry)11
b Fn(-)g(gi)o(v)o(e)g(the)g(status)f(of)h(all)g(staged)g(tapes)4
1696 y Fe(\017)23 b Fj(SYNOPSIS)50 1773 y Fl(stageqry)11
b Fn([-a])h([-l])f([-P])h([-p)g(pool])e([-u])h([-V)h(visual)p
895 1773 V 15 w(identi\256er\(s\)])50 1829 y Fl(stageqry)f
Fn([-p)g(pool])g([-s])4 1926 y Fe(\017)23 b Fj(DESCRIPTION)50
2003 y Fl(stageqry)11 b Fn(gi)o(v)o(es)f(the)h(status)f(of)h(all)g
(tapes)g(which)f(are)i(staged)f(or)g(currently)f(requested)h(in)g(tab)o
(ular)f(form:)50 2112 y Fl(V)n(id:)175 b Fn(visual)10
b(identi\256er)m(.)50 2187 y Fl(Fseq:)153 b Fn(\256le)11
b(sequence)g(number)m(.)50 2261 y Fl(Lbl:)176 b Fn(label)11
b(type:)k(al,)c(nl,)g(sl)g(or)g(blp.)50 2336 y Fl(Recfm:)118
b Fn(record)11 b(format:)16 b(F)c(or)f(U.)50 2410 y Fl(Lr)o(ecl:)142
b Fn(logical)10 b(record)h(length.)50 2484 y Fl(Blksiz:)125
b Fn(maximum)12 b(block)e(size.)50 2559 y Fl(State:)146
b Fn(current)11 b(status:)309 2638 y Fl(ST)l(A)m(GEIN:)47
b Fn(currently)10 b(reading)h(from)h(tape)f(to)f(disk)309
2691 y Fl(ST)l(A)m(GEOUT)m(:)568 2748 y Fn(space)h(has)g(been)g(reserv)
o(ed)h(for)f(stageout)f(\256le)309 2802 y Fl(ST)l(A)m(GEWR)n(T)m(:)568
2858 y Fn(currently)g(copying)g(from)h(disk)f(to)h(tape)p
eop
%%Page: 27 31
27 30 bop -64 -125 a Ff(3.4.)23 b(ST)l(A)n(GEQR)m(Y)11
b(-)g(GIVE)g(THE)g(ST)l(A)-5 b(TUS)11 b(OF)g(ALL)g(ST)l(A)n(GED)g(T)l
(APES)718 b Fn(27)309 31 y Fl(W)-5 b(AITING)p 519 31
14 2 v 16 w(SPC:)568 87 y Fn(waiting)9 b(for)i(space)309
139 y Fl(W)-5 b(AITING)p 519 139 V 16 w(REQ:)568 196
y Fn(waiting)9 b(for)i(the)g(same)h(request)f(by)g(another)f(job)h(to)f
(complete)309 259 y Fl(ST)l(A)m(GED:)65 b Fn(successfully)9
b(staged)i(to)g(EOF)309 311 y Fl(ST)l(A)m(GED)p 491 311
V 17 w(LSZ:)568 368 y Fn(successfully)e(staged)i(to)g(speci\256ed)f
(size)50 442 y Fl(Nbaccess:)67 b Fn(number)11 b(of)g(requests)g(for)g
(this)f(disk)g(\256le.)50 512 y Fl(Size:)166 b Fn(actual)11
b(size)g(/)g(requested)f(size)h(\(in)g(Mbytes\).)4 614
y Fe(\017)23 b Fj(OPTIONS)50 715 y Fl(-a:)206 b Fn(gi)o(v)o(es)17
b(the)h(status)f(for)h(all)g(\256les.)37 b(If)19 b(this)e(option)f(is)i
(absent,)h(only)f(the)f(\256les)h(that)g(belong)f(to)h(the)309
772 y(requestor')m(s)11 b(group)f(are)i(displayed.)50
842 y Fl(-l:)216 b Fn(gi)o(v)o(es)17 b(more)i(details)d(for)i(each)h
(\256le:)29 b(the)18 b(login)f(name)h(and)g(the)g(group)f(name)h(of)g
(the)g(user)g(who)309 899 y(requested)10 b(the)h(initial)f(stage)g
(operation,)h(the)g(creation)g(date)g(and)g(the)g(date)g(of)g(last)f
(access.)50 970 y Fl(-P:)201 b Fn(gi)o(v)o(es)11 b(on)g(stdout)f(a)i
(list)f(of)h(staged)f(\256les)g(sorted)g(in)g(ascending)g(order)h(of)g
(last)f(access)h(time)f(weighted)309 1026 y(by)j(\256le)h(size.)27
b(There)14 b(are)i(six)e(\256elds)g(per)h(\256le:)23
b(date)14 b(of)h(last)f(access,)i(time)f(of)f(last)g(access,)i(size)f
(in)309 1083 y(Mbytes,)c(number)g(of)g(accesses,)h(internal)e(path)h
(and)g(user)g(path.)50 1142 y Fl(-p)h(poolname:)309 1198
y Fn(restricts)e(the)h(query)g(to)g(a)g(gi)o(v)o(en)g(pool.)50
1269 y Fl(-s:)211 b Fn(gi)o(v)o(es)10 b(statistics)f(on)i(pool)f
(utilization.)50 1340 y Fl(-u:)204 b Fn(restricts)10
b(the)h(query)g(to)g(\256les)g(that)f(belong)g(to)h(the)g(requestor)m
(.)50 1410 y Fl(-V)g(vids:)106 b Fn(restricts)10 b(the)h(search)g(to)g
(\256les)g(corresponding)f(to)g(gi)o(v)o(en)h(vids.)k(Multiple)10
b(vids)g(will)g(be)i(separated)f(by)309 1467 y(colons.)4
1568 y Fe(\017)23 b Fj(EXAMPLES)50 1642 y Fl(stageqry)50
1751 y Fd(Vid)99 b(Fseq)25 b(Lbl)f(Recfm)h(Lrecl)f(Blksiz)h(State)173
b(Nbaccess)99 b(Size)50 1801 y(CZ0134)g(1)25 b(al)49
b(U)224 b(*)50 b(32760)25 b(STAGED)323 b(3)74 b(0.3/200)50
1851 y(CZ0134)99 b(2)25 b(al)49 b(U)224 b(*)50 b(32760)25
b(STAGEIN)298 b(1)74 b(0.0/200)50 1959 y Fl(stageqry)11
b(-l)50 2058 y Fd(Vid)99 b(Fseq)25 b(Lbl)f(Recfm)h(Lrecl)f(Blksiz)h
(State)173 b(Nbaccess)99 b(Size)50 2108 y(CZ0134)g(1)25
b(al)49 b(U)224 b(*)50 b(32760)25 b(STAGED)323 b(3)74
b(0.3/200)50 2158 y(created)24 b(by)50 b(baud)149 b(c3)49
b(94/01/12)25 b(17:54:45)50 2208 y(last)f(access)373
b(94/01/13)25 b(07:18:28)50 2257 y(CZ0134)99 b(2)25 b(al)49
b(U)224 b(*)50 b(32760)25 b(STAGED)323 b(1)74 b(0.6/200)50
2307 y(created)24 b(by)50 b(baud)149 b(c3)49 b(94/01/13)25
b(07:18:28)50 2357 y(last)f(access)373 b(94/01/13)25
b(07:30:04)50 2456 y Fl(stageqry)11 b(-P)50 2555 y Fd(94/01/13)24
b(07:18:28)74 b(0.3)g(3)25 b(shd02:/stage/c3/stage/CZ0134.1.al)d
(shd02:/tmp/fort.41)50 2653 y Fl(stageqry)11 b(-s)50
2752 y Fd(POOL)24 b(stagetest)g(DEFSIZE)h(200)f(MINFREE)h(10)f(GC)h
(shd02:/usr/local/bin/stage_clean)174 2802 y(FREE)50
b(96.8\045)100 2852 y(shd02)24 b(/stage)g(CAPACITY)h(492.00M)f(FREE)g
(476.39M)h(\()f(96.8\045\))p eop
%%Page: 28 32
28 31 bop -64 -125 a Fn(28)1117 b Ff(CHAPTER)11 b(3.)28
b(T)l(APE)11 b(ST)l(A)n(GING)g(SOFTW)-5 b(ARE)4 46 y
Fe(\017)23 b Fj(RETURN)11 b(CODES)50 168 y Fh(0)27 b(Ok.)50
224 y(1)g(Bad)h(parameter.)50 281 y(2)f(System)i(error.)50
337 y(4)e(Configuratio)q(n)j(error.)-64 532 y Fi(3.5)60
b(stgdaemon)14 b(-)h(start)g(the)f(stage)h(daemon)4 654
y Fe(\017)23 b Fj(N)o(AME)50 729 y Fl(stagedaemon)11
b Fn(-)g(start)g(the)g(stage)g(daemon)4 822 y Fe(\017)23
b Fj(SYNOPSIS)50 897 y Fl(stgdaemon)4 990 y Fe(\017)g
Fj(DESCRIPTION)50 1065 y Fn(The)11 b Fl(stgdaemon)h Fn(command)g
(starts)e(the)h(stage)h(daemon.)17 b(This)11 b(command)h(is)f(usually)f
(e)o(x)o(ecuted)i(at)f(system)g(startup)50 1121 y(time.)16
b(This)9 b(will)f(read)j(the)e(pool)g(con\256guration)f(\256le,)j(the)f
(stage)f(catalog)g(to)h(remo)o(v)o(e)h(uncompleted)d(transactions)g
(and)50 1178 y(look)f(for)i(requests.)14 b(Short)8 b(requests)g(like)f
Fl(stageqry)h Fn(are)h(processed)e(in)h(the)g(main)h(loop.)14
b(The)8 b(daemon)h(forks)e(o)o(v)o(erlays)50 1234 y(to)k(e)o(x)o(ecute)
i(long)e(requests)g(like)g(disk/tape)g(copy)g(or)h(pool)f(cleanup.)18
b(In)12 b(case)h(of)f(system)f(error)n(,)j(the)d(commands)i(are)50
1291 y(automatically)e(retried)i(from)g(the)f(failing)f(subrequest.)20
b(If)13 b(a)g(\256le)g Fl(nomor)o(estage)f Fn(e)o(xists)g(in)g(the)g
(operator)h(directory)m(,)50 1347 y(ne)o(w)e(stage)f(commands)i(will)e
(be)h(rejected)g(by)g(the)f(daemon)i(and)f(will)f(wait)g(on)g(the)h
(client)f(side.)16 b(All)11 b(error)g(messages)50 1403
y(and)g(statistical)f(information)g(are)i(kept)f(in)g(a)h(log.)k(On)c
(all)f(client)g(hosts)f(and)h(on)g(the)g(stager)h(host)e(there)i
(should)e(be)h(an)50 1460 y(entry)g(for)g(the)g(stager)g(in)g
Fl(/etc/services)f Fn(like:)50 1570 y Fh(stage)301 b(5007/tcp)657
b(#)27 b(SHIFT)i(stager)50 1681 y Fn(On)13 b(all)g(client)f(hosts)g
(there)i(should)d(be)j(an)f(entry)g(for)g(the)g(stager)g(in)g
Fl(/etc/shift.conf)h Fn(gi)o(ving)d(the)i(stager)h(hostname.)50
1737 y(F)o(or)e(e)o(xample:)50 1859 y Fh(STG)137 b(HOST)328
b(shd02)50 1981 y Fn(On)9 b(all)g(disk)g(serv)o(ers)g(ha)o(ving)g
(\256lesystems)f(in)h(the)h(pool\(s\),)f(there)g(should)f(be)i(three)f
(entries)g(in)g Fl(/etc/shift.conf)h Fn(gi)o(ving)50
2038 y(permission)g(to)h(the)h(stager)f(to)g(e)o(x)o(ecute)h(programs,)
g(unlink)e(\256les)i(or)g(create)g(directories)e(as)i(root.)17
b(The)12 b(serv)o(er)g(where)50 2094 y Fl(stgdaemon)f
Fn(runs)f(does)h(not)g(need)g(these)g(entries.)k(F)o(or)d(e)o(xample:)
50 2216 y Fh(RFIOD)83 b(POPENTRUST)166 b(shd02)50 2272
y(RFIOD)83 b(LINKTRUST)193 b(shd02)50 2329 y(RFIOD)83
b(MKDIRTRUST)166 b(shd02)50 2385 y(RFIOD)83 b(CHOWNTRUST)166
b(shd02)50 2507 y Fn(There)11 b(must)g(be)g(one)g(entry)g(in)g(the)g
(con\256guration)e(\256le)j(per)f(pool)f(gi)o(ving:)50
2601 y Fl(POOL)i(name:)309 2657 y Fn(this)e(will)g(be)h(used)g(as)g
Fl(-p)h Fn(parameter)g(in)f(user)g(commands)50 2729 y
Fl(DEFSIZE:)50 b Fn(maximum)12 b(\256lesize)f(if)g(the)g
Fl(s)g Fn(option)e(is)i(not)f(speci\256ed)h(on)g(user)g(commands)50
2802 y Fl(MINFREE:)29 b Fn(minimum)18 b(free)h(space)g(to)e(be)i(a)o(v)
o(ailable)e(in)h(the)g(pool.)37 b(This)17 b(is)h(a)h(percentage.)38
b(F)o(or)18 b(e)o(xample,)309 2858 y Fl(MINFREE)11 b(10)g
Fn(corresponds)f(to)g(10)p eop
%%Page: 29 33
29 32 bop -64 -125 a Ff(3.5.)28 b(STGD)n(AEMON)11 b(-)h(ST)l(AR)m(T)f
(THE)g(ST)l(A)n(GE)f(D)n(AEMON)948 b Fn(29)50 46 y Fl(GC:)176
b Fn(full)10 b(path)h(name)h(of)f(the)g(garbage)g(collector)f(program)i
(\(NFS)g(syntax\).)50 159 y(There)f(must)g(be)g(also)g(one)g(entry)g
(per)g(pool)f(element)h(gi)o(ving:)50 279 y Fh(server)29
b(full)f(path)g(of)g(the)g(stage)h(directory)50 398 y
Fn(If)11 b(se)o(v)o(eral)h(pools)e(are)h(con\256gured,)h(a)f(default)f
(pool)g(must)h(be)h(de\256ned)f(by)g(an)g(entry)50 518
y Fh(DEFPOOL)220 b(default)29 b(pool)f(name)50 637 y
Fn(The)11 b(stage)g(catalog)f(contains)g(the)h(follo)o(wing)e
(information:)50 764 y Fd(maximum)24 b(block)h(size)50
814 y(density)50 864 y(device)f(group)50 914 y(file)g(id)50
963 y(file)g(status:)h(new)f(=)h('n',)g(old)f(=)h('o')50
1013 y(file)f(sequence)h(number)f(requested)g(by)h(user)50
1063 y(keep)f(flag;)h(if)g(non)f(zero,)h(keep)f(data)h(on)f(disk)h
(after)f(successful)g(stagewrt)50 1113 y(label)g(type:)h(al,)f(nl,)h
(sl)g(or)f(blp)50 1163 y(record)g(length)50 1212 y(number)g(of)h
(blocks/records)f(to)g(be)h(copied)50 1262 y(pool)f(name)50
1312 y(record)g(format)50 1362 y(retention)g(period)g(in)h(days)50
1412 y(size)f(in)h(Mbytes)f(of)h(data)g(to)f(be)h(staged)50
1461 y(tape)f(server)h(specified)f(by)h(user)50 1511
y(Tflag;)f(if)h(non)g(zero,)49 b(do)25 b(not)f(check)h(trailer)f
(labels)50 1561 y(visual_identifier\(s\))50 1611 y
(volume_serial_number\(s\))50 1661 y(internal)g(path)50
1711 y(user)g(group)50 1760 y(login)g(name)50 1810 y(uid)50
1860 y(gid)50 1910 y(umask)50 1960 y(request)g(id)50
2009 y(status)50 2059 y(actual_size)50 2109 y(creation)g(time)50
2159 y(last)g(access)h(time)50 2209 y(nb)g(of)f(accesses)50
2342 y Fn(A)11 b(secondary)g(catalog)f(contains)g(the)h(list)f(of)h
(symbolic)f(links)g(to)h(the)g(staged)f(\256les.)50 2420
y(In)k(the)f(log)g(each)i(entry)e(has)h(a)g(timestamp.)24
b(All)13 b(entries)g(corresponding)f(to)i(one)f(request)h(ha)o(v)o(e)g
(the)f(same)i(request)50 2477 y(id.)k(F)o(or)13 b(each)f(user)g
(command)h(there)f(is)g(one)g(message)g(STG98)g(gi)o(ving)e(the)i
(command,)h(one)f(message)g(STG97)g(per)50 2533 y(try)e(to)h(stage)f(a)
h(\256le)g(or)g(one)g(message)g(STG96)f(if)h(the)f(\256le)h(was)f
(already)h(staged)f(and)h(a)g(\256nal)g(message)g(STG99)f(gi)o(ving)50
2589 y(the)g(return)g(code.)16 b(The)10 b(message)g(STG97)g(gi)o(v)o
(es)f(the)h(follo)o(wing)e(information:)14 b(internal)9
b(\256le)i(path,)f(tape)g(serv)o(er)n(,)h(tape)50 2646
y(unit,)j(network)f(interface,)h(actual)g(\256le)g(size,)h(waiting)e
(time)h(and)f(transfer)h(time.)26 b(The)13 b(message)i(STG96)e(gi)o(v)o
(es)h(the)50 2702 y(internal)9 b(\256le)i(path)e(and)h(the)g(current)g
(number)g(of)h(accesses)f(to)g(the)g(\256le.)16 b(A)10
b(message)h(STG95)e(gi)o(ving)g(the)h(internal)f(\256le)50
2759 y(path)h(appears)i(in)e(the)h(log)g(e)o(v)o(ery)g(time)g(a)h
(\256le)f(is)g(deleted.)4 2858 y Fe(\017)23 b Fj(FILES)p
eop
%%Page: 30 34
30 33 bop -64 -125 a Fn(30)1117 b Ff(CHAPTER)11 b(3.)28
b(T)l(APE)11 b(ST)l(A)n(GING)g(SOFTW)-5 b(ARE)50 31 y
Fl(/etc/STGCONFIG:)309 87 y Fn(con\256guration)10 b(\256le)50
149 y Fl(/usr/spool/stage/stgca)o(t:)309 205 y Fn(main)h(catalog)50
267 y Fl(/usr/spool/stage/stgpath:)309 323 y Fn(secondary)f(catalog)h
(\(symbolic)f(links\))50 385 y Fl(/usr/spool/stage/lo)o(g:)50
493 y(/etc/operator/nomor)o(estage:)4 656 y Fe(\017)23
b Fj(EXAMPLES)50 731 y Fn(Here)12 b(is)e(an)h(e)o(xample)h(of)f(a)h
(con\256guration)e(\256le:)50 856 y Fh(#)50 912 y(#)409
b(shd02)29 b(stager)g(configuration)50 969 y(#)50 1025
y(POOL)f(stagetest)i(DEFSIZE)f(200)f(MINFREE)h(10)f(GC)g(shd02:/usr/lo)
q(cal/)q(bin/)q(sta)q(ge\\_)q(clea)q(n)104 1082 y(shd02)h(/stage)50
1263 y Fn(Here)12 b(is)e(a)i(simple)e(e)o(xample)i(of)f(a)h(stage)p
698 1263 14 2 v 16 w(clean)f(script:)50 1388 y Fh(stageqry)29
b(-a)f(-p)g($1)g(-P)55 b(|)g(cut)28 b(-c30-)56 b(|)e(cut)29
b(-d")f(")f(-f1)56 b(|)e(stageclr)30 b(-c)e(-i)f(-p)h($1)50
1513 y Fn(Here)12 b(is)e(a)i(small)f(log:)50 1627 y Fb(01/12)24
b(17:52:18)116 b(1)23 b(stgdaemon:)j(STG98)f(-)d(stageqry)50
1673 y(01/12)i(17:52:27)116 b(2)23 b(stgdaemon:)j(STG98)f(-)d(stageqry)
k(-s)50 1718 y(01/12)e(17:54:45)116 b(3)23 b(stgdaemon:)j(STG98)f(-)d
(stagein)k(-vCZ0134)g(-g)d(CART)h(-d)f(38000)i(-l)e(al)g(fort.41)50
1764 y(01/12)h(18:11:42)116 b(3)23 b(stgdaemon:)j(STG97)f(-)d(shd02:CZ)
q(01)q(34.)q(1.)q(al)k(staged)f(by)e(\(baud,c3\))q(,)j(server)f
(shd03.cern)q(.c)q(h)48 b(unit)24 b(cartST0)48 b(ifce)24
b(le0)46 b(size)24 b(324000)47 b(wtim)24 b(1006)47 b(ttim)24
b(4)f(rc)g(0)50 1810 y(01/12)h(18:11:52)116 b(3)23 b(sendrep:)i(STG99)g
(-)e(stage)h(returns)h(0)50 1855 y(01/13)f(07:13:50)116
b(8)23 b(stgdaemon:)j(STG98)f(-)d(stageqry)k(-P)50 1901
y(01/13)e(07:15:39)116 b(9)23 b(stgdaemon:)j(STG98)f(-)d(stagein)k
(-vCZ0134)g(-g)d(CART)h(-d)f(38000)i(-l)e(al)g(fort.42)50
1947 y(01/13)h(07:15:39)116 b(9)23 b(stgdaemon:)j(STG96)f(-)d(CZ0134.1)
q(.a)q(l)j(already)h(staged,)f(nbaccess)h(=)d(2)50 1992
y(01/13)h(07:15:39)116 b(9)23 b(sendrep:)i(STG99)g(-)e(stage)h(returns)
h(0)50 2038 y(01/13)f(07:15:46)93 b(10)24 b(stgdaemon:)i(STG98)f(-)d
(stageqry)50 2084 y(01/13)i(07:18:28)93 b(12)24 b(stgdaemon:)i(STG98)f
(-)d(stagein)k(-vCZ0134)g(-q1,2)e(-g)f(CART)h(-d)g(38000)g(-l)f(al)h
(fort.43)h(fort.44)50 2129 y(01/13)f(07:18:28)93 b(12)24
b(stgdaemon:)i(STG96)f(-)d(CZ0134.1)q(.a)q(l)j(already)h(staged,)f
(nbaccess)h(=)d(3)50 2175 y(01/13)h(07:18:41)93 b(14)24
b(stgdaemon:)i(STG98)f(-)d(stageqry)50 2221 y(01/13)i(07:30:07)93
b(12)24 b(stgdaemon:)i(STG97)f(-)d(shd02:CZ)q(01)q(34.)q(2.)q(al)k
(staged)f(by)e(\(baud,c3\))q(,)j(server)f(shd03.cern)q(.c)q(h)48
b(unit)24 b(cartST1)48 b(ifce)24 b(le0)46 b(size)24 b(648000)47
b(wtim)24 b(687)46 b(ttim)24 b(6)f(rc)h(0)50 2266 y(01/13)g(07:30:17)93
b(12)24 b(sendrep:)h(STG99)g(-)e(stage)h(returns)h(0)p
eop
%%Page: 31 35
31 34 bop -64 408 a Fp(Chapter)22 b(4)-64 645 y(P)n(ortable)g(Unix)f(T)
-8 b(ape)22 b(Subsystem)-64 918 y Fn(W)n(ith)9 b(the)g(e)o(xception)g
(of)g(CRA)-5 b(Y)11 b(UNICOS,)f(unix)e(systems)h(usually)f(of)o(fer)i
(a)f(primiti)o(v)o(e)g(tape)g(interface)g(which)g(is)g(ill)g(adapted)
-64 974 y(to)i(a)g(multiuser)g(en)n(vironment.)k(F)o(our)d(basic)f
(functions)e(are)j(typically)d(pro)o(vided:)449 1095
y Fh(open\(2\),)30 b(read\(2\),)f(write\(2\),)h(close\(2\))-64
1216 y Fn(Se)o(v)o(eral)10 b Fh(ioctl\(2\))g Fn(commands)f(are)h(also)e
(pro)o(vided)f(b)o(ut)h(there)h(is)f(no)g(operator)g(interface,)i
(label)e(processing,)g(or)h(interface)-64 1273 y(to)20
b(a)h(tape)f(management)g(system.)43 b(The)20 b(SHIFT)h(T)l(ape)g
(Subsystem)e(of)o(fers)h(dynamic)g(con\256guration)f(of)h(tape)g
(units,)-64 1329 y(reserv)o(ation)e(and)h(allocation)e(of)i(the)g
(units,)h(automatic)e(label)g(checking,)j(multi-\256le)d(and)h(multi-v)
o(olume)e(support,)j(an)-64 1386 y(operator)13 b(interface,)h(a)g
(status)e(display)g(and)h(an)g(interface)g(to)g(the)g(CERN/Rutherford)g
(T)l(ape)h(Management)f(System.)24 b(It)13 b(is)-64 1442
y(written)e(entirely)g(as)i(user)f(code)g(and)g(requires)f(no)h
(modi\256cation)f(of)h(manufacturers')g(dri)o(v)o(er)g(code.)20
b(It)12 b(currently)f(supports)-64 1499 y(StorageT)m(ek')m(s)g(4280)g
(SCSI)h(tape)f(dri)o(v)o(e)g(\(an)g(IBM)i(3480)d(compatible\))g(as)i
(well)e(as)h(Exabyte)g(8200/8500)e(dri)o(v)o(es.)-64
1606 y(T)l(ape)j(\256le)g(labelling)d(is)i(pro)o(vided)f(by)h(a)h(set)f
(of)h(user)f(callable)g(routines.)k(In)d(practice,)g(most)e(tape)i(I/O)
f(is)g(done)g(by)g(using)f(the)-64 1662 y(tape)h(staging)f(utility)m(,)
f(R)m(TCOPY)j(which)f(hides)f(details)g(of)h(these)g(routines)f(from)i
(the)f(user)m(.)-64 1769 y(The)g(follo)o(wing)e(sections)h(describe)h
(in)g(detail)f(the)h(dif)o(ferent)g(commands)g(for)g(tape)g(access)h
(within)d(SHIFT)m(.)-64 1970 y Fi(4.1)60 b(dumptape)15
b(-)g(dump)g(a)g(tape)f(and)i(analyze)d(its)i(contents)4
2094 y Fe(\017)23 b Fj(SYNOPSIS)50 2171 y Fl(dumptape)12
b Fn(-V)g(vid)e([-g)h(de)o(vice)p 572 2171 14 2 v 16
w(group)p 695 2171 V 16 w(name])h([-B)g(maxbyte])f([-C)h(code)f(])g
([-F)h(max\256le])g([-N)f(blknos])4 2268 y Fe(\017)23
b Fj(DESCRIPTION)50 2344 y Fl(dumptape)13 b Fn(\256nds)f(out)f(if)h
(the)g(tape)g(is)g(labelled)f(or)h(not;)g(if)g(the)g(tape)g(is)g
(labelled,)f(it)h(\256nds)g(out)f(if)h(the)g(label)g(is)f(ASCII)50
2401 y(or)g(EBCDIC.)h(It)g(also)e(dumps)h(the)g(blocks)f(content)g(in)h
(he)o(xadecimal)g(and)g(in)g(ASCII)h(or)f(EBCDIC.)50
2478 y Fl(OPTIONS)50 2554 y Fn(The)g(options)e(are)j(identical)e(to)h
(the)g(ones)f(used)h(in)g Fl(tpmnt)p Fn(,)h(with)e(a)i(fe)o(w)f
(additions:)50 2653 y Fl(-B)h(maxbyte:)309 2709 y Fn(Number)f(of)g
(bytes)g(per)g(block)f(to)h(be)g(dumped)g(\(0)g(means)h(all)f(bytes\).)
50 2784 y Fl(-C)g(code:)97 b Fn(Character)12 b(code)f(for)g(data)g
(interpretation)f(-)h Fl(ascii)f Fn(or)i Fl(ebcdic)p
Fn(.)50 2858 y Fl(-F)f(max\256le:)48 b Fn(Number)11 b(of)g(\256les)g
(to)g(be)g(dumped)g(\(0)h(means)f(all)g(\256les\))917
2958 y(31)p eop
%%Page: 32 36
32 35 bop -64 -125 a Fn(32)929 b Ff(CHAPTER)12 b(4.)27
b(POR)m(T)l(ABLE)12 b(UNIX)f(T)l(APE)f(SUBSYSTEM)50 46
y Fl(-N)h(blknos:)56 b Fn(Starting)10 b(and)h(ending)f(block)h(numbers)
f(to)h(be)g(dumped)g(separated)g(by)g(comma.)50 146 y(All)k(options)f
(can)i(be)f(gi)o(v)o(en)h(in)f(an)o(y)h(order)m(.)30
b(The)16 b(space)g(between)f(option)f(name)j(and)e(option)f(v)o(alue)i
(is)f(optional.)50 203 y(Default)10 b(v)o(alues)g(are)i(the)f(follo)o
(wing:)50 316 y Fh(-b)28 b(65536)g(blocksize)50 373 y(-d)g(6250)g
(density)50 429 y(-g)g(CART)g(device)h(group)50 486 y(-B)f(320)g
(number)h(of)e(bytes/block)k(to)d(be)f(dumped)50 542
y(-C)h(ebcdic)h(code)f(to)g(use)g(for)g(data)g(interpretati)q(on)50
599 y(-F)g(0)f(all)h(files)50 655 y(-N)g(1)f(first)i(block)f(of)g(each)
h(file)50 769 y Fn(F)o(or)12 b(e)o(xample:)50 858 y Fl(dumptape)g(-V)g
(12345A:)309 914 y Fn(will)e(dump)h(a)g(maximum)h(of)f(320)g(bytes)f
(from)i(the)f(\256rst)g(block)f(of)h(e)o(v)o(ery)h(\256le.)50
973 y Fl(dumptape)g(-B)g(0)f(-F)g(1)g(-N)h(4,5)f(-V)g(12345A:)309
1029 y Fn(will)f(dump)h(all)g(bytes)f(in)h(block)f(4)h(and)g(5)g(from)h
(\256rst)f(\256le.)4 1130 y Fe(\017)23 b Fj(RETURN)11
b(CODES)50 1243 y Fh(0)27 b(No)h(error)50 1300 y(2)f(Invalid)j(option.)
50 1356 y(3)d(Bad)h(parameter.)50 1413 y(4)f(The)h(vid)h(must)f(be)g
(specified.)-64 1606 y Fi(4.2)60 b(r)o(eser)o(v)13 b(-)i(r)o(eser)o(v)o
(e)f(tape)g(r)o(esour)o(ces)4 1727 y Fe(\017)23 b Fj(SYNOPSIS)50
1800 y Fl(r)o(eserv)11 b Fn([)h(de)o(v)p 276 1800 14
2 v 15 w(group)p 398 1800 V 16 w(name)g(number])f([de)o(v)p
769 1800 V 16 w(group)p 892 1800 V 15 w(name)h(number])g(...)4
1891 y Fe(\017)23 b Fj(DESCRIPTION)50 1965 y Fl(r)o(eserv)12
b Fn(gi)o(v)o(es)f(permission)f(to)i(access)g(tape)f(units.)17
b(It)12 b(is)f(mandatory)h(to)f(specify)g(all)h(resources)f(which)g
(will)g(be)h(used)50 2022 y(simultaneously)c(by)i(the)g(job)g(in)g(one)
g(reserv)h(command)f(\(to)h(a)o(v)o(oid)e(deadlocks\).)16
b(The)10 b(tape)g(daemon)h(will)e(check)i(that)50 2078
y(enough)d(units)h(are)h(con\256gured)f(up.)16 b(F)o(or)10
b(each)g(de)o(vice)f(group)g(to)g(be)h(used,)g(specify)f(the)g(de)o
(vice)g(group)g(name)h(\(CAR)m(T)m(,)50 2134 y(8MM...\))18
b(and)11 b(the)g(number)g(of)g(units.)16 b(F)o(or)11
b(e)o(xample:)738 2238 y Fh(reserv)29 b(CART)f(1)g(8MM)g(1)4
2342 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 2456 y Fh(0)109
b(No)28 b(error)50 2512 y(200)55 b(Tape)29 b(daemon)f(is)g(not)g
(running.)50 2569 y(201)55 b(System)29 b(or)f(communication)j(error.)50
2625 y(203)55 b(Bad)28 b(parameter.)50 2682 y(204)55
b(Reserv)29 b(already)g(issued.)50 2738 y(205)55 b(Too)28
b(many)h(tape)f(users.)50 2795 y(206)55 b(Too)28 b(many)h(units)f
(requested.)50 2851 y(207)55 b(Invalid)29 b(device)g(group)g(name.)p
eop
%%Page: 33 37
33 36 bop -64 -125 a Ff(4.3.)28 b(RLS)12 b(-)f(RELEASE)g(T)l(APE)g
(RESOURCES)1152 b Fn(33)-64 46 y Fi(4.3)60 b(rls)14 b(-)h(r)o(elease)e
(tape)h(r)o(esour)o(ces)4 168 y Fe(\017)23 b Fj(SYNOPSIS)50
243 y Fl(rls)11 b Fn([-a])h([-d)f(de)o(vice)p 374 243
14 2 v 16 w(name])h([-p)f(pathname])4 337 y Fe(\017)23
b Fj(DESCRIPTION)50 412 y Fl(rls)14 b Fn(unloads)g(the)g(tape\(s\))h
(used)f(by)h(the)f(job,)h(tells)f(TMS)i(that)e(the)g(tape)h(is)f(free)i
(for)f(use)f(by)h(other)f(jobs,)h(frees)h(the)50 468
y(corresponding)8 b(tape)j(unit\(s\))e(and)h(decrements)h(the)f
(corresponding)e(de)o(vice)i(group\(s\))g(reserv)o(ation.)15
b(It)10 b(remo)o(v)o(es)i(the)50 525 y(label)f(information)f(from)h
(the)g(\256le)h Fl(.tplabel)f Fn(for)h(the)f(corresponding)e(path)i
(and)g(then)f(deletes)h Fl(tplabel)g Fn(if)g(empty)m(.)4
618 y Fe(\017)23 b Fj(OPTIONS)50 724 y Fl(-a:)206 b Fn(Releases)11
b(all)g(resources)g(reserv)o(ed)h(by)e(the)h(job)n(.)50
786 y Fl(-d)h(de)o(vname:)309 842 y Fn(Releases)f(an)g(e)o(xplicit)g
(de)o(vice.)50 915 y Fl(-k:)204 b Fn(K)o(eeps)11 b(the)g(current)g
(reserv)o(ation.)k(A)c(path)g(or)g(a)h(de)o(vice)f(name)g(must)g(also)g
(be)g(speci\256ed.)50 976 y Fl(-p)h(pathname:)309 1033
y Fn(Releases)f(an)g(e)o(xplicit)g(path,)g(as)g(speci\256ed)g(in)f(a)i
(pre)o(vious)e Fl(tpmnt.)50 1139 y Fn(One)h(and)g(only)f(one)h(of)g
(-a,)h(-d)g(or)f(-p)g(options)e(may)j(be)f(speci\256ed.)4
1233 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 1357 y Fh(0)82
b(No)28 b(error)50 1414 y(200)g(Tape)g(daemon)h(is)f(not)g(running.)50
1470 y(201)g(System)h(or)f(communication)i(error.)50
1527 y(203)e(Bad)g(parameter.)-64 1723 y Fi(4.4)60 b(tmsr)o(eq)14
b(-)h(send)g(a)g(r)o(equest)f(to)h(TMS)g(thr)o(ough)g(the)f(tms)h
(daemon)4 1845 y Fe(\017)23 b Fj(SYNOPSIS)50 1920 y Fl(tmsr)o(eq)12
b Fn(request)4 2014 y Fe(\017)23 b Fj(DESCRIPTION)50
2089 y Fl(tmsr)o(eq)17 b Fn(sends)e(a)h(request)g(to)f(TMS)i(through)e
(the)h(tms)g(daemon.)31 b(Special)16 b(characters)g(like)f(brackets)h
(should)e(be)50 2145 y(escaped.)i(T)l(wo)11 b(e)o(xamples)g(are:)50
2270 y Fh({\\tt)28 b(tmsreq)h(qvol)f(CUT031})50 2382
y({\\tt)g(tmsreq)h("query)g(vid)f(CUT031)h(\(owner"})4
2507 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 2632 y Fh(0)82
b(No)28 b(error)50 2688 y(1)82 b(No)28 b(request)h(parameter.)50
2744 y(4)82 b(Incomplete)30 b(reply.)50 2801 y(83)55
b(VM)28 b(not)g(responding.)50 2857 y(85)55 b(TMS)28
b(disabled)h(on)f(local)h(host.)p eop
%%Page: 34 38
34 37 bop -64 -125 a Fn(34)929 b Ff(CHAPTER)12 b(4.)27
b(POR)m(T)l(ABLE)12 b(UNIX)f(T)l(APE)f(SUBSYSTEM)-64
46 y Fi(4.5)60 b(tmstat)14 b(-)h(gi)o(v)o(e)g(the)f(status)i(of)f(the)f
(curr)o(ent)g(TMS)h(MOUNT)g(commands)4 166 y Fe(\017)23
b Fj(SYNOPSIS)50 240 y Fl(tmstat)11 b Fn([-a])h([-d])4
331 y Fe(\017)23 b Fj(DESCRIPTION)50 404 y Fl(tmstat)11
b Fn(gi)o(v)o(es)f(the)h(status)f(of)h(the)g(current)g(TMS)h(MOUNT)f
(commands)h(in)e(tab)o(ular)h(form:)50 495 y Fl(time:)158
b Fn(when)11 b(the)g(request)f(was)h(sent)f(to)h(TMS)50
565 y Fl(jobid:)143 b Fn(process)10 b(id)h(of)g(the)g(login)f(shell.)16
b(It)11 b(is)g(equal)f(to)h(the)g(process)g(group)f(id)h(for)g(the)g
(Bourne)g(shell.)50 635 y Fl(uniqid:)118 b Fn(unique)14
b(id.)27 b(F)o(or)16 b(a)f(batch)g(job,)h(it')m(s)f(the)f(letter)h(B)g
(follo)o(wed)f(by)h(the)f(NQS)i(id.)27 b(F)o(or)16 b(an)f(interacti)o
(v)o(e)309 691 y(session,)10 b(it')m(s)h(the)g(letter)f(I)i(follo)o
(wed)e(by)h(the)g(jobid.)50 761 y Fl(logonid:)99 b Fn(user)11
b(login)f(name.)50 831 y Fl(unit:)166 b Fn(de)o(vice)11
b(name)g(as)h(it)e(appears)i(in)e(operator)h(mount)g(messages.)50
901 y Fl(mount:)118 b Fn(mount)10 b(type:)309 974 y Fl(verify:)130
b Fn(check)10 b(if)g(the)f(tape)h(is)g(a)o(v)o(ailable)f(for)h(use)g
(and)f(if)h(the)g(parameters)g(speci\256ed)g(in)f Fl(tpmnt)568
1030 y Fn(match)i(those)g(in)f(the)h(TMS)h(database)309
1094 y Fl(pending:)88 b Fn(reserv)o(e)12 b(the)f(tape)g(for)g(use)309
1157 y Fl(complete:)70 b Fn(the)11 b(tape)g(has)g(been)g(successfully)e
(mounted)309 1220 y Fl(cancel:)123 b Fn(the)11 b(tape)g(has)g(been)g
(unloaded)309 1283 y Fl(waiting:)99 b Fn(waiting)9 b(either)i(for)g
(TMS)h(answer)f(or)g(for)h(tape)f(to)g(be)g(a)o(v)o(ailable.)50
1356 y Fl(vid:)183 b Fn(visual)10 b(identi\256er)50 1405
y Fl(library)h(and)g(rack/slot:)309 1462 y Fn(gi)o(v)o(e)g(the)g
(physical)e(location)h(of)h(the)g(tape.)4 1552 y Fe(\017)23
b Fj(OPTIONS)50 1643 y Fl(-a:)206 b Fn(gi)o(v)o(es)12
b(the)h(status)e(for)i(all)g(TMS)g(mount)g(requests,)f(e)o(v)o(en)h
(pending)f(MOUNT)h(CANCEL)f(to)h(be)g(sent)309 1700 y(when)e(TMS)g(is)g
(a)o(v)o(ailable)g(again)f(on)h(VM.)50 1770 y Fl(-d:)204
b Fn(displays)9 b(one)i(line)g(with)f(the)h(timestamp)g(in)f(front)h
(of)g(the)g(normal)g(output.)4 1860 y Fe(\017)23 b Fj(NO)n(TES)50
1934 y Fn(All)10 b(the)h(information)f(is)h(taken)f(from)i(a)g(disk)e
(\256le)h(which)g(is)f(not)h(updated)f(in)h(case)g(of)h(tmsdaemon)e
(failure.)4 2025 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50
2137 y Fh(0)27 b(No)h(error)50 2194 y(1)f(Bad)h(parameter.)-64
2387 y Fi(4.6)60 b(tpcon\256g)15 b(-)f(con\256gur)o(e)g(tape)h(units)g
(up/do)o(wn)4 2507 y Fe(\017)23 b Fj(SYNOPSIS)50 2581
y Fl(tpcon\256g)12 b Fn(unit)p 293 2581 14 2 v 15 w(name)g(unit)p
490 2581 V 15 w(status)4 2672 y Fe(\017)23 b Fj(DESCRIPTION)50
2745 y Fl(tpcon\256g)12 b Fn(con\256gures)f(units)f(up)h(or)h(do)o(wn.)
k(This)10 b(tells)h(the)g(tape)g(daemon)h(if)f(the)g(unit)f(can)i(be)g
(allocated)e(or)i(not.)k(The)50 2802 y(list)10 b(of)i(unit)e(names)i
(may)g(be)f(found)g(by)g(using)f Fl(tpstat.)18 b Fn(The)11
b Fl(tpcon\256g)h Fn(command)g(is)f(restricted)g(to)g(pri)o(vile)o(ged)
f(users)50 2858 y(such)h(as)g(root)f(and)h(operator)m(.)17
b(F)o(or)12 b(e)o(xample:)p eop
%%Page: 35 39
35 38 bop -64 -125 a Ff(4.7.)28 b(TPD)n(AEMON)11 b(-)h(ST)l(AR)m(T)f
(THE)g(T)l(APE)g(D)n(AEMON)1011 b Fn(35)779 46 y Fh(tpconfig)29
b(rst0)g(up)4 200 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50
375 y Fh(0)82 b(No)28 b(error)50 431 y(200)g(Tape)g(daemon)h(is)f(not)g
(running.)50 488 y(201)g(System)h(or)f(communication)i(error.)50
544 y(203)e(Bad)g(parameter.)50 601 y(209)g(Unknown)h(tape)f(unit.)-64
846 y Fi(4.7)60 b(tpdaemon)14 b(-)h(start)g(the)f(tape)h(daemon)4
993 y Fe(\017)23 b Fj(SYNOPSIS)50 1085 y Fl(/usr/local/bin/tpdaemon)4
1212 y Fe(\017)g Fj(DESCRIPTION)50 1304 y Fn(The)11 b
Fl(tpdaemon)g Fn(command)g(starts)f(the)h(tape)f(daemon.)17
b(It)11 b(reads)f(the)h(\256le)g(/etc/TPCONFIG)f(and)h(look)f(for)h
(requests.)50 1360 y(Short)j(requests)f(like)h Fl(tpstat)g
Fn(are)i(processed)d(in)h(the)g(main)h(loop.)25 b(The)15
b(daemon)f(forks)g(o)o(v)o(erlays)g(to)g(e)o(x)o(ecute)h(long)50
1417 y(requests)9 b(like)h(mounting)f(or)h(unloading)f(tapes.)16
b(There)10 b(must)g(be)h(one)f(entry)g(in)g(the)g(con\256guration)g
(\256le)g(per)h(tape)f(unit)50 1473 y(gi)o(ving:)50 1621
y Fl(unit)i(name:)48 b Fn(as)11 b(seen)g(by)g(the)g(operators)f(in)h
(the)g(mount)g(messages)50 1699 y Fl(de)o(vice)h(gr)o(oup:)309
1756 y Fn(CAR)m(T)m(,)g(8200)e(or)h(8500)50 1831 y Fl(de)o(vice)h
(name:)309 1887 y Fn(as)f(de\256ned)g(in)g(/de)o(v)50
1977 y Fl(density:)105 b Fn(corresponding)9 b(to)i(the)g(entry)g(in)f
(/de)o(v)50 2055 y Fl(r)o(ewind/nor)o(ewind:)309 2111
y Fn(tells)g(the)h(dri)o(v)o(er)g(if)g(the)g(tape)g(should)f(be)h(re)o
(wound)f(or)h(not)f(at)i(close)e(time)50 2190 y Fl(initial)g(status:)
309 2246 y Fn(up)h(or)g(do)o(wn)50 2324 y Fl(r)o(obot/manual:)309
2381 y Fn(if)g(the)g(unit)f(is)h(de\256ned)g(as)g(part)g(of)g(a)h
(robot,)f(there)g(will)f(be)h(no)g(check)g(on)g(the)g(ring)g(status)50
2470 y Fl(de)o(vice)h(type:)29 b Fn(for)17 b(3480)f(compatible)h
(units,)g(the)g(unit)f(LED)h(display)e(will)h(sho)o(w)m(,)i(when)f
(connected)g(to)f(certain)309 2527 y(platforms,)g(the)f(vid)f
(requested)h(or)g(mounted)f(or)h(error)h(messages)f(like)f("wrong)g
(ring")g(or)h("wrong)309 2583 y(vsn")50 2731 y(If)c(a)h(tape)f(unit)f
(supports)g(se)o(v)o(eral)h(densities,)f(there)h(must)g(be)g(one)g
(line)g(per)g(density)m(.)4 2858 y Fe(\017)23 b Fj(EXAMPLE)10
b(CONFIGURA)n(TION)i(FILE)p eop
%%Page: 36 40
36 39 bop -64 -125 a Fn(36)934 b Ff(CHAPTER)12 b(4.)22
b(POR)m(T)l(ABLE)12 b(UNIX)f(T)l(APE)f(SUBSYSTEM)200
35 y Fd(#)200 85 y(#)672 b(Tape)25 b(Configuration)200
134 y(#)200 184 y(#unit)124 b(dev)99 b(dev)224 b(density)49
b(rewind)h(init)f(robot)74 b(dev)200 234 y(#name)124
b(group)49 b(name)199 b(\(0=N/A\))49 b(norew)75 b(stat)49
b(manual)g(tpye)200 284 y(#)200 334 y(SHIFTST0)g(CART)74
b(/dev/rst0)g(0)199 b(rewind)50 b(up)99 b(manual)49 b(3480)200
384 y(SHIFTST0)g(CART)74 b(/dev/nrst0)49 b(0)199 b(norew)75
b(up)99 b(manual)49 b(3480)200 433 y(SHIFTST1)g(CART)74
b(/dev/rst1)g(0)199 b(rewind)50 b(up)99 b(manual)49 b(3480)200
483 y(SHIFTST1)g(CART)74 b(/dev/nrst1)49 b(0)199 b(norew)75
b(up)99 b(manual)49 b(3480)200 533 y(SHIFTEX1)g(8500)74
b(/dev/rst9)g(0)199 b(rewind)50 b(up)99 b(manual)49 b(8500)200
583 y(SHIFTEX1)g(8500)74 b(/dev/nrst9)49 b(0)199 b(norew)75
b(up)99 b(manual)49 b(8500)-64 813 y Fi(4.8)60 b(tplabel)14
b(-)h(initialize)d(a)j(new)f(blank)i(tape)4 935 y Fe(\017)23
b Fj(SYNOPSIS)50 1010 y Fl(tplabel)11 b Fn([-D)h(de)o(vice)p
391 1010 14 2 v 15 w(name])g([-d)g(density])e([-g)h(de)o(vice)p
936 1010 V 16 w(group)p 1059 1010 V 15 w(name])h([-l)f(label)p
1342 1010 V 16 w(type])50 1085 y([-v)g(v)o(olume)p 253
1085 V 16 w(serial)p 368 1085 V 16 w(number[=visual)p
674 1085 V 14 w(identi\256er)g(])g(])4 1178 y Fe(\017)23
b Fj(DESCRIPTION)50 1253 y Fl(tplabel)10 b Fn(checks)h(with)e(TMS)i(if)
g(the)f(tape)g(is)g(a)o(v)o(ailable)g(and)h(if)f(the)g(user)h(has)f
(write)g(permission.)15 b(It)10 b(asks)g(the)h(operator)50
1309 y(to)i(mount)g(it)g(on)g(a)h(unit)f(selected)g(by)g(the)h(tape)f
(daemon)h(with)e(ring)h(in.)24 b(When)13 b(the)g(tape)h(is)f(ready)m(,)
i(re)o(winds)d(it)h(and)50 1366 y(writes)h(V)n(OL1)g(and)g(HDR1)g
(label)g(records)h(follo)o(wed)e(by)h(two)f(tape)i(marks)g(for)f
(labelled)g(tapes)g(or)g(only)g(two)f(tape)50 1422 y(marks)e(for)h
(unlabelled)d(tapes.)4 1515 y Fe(\017)23 b Fj(OPTIONS)50
1600 y Fl(-D)11 b(de)o(vname:)309 1656 y Fn(Explicit)e(de)o(vice)i
(name.)50 1729 y Fl(-d)h(density:)53 b(1600)10 b Fn(or)h
Fl(6250)g Fn(for)g(round)f(\(IBM)j(3420\))d(tapes,)h
Fl(8200)g Fn(or)g Fl(8500)f Fn(for)h(Exabytes.)50 1801
y Fl(-g)g(dgn:)122 b Fn(De)o(vice)12 b(group)f(name.)21
b(It)12 b(can)h(be)f(CAR)m(T)h(or)g(8MM)g(and)f(must)g(match)h(the)f
(dgn)f(speci\256ed)h(in)g(TMS.)309 1858 y(the)f(default)f(is)h(CAR)m(T)
m(.)50 1930 y Fl(-l)g(lab)p 153 1930 V 16 w(type:)45
b Fn(Label)10 b(type:)15 b Fl(al,)10 b(nl,)h(sl)f(or)g(blp.)17
b Fn(It)10 b(must)g(match)h(the)f(label)g(type)g(speci\256ed)g(in)g
(TMS.)h(The)f(blp)g(option)309 1987 y(is)g(allo)o(wed)h(only)f(for)h
(read)h(and)f(the)g(default)f(is)g(sl.)50 2048 y Fl(-v)h(vsn[=vid]:)309
2104 y Fn(Speci\256es)j(the)g(v)o(olume)f(serial)h(number)g(of)g(the)f
(tape)h(and)g(optionally)d(the)j(visual)f(identi\256er)m(.)24
b(The)o(y)309 2161 y(must)14 b(be)h(six)f(characters)h(long)f
(\(maximum\))i(and)f(are)g(con)n(v)o(erted)g(to)f(upper)h(case.)28
b(The)15 b(vsn)f(must)309 2217 y(match)d(the)g(one)g(speci\256ed)g(in)g
(TMS.)309 2312 y Fh(VOL1)28 b(record)h(structure:)309
2425 y(1:4)f("VOL1")309 2481 y(5:10)g(vsn)g(\(maximum)i(6)d(characters)
j(in)e(upper)h(case\).)309 2538 y(42:51)f(Owner)h(\(login)g(name\))g
(for)f(SL)g(tapes.)309 2632 y(HDR1)g(record)h(structure:)309
2745 y(1:4)f("HDR1")309 2802 y(5:12)g("PRELABEL")309
2858 y(28:31)g(0001)h(\(volume)g(sequence)g(number\))p
eop
%%Page: 37 41
37 40 bop -64 -125 a Ff(4.9.)28 b(TPMNT)12 b(-)f(ASK)g(OPERA)-5
b(T)o(OR)12 b(T)o(O)f(MOUNT)g(A)g(T)l(APE)g(AND)g(POSITION)g(THE)g(T)l
(APE)375 b Fn(37)309 46 y Fh(32:35)28 b(0001)h(\(file)f(sequence)i
(number\))309 102 y(43:47)e(today's)i(date)e(in)g(Julian)h(form)f
(\(creation)i(date\))309 159 y(49:53)e(today's)i(date)e(in)g(Julian)h
(form)f(\(expiration)i(date\))309 215 y(55:60)e(000000)h(\(block)g
(count\))309 271 y(61:73)f(system)h(name)g(\("SUN",)g("SGI/IRIX",)h
("DEC3100"\))4 379 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50
505 y Fh(0)82 b(No)28 b(error)50 561 y(200)g(Tape)g(daemon)h(is)f(not)g
(running.)50 618 y(201)g(System)h(or)f(communication)i(error.)50
674 y(203)e(Bad)g(parameter.)50 731 y(206)g(Too)g(many)g(units)h
(requested.)50 787 y(207)f(Invalid)h(device)g(group)g(name.)50
844 y(208)f(Reserv)h(not)f(done.)50 900 y(209)g(No)g(unit)g(with)g
(requested)i(characteristi)q(cs.)50 956 y(212)e(Interrupted)i(by)e
(user.)-64 1154 y Fi(4.9)60 b(tpmnt)15 b(-)g(ask)g(operator)e(to)i
(mount)g(a)g(tape)f(and)i(position)e(the)h(tape)4 1276
y Fe(\017)23 b Fj(SYNOPSIS)50 1352 y Fl(tpmnt)12 b Fn([-a])g([-b)f(max)
p 402 1352 14 2 v 17 w(block)p 521 1352 V 15 w(size])g([-D)h(de)o(vice)
p 826 1352 V 16 w(name])g([-d)f(density)f(])50 1428 y([-F)i(record)p
236 1428 V 16 w(format])g([-f)g(\256le)p 515 1428 V 16
w(id])f([-g)g(de)o(vice)p 775 1428 V 16 w(group)p 898
1428 V 16 w(name])h([L)f(record)p 1209 1428 V 16 w(length])50
1503 y([-l)g(label)p 196 1503 V 16 w(type])g([-n])g([-o])h([-q)f
(\256le)p 598 1503 V 16 w(sequence)p 781 1503 V 16 w(number])h([-r)g
(ring)p 1094 1503 V 15 w(option])50 1579 y([-t)f(retention)p
270 1579 V 15 w(period)p 402 1579 V 16 w(in)p 454 1579
V 15 w(days])g(-P)h(path)p 710 1579 V 16 w(name)f(-v)h(v)o(olume)p
1021 1579 V 15 w(serial)p 1135 1579 V 16 w(number[=visual)p
1441 1579 V 15 w(identi\256er])4 1673 y Fe(\017)23 b
Fj(DESCRIPTION)50 1749 y Fl(tpmnt)14 b Fn(checks)f(with)f(TMS)i(if)f
(the)g(tape)g(is)g(a)o(v)o(ailable,)h(asks)e(the)h(operator)g(to)g
(mount)g(it)f(on)h(a)h(unit)e(selected)h(by)g(the)50
1805 y(tape)g(daemon,)i(checks)e(the)h(vsn)e(in)h(V)n(OL1)g(if)h(the)f
(tape)h(is)f(labelled,)g(positions)e(to)i(the)h(\256le)f(requested,)h
(checks)g(the)50 1862 y(labels)c(HDR1)h(and)g(HDR2.)50
1937 y Fl(tpmnt)17 b Fn(stores)f(the)g(label)g(information)f(in)h(the)g
(\256le)h Fl(.tplabel)g Fn(in)f(the)g(current)g(directory)m(.)32
b(This)15 b(\256lename)i(can)g(be)50 1994 y(changed)11
b(by)f(setting)g(the)h(en)n(vironment)f(v)o(ariable)h(T)l(APENV)-6
b(.)50 2069 y(The)11 b(\256le)g(contains)f(one)h(line)g(feed)g
(terminated)g(record)h(per)f Fl(tpmnt)h Fn(command)g(in)e(the)h(follo)o
(wing)e(format:)104 2176 y Fl(\261)23 b Fn(the)11 b(pathname)g(as)g
(speci\256ed)g(in)g(tpmnt)f(\(80)h(characters\))104 2250
y Fl(\261)23 b Fn(the)11 b(tape)g(label)g(type)f(\(2)h(characters:)17
b(al,)11 b(nl)g(or)g(sl\))104 2323 y Fl(\261)23 b Fn(the)11
b(\256le)g(sequence)g(number)g(\(3)h(characters\))104
2397 y Fl(\261)23 b Fn(V)n(OL1)11 b(label)f(\(80)h(characters\))104
2470 y Fl(\261)23 b Fn(HDR1)11 b(label)g(\(80)g(characters\))104
2544 y Fl(\261)23 b Fn(HDR2)11 b(label)g(\(80)g(characters\))50
2651 y(A)j(ne)o(w)h Fl(tpmnt)g Fn(for)g(the)f(same)h(path)f(will)g(o)o
(v)o(erwrite)g(the)g(corresponding)f(record.)27 b(Three)15
b(routines)e(are)i(pro)o(vided)50 2707 y(to)d(write)g(the)g(labels:)18
b Fl(wrthdrlbl)13 b Fn(to)f(write)g(the)g(header)h(labels,)g
Fl(wrttrllbl)f Fn(to)g(write)g(the)g(trailer)h(labels,)f
Fl(asc2ebc)h Fn(is)50 2764 y(internally)c(called)i(to)g(do)g(character)
h(con)n(v)o(ersion)e(between)h(ASCII)h(and)f(EBCDIC)h(for)f(SL)h
(tapes.)4 2858 y Fe(\017)23 b Fj(OPTIONS)p eop
%%Page: 38 42
38 41 bop -64 -125 a Fn(38)934 b Ff(CHAPTER)12 b(4.)22
b(POR)m(T)l(ABLE)12 b(UNIX)f(T)l(APE)f(SUBSYSTEM)50 46
y Fl(-a:)206 b Fn(Positions)11 b(the)i(tape)g(at)g(the)g(end)g(of)h(an)
f(e)o(xisting)f(\256le)h(to)g(append)g(ne)o(w)g(data.)23
b(This)12 b(is)h(incompatible)309 102 y(with)d(-n)h(and)g(-o)g
(options.)50 177 y Fl(-b)h(blksize:)58 b Fn(Speci\256es)15
b(the)f(maximum)h(block)f(size.)27 b(The)14 b(v)o(alue)h(is)f(only)f
(used)h(to)h(b)o(uild)e(HDR2.)27 b(The)14 b(default)309
233 y(v)o(alue)c(is)g(taken)g(from)h(the)f(e)o(xisting)f(tape)h(label)g
(if)h(-a)g(or)f(-o)h(is)f(also)g(speci\256ed)g(or)h(32760)e(if)i(the)f
(option)309 289 y(-n)h(is)g(set.)50 343 y Fl(-D)g(de)o(vname:)309
399 y Fn(Explicit)e(de)o(vice)i(name.)50 474 y Fl(-d)h(density:)53
b(1600)10 b Fn(or)h Fl(6250)g Fn(for)g(round)f(\(IBM)j(3420\))d(tapes,)
h Fl(8200)g Fn(or)g Fl(8500)f Fn(for)h(Exabytes.)50 548
y Fl(-F)g(r)o(ecfm:)78 b(F)11 b Fn(or)g Fl(U)n(.)g Fn(The)g(v)o(alue)g
(is)g(only)f(used)h(to)f(b)o(uild)g(HDR2.)17 b(Default)10
b(is)h(U.)50 623 y Fl(-f)g(\256d:)153 b Fn(Speci\256es)11
b(the)f(\256leid)g(in)h(HDR1.)16 b(If)11 b(more)g(than)f(17)h
(characters)g(long,)f(only)g(the)g(last)g(17)g(are)i(taken.)j(It)309
679 y(is)9 b(then)g(con)n(v)o(erted)h(to)f(upper)h(case.)16
b(If)11 b(-n)e(is)h(not)f(speci\256ed)g(the)h(\256leid)f(parameter)i
(is)e(checked)h(against)309 736 y(the)g(\256d)g(in)g(HDR1.)17
b(If)10 b(-n)h(is)f(speci\256ed,)g(b)o(ut)g(the)g(-f)h(parameter)g(is)f
(absent,)g(the)g(pathname)h(\(-P\))g(is)f(used)309 792
y(instead.)50 866 y Fl(-g)h(dgn:)122 b Fn(De)o(vice)11
b(group)g(name.)18 b(It)12 b(can)g(be)f Fl(CAR)n(T)h
Fn(or)g Fl(8MM)f Fn(and)h(must)f(match)h(the)f(dgn)g(speci\256ed)g(in)g
(TMS.)309 923 y(Default)f(is)h(CAR)m(T)m(.)50 997 y Fl(-L)h(lr)o(ecl:)
102 b Fn(Speci\256es)15 b(the)f(logical)g(record)h(length.)26
b(The)15 b(v)o(alue)f(is)h(only)e(used)i(to)f(b)o(uild)f(HDR2.)28
b(The)14 b(default)309 1054 y(v)o(alue)c(is)h(taken)f(from)h(the)g(e)o
(xisting)f(tape)h(label)f(if)h(-a)g(or)g(-o)h(is)e(also)g(speci\256ed)h
(or)g(from)h(the)e(blocksize)309 1110 y(if)h(the)g(option)e(-n)j(is)e
(set.)50 1185 y Fl(-l)h(lab)p 153 1185 14 2 v 16 w(type:)45
b Fn(Label)11 b(type:)k Fl(al,)c(nl,)h(sl)e(or)i(blp.)17
b Fn(It)11 b(must)g(match)g(the)g(label)g(type)f(speci\256ed)h(in)g
(TMS.)h(blp)f(is)f(allo)o(wed)309 1241 y(only)g(for)h(read.)17
b(Default)11 b(is)f(sl.)50 1315 y Fl(-n:)204 b Fn(Positions)9
b(the)i(tape)g(at)g(the)f(speci\256ed)h(\256le.)17 b(It)11
b(does)g(not)f(check)h(the)g(\256leid)g(b)o(ut)f(if)h(the)g(ne)o(w)g
(\256le)g(would)309 1372 y(o)o(v)o(erwrite)g(an)g(e)o(xisting)f(one,)h
(it)g(checks)g(the)g(old)f(\256le)i(e)o(xpiry)f(date.)50
1446 y Fl(-o:)206 b Fn(Positions)12 b(the)j(tape)f(at)h(the)f
(speci\256ed)g(\256le.)27 b(It)15 b(checks)f(the)g(\256leid)h(if)f
(speci\256ed.)27 b(If)15 b(ring)f(in)g(is)g(also)309
1503 y(speci\256ed,)h(and)g(the)f(ne)o(w)g(\256le)h(would)e(o)o(v)o
(erwrite)i(an)f(e)o(xisting)g(one,)h(it)f(checks)h(the)f(old)g(\256le)h
(e)o(xpiry)309 1559 y(date.)50 1613 y Fl(-P)c(pathname:)309
1669 y Fn(Speci\256es)g(the)f(pathname)g(relati)o(v)o(e)h(to)f(the)g
(current)g(directory)g(or)h(the)f(full)g(pathname)g(which)g(be)h(used)
309 1726 y(by)g(the)g(application)e(program)i(in)g(the)g(OPEN)g
(statement.)16 b(This)10 b(path)h(should)e(not)i(e)o(xist)f(yet.)50
1800 y Fl(-q)i(fseq:)114 b Fn(File)10 b(sequence)h(number)m(.)17
b(It)11 b(can)g(be)g(a)g(positi)o(v)o(e)e(inte)o(ger)h(number)h(to)g
(gi)o(v)o(e)f(an)h(e)o(xplicit)f(position,)e Fl(n)k Fn(to)309
1857 y(specify)e(a)i(ne)o(w)f(\256le)g(after)h(the)f(last)f(\256le)i
(on)f(tape)g(or)g Fl(u)h Fn(to)e(position)f(the)i(tape)g(by)g(\256d.)17
b(Default)10 b(is)h(1.)50 1931 y Fl(-r)h(ring:)116 b
Fn(Ring)11 b(option:)j(either)d Fl(in)g Fn(\(write)g(enable\))g(or)g
Fl(out)h Fn(\(write)f(disable\).)k(Default)c(is)f(ring)h(out.)50
2005 y Fl(-t)g(days:)114 b Fn(Retention)8 b(period)g(in)h(days.)15
b(A)9 b(\256le)g(may)h(be)f(o)o(v)o(erwritten)f(only)g(if)h(it)g(is)f
(e)o(xpired.)16 b(Default)8 b(is)g(0,)i(which)309 2062
y(means)h(that)g(the)g(\256le)g(may)h(be)f(o)o(v)o(erwritten)g
(immediately)m(.)50 2125 y Fl(-v)g(vsn[=vid]:)309 2181
y Fn(Speci\256es)j(the)g(v)o(olume)f(serial)h(number)g(of)g(the)f(tape)
h(and)g(optionally)d(the)j(visual)f(identi\256er)m(.)24
b(The)o(y)309 2238 y(must)14 b(be)h(six)f(characters)h(long)f
(\(maximum\))i(and)f(are)g(con)n(v)o(erted)g(to)f(upper)h(case.)28
b(The)15 b(vsn)f(must)309 2294 y(match)d(the)g(one)g(speci\256ed)g(in)g
(TMS.)4 2391 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 2520
y Fh(0)82 b(No)28 b(error)50 2576 y(2)82 b(File)28 b(not)g(found.)50
2632 y(6)82 b(Unit)28 b(not)g(operational.)50 2689 y(13)55
b(Operator)29 b(cancel:)h(access)e(denied)h(by)f(TMS,)159
2745 y(wrong)h(label)f(type)h(or)e(file)i(not)f(expired.)50
2802 y(200)g(Tape)g(daemon)h(is)f(not)g(running.)50 2858
y(201)g(System)h(or)f(communication)i(error.)p eop
%%Page: 39 43
39 42 bop -64 -125 a Ff(4.10.)28 b(TPRST)l(A)-5 b(T)11
b(-)g(GIVE)g(THE)g(DEVICE)g(GR)n(OUP)h(RESER)l(V)-6 b(A)h(TIONS)11
b(FOR)h(ALL)f(T)l(APE)f(USERS)259 b Fn(39)50 46 y Fh(203)28
b(Bad)g(parameter.)50 102 y(206)g(Too)g(many)g(units)h(requested.)50
159 y(207)f(Invalid)h(device)g(group)g(name.)50 215 y(208)f(Reserv)h
(not)f(done.)50 271 y(209)g(No)g(unit)g(with)g(requested)i
(characteristi)q(cs.)50 328 y(210)e(Bad)g(label)h(structure.)50
384 y(211)f(Bad)g(file)g(sequence)i(number.)50 441 y(212)e(Interrupted)
i(by)e(user.)4 564 y Fe(\017)23 b Fj(SEE)10 b(ALSO)50
638 y Fn(wrthdrlbl,)g(wrttrllbl,)f(deltp\256l)-64 834
y Fi(4.10)60 b(tprstat)14 b(-)h(gi)o(v)o(e)g(the)f(de)o(vice)g(gr)o
(oup)g(r)o(eser)o(v)o(ations)g(f)o(or)g(all)g(tape)h(users)4
956 y Fe(\017)23 b Fj(SYNOPSIS)50 1031 y Fl(tprstat)4
1124 y Fe(\017)g Fj(DESCRIPTION)50 1199 y Fl(tprstat)13
b Fn(gi)o(v)o(es)f(the)h(de)o(vice)f(group)g(reserv)o(ations)f(for)i
(all)g(tape)f(users)h(in)f(tab)o(ular)g(form:)20 b(one)13
b(line)f(per)h(de)o(vice)f(group)50 1255 y(per)f(user)m(.)50
1360 y Fl(userid:)123 b Fn(user)11 b(login)f(name.)17
b(The)11 b(tpdaemon)g(entry)f(gi)o(v)o(es)h(a)g(summary)h(for)f(the)g
(complete)g(system.)50 1433 y Fl(jid:)191 b Fn(process)10
b(id)h(of)g(the)g(user)g(login)f(shell.)16 b(It)11 b(is)g(equal)g(to)f
(the)h(process)g(group)f(id)h(for)g(the)g(Bourne)g(shell.)50
1505 y Fl(dgn:)171 b Fn(de)o(vice)11 b(group)f(name.)50
1578 y Fl(rsvd:)158 b Fn(number)14 b(of)g(units)f(reserv)o(ed)h(in)g
(this)f(de)o(vice)h(group.)25 b(The)13 b(tpdaemon)h(entry)g(gi)o(v)o
(es)f(the)h(number)g(of)309 1634 y(units)c(con\256gured.)50
1707 y Fl(used:)156 b Fn(number)11 b(of)g(units)f(allocated)g(in)h
(this)f(de)o(vice)h(group.)50 1779 y Fl(queued:)104 b
Fn(number)11 b(of)g(unit)f(allocation)g(requests)g(pending)g(for)h
(this)g(de)o(vice)f(group.)4 1885 y Fe(\017)23 b Fj(RETURN)11
b(CODES)50 2007 y Fh(0)82 b(No)28 b(error)50 2064 y(200)g(Tape)g
(daemon)h(is)f(not)g(running.)50 2120 y(201)g(System)h(or)f
(communication)i(error.)-64 2316 y Fi(4.11)60 b(tpstat)15
b(-)f(gi)o(v)o(e)h(the)g(status)g(of)g(all)f(tape)g(units)4
2438 y Fe(\017)23 b Fj(SYNOPSIS)50 2513 y Fl(tpstat)4
2606 y Fe(\017)g Fj(DESCRIPTION)50 2681 y Fl(tpstat)11
b Fn(gi)o(v)o(es)g(the)g(status)f(of)h(all)g(tape)g(units)f(in)g(tab)o
(ular)h(form:)50 2786 y Fl(userid:)123 b Fn(login)10
b(name)h(if)h(the)e(unit)h(is)f(assigned.)50 2858 y Fl(jid:)191
b Fn(process)10 b(id)h(of)g(the)g(login)f(shell.)16 b(It)11
b(is)g(equal)f(to)h(the)g(process)g(group)f(id)h(for)g(the)g(Bourne)g
(shell.)p eop
%%Page: 40 44
40 43 bop -64 -125 a Fn(40)929 b Ff(CHAPTER)12 b(4.)27
b(POR)m(T)l(ABLE)12 b(UNIX)f(T)l(APE)f(SUBSYSTEM)50 46
y Fl(dgn:)171 b Fn(de)o(vice)11 b(group)f(name)i(to)f(which)f(belongs)g
(the)h(tape)g(unit.)50 118 y Fl(stat:)173 b Fn(unit)10
b(status.)16 b Fl(idle)11 b Fn(-)h(unit)e(is)h(free)h(for)g(use,)f
Fl(assn)g Fn(-)h(unit)e(is)h(assigned)f(to)h(a)h(job,)f
Fl(down)g Fn(-)h(unit)e(has)h(been)309 175 y(con\256gured)g(do)o(wn)f
(and)h(cannot)f(be)i(used.)50 248 y Fl(dvn:)171 b Fn(de)o(vice)11
b(name)g(as)h(it)e(appears)i(in)e(operator)h(mount)g(messages.)50
321 y Fl(r:)224 b Fn(ring)10 b(status:)15 b(i)c(-)g(write)g(enable,)h
(o)f(-)g(write)g(disable)50 393 y Fl(l:)231 b Fn(label)11
b(type:)k(a:)h(AL.)11 b(n:)16 b(NL.)11 b(s:)16 b(SL.)c(b:)k(BLP)-5
b(.)50 466 y Fl(vsn:)178 b Fn(v)o(olume)11 b(serial)f(number)50
539 y Fl(vid:)183 b Fn(visual)10 b(identi\256er)4 645
y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 769 y Fh(0)82
b(No)28 b(error)50 825 y(200)g(Tape)g(daemon)h(is)f(not)g(running.)50
882 y(201)g(System)h(or)f(communication)i(error.)-64
1078 y Fi(4.12)60 b(User)14 b(Callable)g(Routines)g(to)h(Read/Write)e
(T)-5 b(ape)14 b(Labels)4 1200 y Fe(\017)23 b Fj(SYNOPSIS)50
1324 y Fh(int)28 b(checkeofeov\(ta)q(pef)q(d,)i(path\))50
1380 y(int)e(tapefd;)50 1437 y(char)g(*path;)50 1549
y(int)g(wrthdrlbl\(tape)q(fd,)j(path\))50 1662 y(char)d(*path;)50
1775 y(int)g(wrttrllbl\(tape)q(fd,)j(path,)d(labelid,)i(nblocks\))50
1832 y(int)e(tapefd;)50 1888 y(char)g(*path;)50 1945
y(char)g(*labelid;)50 2001 y(int)g(nblocks;)50 2114 y(int)g
(deltpfil\(tapef)q(d,)j(path\))50 2170 y(int)d(tapefd;)50
2227 y(char)g(*path;)4 2351 y Fe(\017)23 b Fj(DESCRIPTION)50
2426 y Fn(These)11 b(routines)f(check)i(for)f(EOF)h(and)f(EO)n(V)g
(labels,)g(write)g(the)g(labels)g(onto)f(a)i(tape,)g(using)e(the)h
(information)f(stored)50 2482 y(by)f Fl(tpmnt)i Fn(in)e(the)g(\256le)h
(indicated)e(by)i(the)f(T)l(APENV)g(v)o(ariable)g(\(.tplabel)g(by)g
(default\).)15 b(The)10 b(tape)f(\256le)h(must)f(ha)o(v)o(e)h(been)50
2539 y(pre)o(viously)f(open)i(in)h(the)f(user)g(program,)h
Fh(tapefd)i Fn(being)c(the)i(\256le)g(descriptor)e(returned)h(by)g(the)
h Fh(open)h Fn(statement.)50 2595 y Fh(path)f Fn(must)f(point)f(to)h(a)
g(string)f(identical)g(to)h(the)g(-P)g(parameter)h(on)f(the)g
(corresponding)f Fl(tpmnt)p Fn(.)50 2670 y Fl(checkeofeov\(\))i
Fn(checks)f(for)g(EOF)h(and)f(EO)n(V)g(labels.)16 b(The)c(function)e
(should)f(be)j(called)f(when)g(a)h(tapemark)g(is)f(read.)50
2727 y(It)g(returns)g(0)g(for)g(EOF)l(,)h(213)f(for)g(EO)n(V)f(or)i(a)f
(ne)o(gati)o(v)o(e)g(number)g(in)g(case)g(of)h(error)m(.)50
2802 y Fl(wrthdrlbl\(\))h Fn(writes)f(the)g(header)g(labels)g(onto)f(a)
i(tape.)20 b(The)o(y)12 b(consist)e(of)j(a)f(V)n(OL1)g(record)h(for)f
(the)g(\256rst)h(\256le)f(and)g(of)50 2858 y(HDR1)i(and)f(HDR2)h(for)g
(all)f(\256les)h(on)f(a)i(labelled)e(tape.)24 b(The)14
b(tapemark)g(which)f(precedes)h(the)f(label)h(group)f(for)h(all)p
eop
%%Page: 41 45
41 44 bop -64 -125 a Ff(4.12.)28 b(USER)11 b(CALLABLE)g(R)n(OUTINES)g
(T)o(O)h(READ/WRITE)e(T)l(APE)h(LABELS)578 b Fn(41)50
46 y(\256les,)15 b(the)f(\256rst)g(one)g(e)o(xcepted,)i(is)d(re)o
(written)h(\(Exabyte)f(de)o(vices)h(need)g(this\).)25
b(The)14 b(label)g(group)f(is)h(ended)g(by)f(one)50 102
y(tapemark.)k(F)o(or)11 b(nl)f(tapes,)g(only)g(the)g(tapemark)h(is)f
(re)o(written)f(if)i(not)e(at)i(bot.)k(The)c(routine)e(should)g(be)h
(called)h(after)g(the)50 159 y(open)g(and)g(before)g(the)g(\256rst)g
(write)g(operation)f(on)h(the)g(tape)g(\256le.)50 234
y Fl(wrttrllbl\(\))20 b Fn(writes)f(the)g(trailer)h(labels)f(onto)f(a)i
(tape.)43 b(The)o(y)19 b(consist)g(of)g(a)h(pair)g(of)g(records)f
(EOF1/EOF2)g(or)50 290 y(EO)n(V1/EO)n(V2)10 b(for)j(all)g(\256les)f(on)
h(a)g(labelled)f(tape.)21 b Fh(labelid)15 b Fn(indicates)c(EOF)i(or)g
(EO)n(V)f(while)g Fh(nblocks)j Fn(should)50 347 y(be)c(set)f(to)g(the)h
(number)f(of)h(physical)e(blocks)h(written)f(in)i(the)f(current)h
(\256le)g(section.)k(The)10 b(label)h(group)f(is)g(preceded)h(by)50
403 y(one)g(tapemark)h(and)g(follo)o(wed)e(by)h(two)f(tapemarks.)18
b(F)o(or)12 b(nl)g(tapes,)f(only)g(two)f(tapemarks)i(are)g(written.)17
b(The)11 b(tape)h(is)50 460 y(the)g(positionned)e(back)i(between)g(the)
g(tapemarks.)21 b(The)12 b(routine)f(should)g(be)i(called)f(after)h
(the)f(last)f(write)h(operation)50 516 y(on)f(the)g(tape)g(\256le)g
(and)g(before)h(the)e(close.)50 591 y Fl(deltp\256l\(\))i
Fn(may)f(be)g(called)g(after)h Fl(wrthdrlbl)f Fn(and)g(e)o(v)o
(entually)f(some)h(writes)f(to)h(delete)g(the)f(current)h(\256le)h(on)e
(the)h(tape.)50 648 y(The)i(tape)h(is)f(positionned)e(back)i(in)h
(front)f(of)g(the)h(\256le)g(label.)23 b(If)14 b(the)f(\256le)h(is)f
(the)h(\256rst)f(one)h(on)f(the)g(tape,)i(the)e(header)50
704 y(label)e(is)f(re)o(written)h(with)f(a)h(retention)f(period)h(of)g
(0,)g(otherwise)g(two)f(tape)h(marks)g(are)h(written)e(o)o(v)o(er)m(.)4
798 y Fe(\017)23 b Fj(RETURN)11 b(V)m(ALUE)50 873 y Fn(These)g
(routines)e(return)i(0)g(if)h(the)e(operation)g(was)h(successful)f(or)h
(a)h(ne)o(gati)o(v)o(e)e(number)i(if)f(the)f(operation)g(failed.)16
b(This)50 929 y(number)11 b(corresponds)f(to)h(the)g(ne)o(gated)g(v)o
(alue)f(of)h Fh(errno.)p eop
%%Page: 42 46
42 45 bop -64 405 a Fp(Chapter)22 b(5)-64 640 y(RFIO)g(-)f(Remote)h
(File)f(I/O)h(System)-64 911 y Fn(The)12 b(Remote)g(File)f(I/O)h
(System)f(\(RFIO\))i(pro)o(vides)e(an)g(ef)o(\256cient)h(way)f(of)h
(accessing)f(\256les)g(stored)g(on)g(SHIFT)h(disk)f(serv)o(ers)-64
968 y(from)h(SHIFT)g(cpu)g(and)f(tape)h(serv)o(ers.)17
b(These)12 b(\256les)f(may)h(also)f(be)h(accessed)g(using)e
Fg(NFS)p Fn(,)j(b)o(ut)e(the)g(RFIO)h(will)f(take)g(account)-64
1024 y(of)g(the)g(network)f(characteristics)h(and)g(the)f(mode)i(of)f
(use)g(of)g(the)g(\256le)h(to)e(minimise)h(o)o(v)o(erheads)g(and)g
(maximise)g(throughput.)-64 1129 y(Each)i(SHIFT)h(node)f(runs)g(a)g
(special)g(daemon,)h(the)f(RFIO)h(serv)o(er)n(,)h(which)d(implements)h
(\256le)g(access)h(requests)e(from)i(other)-64 1185 y(nodes.)i
(Normally)11 b(this)f(is)g(done)h(using)f Fg(TCP)p Fn(/)p
Fg(IP)i Fn(protocols)e(o)o(v)o(er)h(UltraNet)g(as)g(the)g(network)f
(medium.)-64 1290 y(Files)j(are)i(identi\256ed)d(to)i(RFIO)g(by)f(an)h
Fj(nfs)p 633 1290 14 2 v 15 w(pathname)f Fn(\(see)h(Section)f(1.1\))h
(or)f(alternately)m(,)h(by)f(a)h(\256le)g(speci\256cation)f(of)h(the)
-64 1347 y(form:)654 1461 y Fh(host:<unix)30 b(path)e(name>)-64
1575 y Fn(The)12 b(RFIO)g(uses)f(the)g(structure)g(of)h(the)f(name,)i
(and)f(kno)o(wledge)e(of)h(the)h(con\256guration)e(to)h(decide)g(on)h
(the)f(best)g(underlying)-64 1632 y(access)h(method)e(to)h(use:)16
b(local)10 b(disk)h(access;)g(use)g(of)g(a)g(remote)h(RFIO)g(serv)o
(er;)f Fg(NFS)p Fn(.)-64 1736 y(The)g(user)g(interface)g(to)g(the)g
(RFIO)h(is)e(de\256ned)i(for)f(the)g(C)h(and)f(F)o(ortran)g(languages.)
-64 1841 y(The)g(RFIO)h(include)e(\256le,)i Fl(shift.h)p
Fn(,)g(is)f(stored)g(in)f(the)h(directory)g Fl(/usr/include)p
Fn(.)-64 1946 y(The)e(object)g(library)f(is)h Fl(/usr/local/lib/libshi)
o(ft.a)p Fn(.)14 b(In)9 b(addition,)f(system)h(dependent)f(libraries)h
(should)e(be)j(added)f(\(e)o(g.)16 b(-lsun)-64 2002 y(on)e(Silicon)e
(Graphics)h(systems\))h(as)f(well)h(as)f(network)g(dependent)g
(libraries)g(such)g(as)h(-lulsock)e(for)i(UltraNet)f(operation.)-64
2059 y(F)o(or)f(e)o(xample,)g(on)f(SGI')m(s)h(IRIXx:)354
2173 y Fh(cc)28 b(-o)f(a.out)i(myprog.c)h(-lshift)f(-lsun)f(-lulsock)
-64 2287 y Fn(The)15 b(follo)o(wing)e(option)g(should)h(be)h
(speci\256ed)g(to)f(the)h(loader:)23 b Fh(-L/usr/local)q(/li)q(b)30
b(-lshift)p Fn(.)g(In)15 b(addition)f(on)-64 2344 y(SGI)e(systems,)e
(the)h(options)f Fh(-lsun)i Fn(and)f Fh(-lulsock)j Fn(must)d(be)g
(included.)-64 2537 y Fi(5.1)60 b(C)15 b(Interface)-64
2689 y Fn(The)d(C)g(interface)g(is)f(de\256ned)h(in)f(terms)h(of)g(a)g
(set)g(of)g(procedures)f(with)g(names)h(pre\256x)o(ed)h(by)e
Fl(r\256o)p 1496 2689 V 17 w Fn(,)h(de\256ned)g(in)f(this)g(section.)
-64 2745 y(These)k(de\256nitions)f(are)i(contained)e(in)h(the)g
(include)f(\256le)h Fj(shift.h)p Fn(.)28 b(The)15 b(include)f(\256le)i
(also)e(maps)i(the)f(standard)f(C)i(library)-64 2802
y(procedures)8 b(\()p Fj(fopen,)g(fr)n(ead,)h(fwrite,)e(f)o(\257ush,)h
(fstat,)g(fclose,)f(open,)i(r)n(ead,)g(write,)f(stat,)g(close)p
Fn(\))g(on)f(to)h(the)f(equi)o(v)o(alent)g(procedures)-64
2858 y(with)j Fj(r\256o)p 95 2858 V 27 w Fn(pre\256x.)917
2958 y(42)p eop
%%Page: 43 47
43 46 bop -64 -125 a Ff(5.1.)28 b(C)12 b(INTERF)m(A)n(CE)1580
b Fn(43)-64 46 y(Whene)o(v)o(er)12 b(an)f(error)g(occurs,)h(the)f
(error)g(code)h(will)e(be)h(stored)f(in)h(the)g(global)f(inte)o(ger)h
(v)o(ariable)g Fl(r\256o)p 1554 46 14 2 v 16 w(err)o(no)p
Fn(.)-64 222 y Fq(5.1.1)51 b(Opening)11 b(a)h(\256le)-64
329 y Fl(r\256o)p 7 329 V 17 w(f)o(open)23 b(#include)11
b Fk(<)i(shif)5 b(t:h)14 b(>)50 404 y Fl(RFILE)d(*r\256o)p
294 404 V 16 w(f)o(open)h(\(const)g(char)f(*\256lepath,)h(const)g(char)
f(*\256lemode\);)50 480 y Fn(The)g(ar)o(guments)g(for)g(the)g
Fl(r\256o)p 534 480 V 17 w(f)o(open)g Fn(function)f(are)i(as)f(follo)o
(ws)f(:)50 588 y Fl(\256lepath)23 b Fn(A)17 b(character)g(string)f
(containing)f(the)h(\256le)h(name)g(speci\256cation.)33
b(See)17 b(Section)f(1.1)h(for)g(details)f(of)h(the)150
645 y(format)11 b(of)h(a)f(standard)g Fj(shift)e Fn(\256lename.)50
718 y Fl(\256lemode)23 b Fn(An)11 b(access)g(mode)g(indicator)m(.)16
b(One)11 b(of)h(the)f(characters)g(\252r",)h(\252w".)50
826 y(On)g(failure,)g Fl(r\256o)p 331 826 V 16 w(f)o(open)h
Fn(returns)e(the)h(NULL)g(pointer)f(and)h(the)f(error)i(code)f(is)g
(stored)f(in)h Fl(r\256o)p 1574 826 V 16 w(err)o(no)p
Fn(.)20 b(F)o(ailure)13 b(may)50 883 y(be)g(caused)g(by)f(opening)g(a)h
(non-e)o(xistent)e(\256le,)j(lack)f(of)g(disk)f(space,)i(network)e
(communication)g(failures,)g(etc.)22 b(The)50 939 y(\256le)11
b(control)f(block)h(may)g(be)h(freed)f(with)g(the)g Fl(rfclose)g
Fn(function.)-64 1034 y Fl(r\256o)p 7 1034 V 17 w(open)50
1167 y(#include)g Fk(<)i(shif)5 b(t:h)14 b(>)50 1243
y Fl(int)d(r\256o)p 185 1243 V 17 w(open)h(\(const)f(char)h
(*\256lepath,)g(const)f(int)h(\257ags,)f(const)g(int)g(mode\);)50
1318 y Fn(The)g(ar)o(guments)g(for)g(the)g Fl(r\256o)p
534 1318 V 17 w(open)g Fn(function)f(are)i(as)f(follo)o(ws)f(:)50
1426 y Fl(\256lepath)23 b Fn(A)17 b(character)g(string)f(containing)f
(the)h(\256le)h(name)g(speci\256cation.)33 b(See)17 b(Section)f(1.1)h
(for)g(details)f(of)h(the)150 1483 y(format)11 b(of)h(a)f(standard)g
Fj(shift)e Fn(\256lename.)50 1556 y Fl(\257ags)22 b Fn(The)11
b(\257ags)g(are)h(speci\256ed)f(belo)o(w)m(.)50 1630
y Fl(mode)23 b Fn(Speci\256es)11 b(the)g(permission)f(bits)g(to)h(be)g
(set)g(if)g(the)g(\256le)g(is)g(created.)50 1738 y(open)k(opens)h(the)g
(\256le)g(path)g(for)g(reading)f(and/or)h(writing,)g(as)g(speci\256ed)g
(by)g(the)g(\257ags)g(ar)o(gument,)h(and)f(returns)g(a)50
1795 y(descriptor)d(for)i(that)f(\256le.)27 b(The)14
b(\257ags)h(ar)o(gument)f(may)h(indicate)f(the)g(\256le)h(is)f(to)g(be)
g(created)h(if)g(it)f(does)g(not)f(already)50 1851 y(e)o(xist)f(\(by)h
(specifying)e(the)i(O)p 529 1851 V 16 w(CREA)-5 b(T)13
b(\257ag\),)i(in)d(which)g(case)i(the)e(\256le)h(is)g(created,)h(with)e
(permission)g(mode)h(mode,)50 1908 y(modi\256ed)e(by)g(the)g(current)g
(umask.)50 1983 y(The)g(\257ags)g(speci\256ed)g(are)h(formed)g(by)e
(ORing)h(the)g(follo)o(wing)e(v)o(alues:)186 2110 y Fh(O_RDONLY)84
b(Open)29 b(for)f(reading)h(only)186 2167 y(O_WRONLY)84
b(Open)29 b(for)f(writing)h(only.)186 2223 y(O_RDWR)138
b(Open)29 b(for)f(reading)h(and)f(writing.)186 2280 y(O_NDELAY)84
b(Do)28 b(not)g(block)h(on)f(open.)186 2336 y(O_APPEND)84
b(Append)29 b(on)f(each)g(write.)186 2393 y(O_CREAT)111
b(Create)29 b(file)f(if)g(it)g(does)g(not)h(exist.)186
2449 y(O_TRUNC)111 b(Truncate)30 b(size)e(to)g(0.)186
2505 y(O_EXCL)138 b(Error)29 b(if)f(create)h(and)f(file)g(exists.)50
2632 y Fn(Opening)8 b(a)j(\256le)f(with)e(O)p 441 2632
V 17 w(APPEND)h(set)h(causes)f(each)i(write)e(on)h(the)f(\256le)h(to)g
(be)f(appended)h(to)f(the)g(end.)16 b(If)11 b(O)p 1779
2632 V 16 w(TR)n(UNC)50 2689 y(is)f(speci\256ed)h(and)g(the)g(\256le)g
(e)o(xists,)f(the)h(\256le)h(is)e(truncated)g(to)h(zero)g(length.)16
b(If)11 b(O)p 1315 2689 V 16 w(EXCL)g(is)g(set)f(with)g(O)p
1689 2689 V 17 w(CREA)-5 b(T)m(,)11 b(then)50 2745 y(if)k(the)f(\256le)
h(already)g(e)o(xists,)g(the)g(open)f(returns)h(an)g(error)m(.)28
b(This)14 b(can)h(be)g(used)g(to)f(implement)g(a)i(simple)e(e)o(xclusi)
o(v)o(e)50 2802 y(access)i(locking)e(mechanism.)31 b(If)16
b(O)p 665 2802 V 17 w(EXCL)f(is)h(set)f(and)h(the)f(last)h(component)f
(of)h(the)f(pathname)h(is)f(a)h(symbolic)50 2858 y(link,)11
b(the)h(open)f(will)f(succeed)i(e)o(v)o(en)g(if)g(the)f(symbolic)g
(link)g(points)f(to)h(an)h(e)o(xisting)e(name.)19 b(If)12
b(the)g(O)p 1669 2858 V 16 w(NDELA)-5 b(Y)11 b(\257ag)p
eop
%%Page: 44 48
44 47 bop -64 -125 a Fn(44)985 b Ff(CHAPTER)12 b(5.)28
b(RFIO)12 b(-)f(REMO)n(TE)h(FILE)f(I/O)g(SYSTEM)50 46
y Fn(is)j(speci\256ed)g(and)h(the)f(open)g(call)h(would)e(result)h(in)g
(the)g(process)h(being)e(blocked)h(for)h(some)f(reason)h(\(for)g(e)o
(xample)50 102 y(waiting)9 b(for)j(a)g(carrier)g(on)f(a)h(dial-up)e
(line\),)i(the)f(open)g(returns)g(immediately)m(.)17
b(The)11 b(\256rst)g(time)h(the)f(process)g(attempts)50
159 y(to)g(perform)g Fg(I)p Fn(/)p Fg(O)h Fn(on)f(the)f(open)h(\256le,)
h(it)f(will)f(block)g(\(not)h(currently)f(implemented\).)50
236 y(If)f(successful,)f Fl(r\256o)p 367 236 14 2 v 17
w(open)h Fn(returns)f(a)h(non-ne)o(gati)o(v)o(e)e(inte)o(ger)h(which)g
(may)h(be)f(used)g(to)g(refer)i(to)e(the)g(\256le)h(on)f(subsequent)50
293 y Fj(rwrite,)h(rr)n(ead)h Fn(and)g Fj(r)n(close)f
Fn(calls.)16 b(On)10 b(failure,)g Fl(r\256o)p 875 293
V 16 w(open)h Fn(returns)f(a)g(ne)o(gati)o(v)o(e)f(inte)o(ger)h(and)g
(the)g(error)g(code)g(is)g(stored)50 349 y(in)h Fl(r\256o)p
168 349 V 16 w(err)o(no)p Fn(.)-64 532 y Fq(5.1.2)51
b(Closing)12 b(a)g(\256le)-64 639 y Fl(r\256o)p 7 639
V 17 w(fclose)50 773 y(#include)f Fk(<)i(shif)5 b(t:h)14
b(>)50 851 y Fl(int)d(r\256o)p 185 851 V 17 w(fclose)g(\(const)g(RFILE)
g(*fd\);)50 929 y Fn(The)g(ar)o(gument)g(for)g(the)g
Fl(r\256o)p 516 929 V 17 w(fclose)g Fn(function)f(is)g(:)50
1042 y Fl(fd)23 b Fn(The)11 b(descriptor)n(,)g(generated)g(by)g
Fl(r\256o)p 714 1042 V 16 w(f)o(open)p Fn(,)h(of)g(the)e(\256le)i(to)f
(be)g(closed.)50 1155 y(On)g(success,)g Fl(r\256o)p 347
1155 V 16 w(fclose)g Fn(returns)g(0.)16 b(On)11 b(failure,)g(it)g
(returns)f(-1)i(and)f(the)g(error)g(code)g(is)g(stored)g(in)f
Fl(r\256o)p 1722 1155 V 17 w(err)o(no)p Fn(.)-64 1254
y Fl(r\256o)p 7 1254 V 17 w(close)50 1388 y(#include)h
Fk(<)i(shif)5 b(t:h)14 b(>)50 1466 y Fl(int)d(r\256o)p
185 1466 V 17 w(close)g(\(const)g(int)g(s\);)50 1544
y Fn(The)g(ar)o(gument)g(for)g(the)g Fl(r\256o)p 516
1544 V 17 w(close)g Fn(function)f(is)g(:)50 1656 y Fl(s)22
b Fn(The)11 b(descriptor)n(,)g(generated)g(by)g Fl(r\256o)p
691 1656 V 16 w(open)p Fn(,)i(of)e(the)g(\256le)g(to)g(be)g(closed.)50
1769 y(On)g(success,)g Fl(close)g Fn(returns)f(0.)17
b(On)11 b(failure,)f(it)h(returns)g(-1)g(and)g(the)g(error)h(code)f(is)
f(stored)h(in)g Fl(r\256o)p 1623 1769 V 16 w(err)o(no)p
Fn(.)-64 1952 y Fq(5.1.3)51 b(Reading)11 b(a)i(\256le)-64
2059 y Fl(r\256o)p 7 2059 V 17 w(fr)o(ead)50 2193 y(#include)e
Fk(<)i(shif)5 b(t:h)14 b(>)50 2271 y Fl(int)d(r\256o)p
185 2271 V 17 w(fr)o(ead)h(\(char)g(*ptr)l(,)g(const)f(int)g(size,)h
(const)f(int)h(items,)f(const)g(RFILE*)g(fd\);)50 2349
y Fn(The)g(ar)o(guments)g(for)g(the)g Fl(r\256o)p 534
2349 V 17 w(fr)o(ead)h Fn(function)e(are)h(as)h(follo)o(ws)d(:)50
2462 y Fl(ptr)23 b Fn(A)11 b(pointer)f(to)h(the)g(memory)h(location)e
(in)h(which)f(to)h(place)g(the)g(information.)50 2538
y Fl(size)22 b Fn(The)11 b(size)g(of)h(each)f(item)g(to)g(be)g(read,)h
(in)f(bytes.)50 2613 y Fl(items)22 b Fn(The)11 b(number)g(of)h(items)e
(to)h(be)g(read.)50 2689 y Fl(fd)23 b Fn(The)11 b(descriptor)n(,)g
(generated)g(by)g Fl(r\256o)p 714 2689 V 16 w(f)o(open)p
Fn(,)h(of)g(the)e(\256le)i(to)f(be)g(read.)50 2802 y(On)16
b(failure,)i Fl(r\256o)p 341 2802 V 17 w(fr)o(ead)f Fn(returns)f(-1,)j
(the)d(error)h(code)g(being)f(stored)g(in)g Fl(r\256o)p
1334 2802 V 17 w(err)o(no)p Fn(.)34 b(Otherwise)15 b(it)h(returns)h
(the)50 2858 y(number)11 b(of)g(items)g(actually)f(read.)p
eop
%%Page: 45 49
45 48 bop -64 -125 a Ff(5.1.)28 b(C)12 b(INTERF)m(A)n(CE)1580
b Fn(45)-64 46 y Fl(r\256o)p 7 46 14 2 v 17 w(r)o(ead)50
184 y(#include)11 b Fk(<)i(shif)5 b(t:h)14 b(>)50 267
y Fl(int)d(r\256o)p 185 267 V 17 w(r)o(ead)h(\(const)f(int)h(s,)f(char)
h(*ptr)l(,)g(const)f(int)g(size\);)50 349 y Fn(The)g(ar)o(guments)g
(for)g(the)g Fl(r\256o)p 534 349 V 17 w(r)o(ead)h Fn(function)d(are)j
(as)f(follo)o(ws)f(:)50 474 y Fl(s)22 b Fn(The)11 b(descriptor)n(,)g
(generated)g(by)g Fl(r\256o)p 691 474 V 16 w(open)p Fn(,)i(of)e(the)g
(\256le)g(to)g(be)g(read.)50 554 y Fl(ptr)23 b Fn(A)11
b(pointer)f(to)h(the)g(memory)h(location)e(in)h(which)f(to)h(place)g
(the)g(information.)50 634 y Fl(size)22 b Fn(The)11 b(number)h(of)f
(bytes)f(to)h(be)g(read.)50 759 y(On)d(failure,)h Fl(r\256o)p
324 759 V 17 w(r)o(ead)g Fn(returns)f(-1,)h(the)g(error)g(code)f(being)
g(stored)g(in)g Fl(r\256o)p 1228 759 V 17 w(err)o(no)p
Fn(.)16 b(Otherwise)8 b(it)g(returns)g(the)g(number)50
815 y(of)j(items)g(actually)f(read.)-64 1011 y Fq(5.1.4)51
b(Writing)11 b(a)h(\256le)-64 1121 y Fl(r\256o)p 7 1121
V 17 w(fwrite)50 1260 y(#include)f Fk(<)i(shif)5 b(t:h)14
b(>)50 1342 y Fl(int)d(r\256o)p 185 1342 V 17 w(fwrite)g(\(const)h
(char)f(*ptr)l(,)h(const)g(int)f(size,)h(const)f(int)g(items,)h(const)f
(RFILE*)g(fd\);)50 1424 y Fn(The)g(ar)o(guments)g(for)g(the)g
Fl(r\256o)p 534 1424 V 17 w(fwrite)g Fn(functions)f(are)h(as)h(follo)o
(ws)d(:)50 1549 y Fl(ptr)23 b Fn(A)11 b(pointer)f(to)h(the)g(memory)h
(location)e(in)h(which)f(the)h(information)f(is)h(stored.)50
1629 y Fl(size)22 b Fn(The)11 b(size)g(of)h(each)f(item)g(to)g(be)g
(written,)g(in)g(bytes.)50 1709 y Fl(items)22 b Fn(The)11
b(number)g(of)h(items)e(to)h(be)g(written.)50 1790 y
Fl(fd)23 b Fn(The)11 b(descriptor)n(,)g(generated)g(by)g
Fl(r\256o)p 714 1790 V 16 w(f)o(open)p Fn(,)h(of)g(the)e(\256le)i(to)f
(be)g(written.)50 1914 y(On)k(failure,)i Fl(r\256o)p
339 1914 V 17 w(fwrite)f Fn(returns)f(-1,)j(the)e(error)g(code)g(being)
f(stored)g(in)h Fl(r\256o)p 1339 1914 V 16 w(err)o(no)p
Fn(.)32 b(Otherwise)15 b(it)g(returns)h(the)50 1971 y(number)11
b(of)g(items)g(actually)f(written.)-64 2079 y Fl(r\256o)p
7 2079 V 17 w(write)50 2218 y(#include)h Fk(<)i(shif)5
b(t:h)14 b(>)50 2300 y Fl(int)d(r\256o)p 185 2300 V 17
w(write)g(\(const)h(int)f(s,)g(const)h(char)g(*ptr)l(,)f(const)h(int)f
(size\);)50 2383 y Fn(The)g(ar)o(guments)g(for)g(the)g
Fl(r\256o)p 534 2383 V 17 w(write)g Fn(functions)e(are)j(as)g(follo)o
(ws)d(:)50 2507 y Fl(s)22 b Fn(The)11 b(descriptor)n(,)g(generated)g
(by)g Fl(r\256o)p 691 2507 V 16 w(open)p Fn(,)i(of)e(the)g(\256le)g(to)
g(be)g(written.)50 2587 y Fl(ptr)23 b Fn(A)11 b(pointer)f(to)h(the)g
(memory)h(location)e(in)h(which)f(the)h(information)f(is)h(stored.)50
2668 y Fl(size)22 b Fn(The)11 b(number)h(of)f(bytes)f(to)h(be)g
(written.)50 2792 y(On)k(failure,)i Fl(r\256o)p 339 2792
V 17 w(fwrite)f Fn(returns)f(-1,)j(the)e(error)g(code)g(being)f(stored)
g(in)h Fl(r\256o)p 1339 2792 V 16 w(err)o(no)p Fn(.)32
b(Otherwise)15 b(it)g(returns)h(the)50 2848 y(number)11
b(of)g(items)g(actually)f(written.)p eop
%%Page: 46 50
46 49 bop -64 -125 a Fn(46)985 b Ff(CHAPTER)12 b(5.)28
b(RFIO)12 b(-)f(REMO)n(TE)h(FILE)f(I/O)g(SYSTEM)-64 46
y Fq(5.1.5)51 b(Flushing)12 b(the)f(data)h(str)o(eam)-64
181 y Fl(#include)g Fk(<)h(shif)5 b(t:h)13 b(>)-64 286
y Fl(int)f(r\256o)p 72 286 14 2 v 16 w(f\257ush)g(\(const)g(RFILE)f
(*fd\);)-64 391 y Fn(The)g(ar)o(gument)g(for)h(the)f
Fl(r\256o)p 403 391 V 16 w(f\257ush)h Fn(function)e(is)h(:)-64
537 y Fl(fd)23 b Fn(The)11 b(descriptor)n(,)g(generated)g(by)g
Fl(r\256o)p 600 537 V 16 w(f)o(open)h Fn(of)g(the)e(\256le)i(to)f(be)g
(\257ushed.)-64 682 y Fl(r\256o)p 7 682 V 17 w(f\257ush)h
Fn(causes)f(an)o(y)g(b)o(uf)o(fered)g(data)g(for)h(the)f(named)g
(\256le)h(to)e(be)i(written.)j(The)c(\256le)h(remains)f(open.)-64
787 y(On)g(success,)g Fl(r\256o)p 233 787 V 17 w(f\257ush)h
Fn(returns)e(0.)17 b(On)11 b(failure,)g(it)f(returns)h(-1)g(and)g(the)g
(error)h(code)f(is)g(stored)f(in)h Fl(r\256o)p 1609 787
V 16 w(err)o(no)p Fn(.)-64 959 y Fq(5.1.6)51 b(Obtaining)10
b(File)j(Status)e(Inf)o(ormation)-64 1064 y Fl(r\256o)p
7 1064 V 17 w(stat)50 1194 y(#include)g Fk(<)i(shif)5
b(t:h)14 b(>)50 1268 y Fl(int)d(r\256o)p 185 1268 V 17
w(stat\(const)g(char)h(*\256lepath,)g(struct)g(stat)f(*statb)o(uf\);)50
1342 y Fn(The)g(ar)o(gument)g(for)g(the)g Fl(r\256o)p
516 1342 V 17 w(stat)g Fn(function)f(is)h(:)50 1443 y
Fl(\256lepath)23 b Fn(A)17 b(character)g(string)f(containing)f(the)h
(\256le)h(name)g(speci\256cation.)33 b(See)17 b(Section)f(1.1)h(for)g
(details)f(of)h(the)150 1500 y(format)11 b(of)h(a)f(standard)g
Fj(shift)e Fn(\256lename.)50 1570 y Fl(statb)o(uf)23
b Fn(A)11 b(structure)g(into)f(information)g(concerning)g(the)h(status)
f(of)h(the)g(\256le)g(will)g(be)g(placed.)50 1671 y Fl(r\256o)p
121 1671 V 16 w(stat)g Fn(returns)g(the)g(status)f(of)h(the)g(named)h
(\256le)f(in)g(a)g(structure)g(with)f(the)h(follo)o(wing)e(format.)186
1786 y Fh(struct)29 b(stat)f({)323 1842 y(dev_t)83 b(st_dev;)165
b(/*)28 b(ID)g(of)g(device)h(containing)h(*/)895 1899
y(/*)e(a)g(directory)h(entry)g(for)f(this)g(file)h(*/)323
1955 y(ino_t)83 b(st_ino;)165 b(/*)28 b(Inode)h(number)g(*/)323
2011 y(mode_t)56 b(st_mode;)138 b(/*)28 b(File)g(mode;)h(see)f
(mknod\(2\))i(*/)323 2068 y(short)83 b(st_nlink;)111
b(/*)28 b(Number)h(of)f(links)g(*/)323 2124 y(ushort)56
b(st_uid;)165 b(/*)28 b(User)g(ID)g(of)g(the)g(file's)h(owner)g(*/)323
2181 y(ushort)56 b(st_gid;)165 b(/*)28 b(Group)h(ID)f(of)f(the)h
(file's)h(group)g(*/)323 2237 y(dev_t)83 b(st_rdev;)138
b(/*)28 b(ID)g(of)g(device)h(*/)895 2294 y(/*)f(This)g(entry)h(is)f
(defined)h(only)f(for)h(*/)895 2350 y(/*)f(character)i(special)f(or)f
(block)g(special)i(files)e(*/)323 2407 y(off_t)83 b(st_size;)138
b(/*)28 b(File)g(size)h(in)f(bytes)g(*/)895 2463 y(/*)g(or,)g(for)g
(fstat)h(on)f(block)g(devices,)i(*/)895 2520 y(/*)e(device)h(size)f(in)
g(512-byte)i(blocks)f(*/)323 2576 y(time_t)56 b(st_atime;)111
b(/*)28 b(Time)g(of)g(last)h(access)g(*/)323 2632 y(time_t)56
b(st_mtime;)111 b(/*)28 b(Time)g(of)g(last)h(data)f(modification)j(*/)
323 2689 y(time_t)56 b(st_ctime;)111 b(/*)28 b(Time)g(of)g(last)h(file)
f(status)h(change)g(*/)895 2745 y(/*)f(Times)h(measured)g(in)f(seconds)
h(since)g(*/)895 2802 y(/*)f(00:00:00)i(GMT,)e(Jan.)g(1,)g(1970)g(*/)
186 2858 y(};)p eop
%%Page: 47 51
47 50 bop -64 -125 a Ff(5.1.)28 b(C)12 b(INTERF)m(A)n(CE)1580
b Fn(47)50 46 y(On)11 b(success,)g Fl(r\256o)p 347 46
14 2 v 16 w(stat)g Fn(returns)g(0.)16 b(On)11 b(failure,)g(it)g
(returns)g(-1)g(and)g(the)g(error)g(code)h(is)e(stored)h(in)f
Fl(r\256o)p 1684 46 V 17 w(err)o(no)p Fn(.)-64 138 y
Fl(r\256o)p 7 138 V 17 w(fstat)50 269 y(#include)h Fk(<)i(shif)5
b(t:h)14 b(>)50 343 y Fl(int)d(r\256o)p 185 343 V 17
w(fstat\(const)g(int)h(s,)f(struct)h(stat)f(*statb)o(uf\);)50
418 y Fn(The)g(ar)o(gument)g(for)g(the)g Fl(r\256o)p
516 418 V 17 w(fstat)g Fn(function)f(is)h(:)50 521 y
Fl(s)22 b Fn(The)11 b(descriptor)n(,)g(generated)g(by)g
Fl(r\256o)p 691 521 V 16 w(open)p Fn(,)i(of)e(the)g(\256le)g(to)g(be)g
(written.)50 593 y Fl(statb)o(uf)23 b Fn(A)11 b(structure)g(into)f
(which)g(information)g(concerning)g(the)h(status)f(of)i(the)e(\256le)i
(will)e(be)h(placed.)50 697 y Fl(r\256o)p 121 697 V 16
w(fstat)j Fn(returns)f(the)g(status)g(of)g(the)h(named)f(\256le)h(in)f
(a)h(statb)o(uf)f(structure)g(\(see)h(the)f(description)f(of)h(the)h
Fl(r\256o)p 1845 697 V 16 w(fstat)50 753 y Fn(function)c(abo)o(v)o(e.)
50 828 y(On)h(success,)g Fl(r\256o)p 347 828 V 16 w(fstat)h
Fn(returns)e(0.)17 b(On)11 b(failure,)f(it)h(returns)g(-1)g(and)g(the)g
(error)g(code)h(is)e(stored)h(in)g Fl(r\256o)p 1700 828
V 16 w(err)o(no)p Fn(.)-64 1001 y Fq(5.1.7)51 b(Printing)11
b(err)o(or)i(messages)-64 1137 y Fl(#include)f Fk(<)h(shif)5
b(t:h)13 b(>)-64 1243 y Fl(void)d(sperr)o(or\(const)j(char*)e(msg\);)
-64 1348 y(sperr)o(or)k Fn(produces)e(a)h(short)f(error)h(message)g(on)
f(the)h(standard)f(error)h(\256le)g(that)f(describes)g(the)g(most)h
(recent)g(SHIFT)g(error)-64 1405 y(encountered.)h(sperror)7
b(prints)g(the)g(ar)o(gument)g(string)g(msg)g(\256rst,)f(then)h(a)g
(colon,)h(then)f(the)g(message\(s\))g(and)g(a)g(ne)o(wline.)14
b(rperror)-64 1461 y(retrie)o(v)o(es)d(the)g(error)h(description)d
(from)j(the)f(system)f(\(local)h(or)h(remote\))f(on)g(which)g(the)f
(error)i(was)f(actually)f(encountered.)-64 1634 y Fq(5.1.8)51
b(C)12 b(Bindings)g(f)o(or)g(the)f(F)o(ortran)h(Interface)h(Routines)
-64 1770 y Fn(C)f(language)e(bindings)f(are)i(pro)o(vided)f(for)i(a)f
(number)g(of)g(the)g(F)o(ortran)g(interface)g(routines)e(de\256ned)i
(in)g(Section)f(5.2.)17 b(In)11 b(fact,)-64 1827 y(these)g(routines)f
(are)i(used)e(to)h(implement)g(the)g(F)o(ortran)g(subroutines.)-64
1978 y Fl(r\256o)p 7 1978 V 17 w(xy)o(open)50 2108 y(#include)g
Fk(<)i(shif)5 b(t:h)14 b(>)50 2183 y Fl(int)d(r\256o)p
185 2183 V 17 w(xy)o(open\(char)g(*\256lename,)h(char)g(*host,)f(int)g
(lun,)h(int)g(lr)o(ecl,)f(char)h(*chopt,)g(int)g(*ir)o(c\);)50
2257 y Fn(The)f(ar)o(guments)g(for)g(the)g Fl(r\256o)p
534 2257 V 17 w(xy)o(open)g Fn(function)f(are)h(as)h(follo)o(ws)d(:)50
2361 y Fl(\256lename)23 b Fn(A)10 b(character)i(string)d(containing)g
(the)h(pathname)g(of)h(the)f(\256le)h(to)f(be)h(opened.)16
b(See)11 b(Section)f(1.1)h(for)f(details)150 2417 y(of)i(the)f(format)h
(of)g(a)g(standard)f Fj(shift)f Fn(\256lename.)19 b(If)12
b(null,)f(the)g(\256le)h(to)f(be)h(opened)f(must)g(be)h(speci\256ed)g
(by)f(means)150 2474 y(of)g(the)g Fl(lun)h Fn(ar)o(gument.)50
2545 y Fl(host)22 b Fn(A)14 b(character)h(string)e(containing)f(the)i
(name)h(of)f(the)f(remote)i(host.)24 b(If)14 b(null,)g(the)g(remote)h
(host)e(name)h(will)f(be)150 2602 y(inferred)e(from)h(the)f(pathname.)
50 2674 y Fl(lun)23 b Fn(An)15 b(inte)o(ger)g(specifying)e(the)i(F)o
(ortran)h(logical)e(unit)g(number)h(to)g(be)g(opened.)28
b(If)16 b(the)f Fl(\256lename)h Fn(ar)o(gument)f(is)150
2730 y(null,)e(the)f(\256le)i(to)e(be)h(opened)g(must)f(ha)o(v)o(e)i
(pre)o(viously)d(been)i(assigned)e(to)i(this)f(unit)g(by)g(means)i(of)f
(the)f Fl(assign)150 2787 y Fn(command.)50 2858 y Fl(lr)o(ecl)23
b Fn(The)11 b(record)g(length)f(in)h(bytes.)16 b(It)11
b(must)f(be)i(a)f(multiple)f(of)h(8,)h(and)f(is)g(required)f(only)h
(for)g('DIRECT')h(access.)p eop
%%Page: 48 52
48 51 bop -64 -125 a Fn(48)985 b Ff(CHAPTER)12 b(5.)28
b(RFIO)12 b(-)f(REMO)n(TE)h(FILE)f(I/O)g(SYSTEM)50 46
y Fl(chopt)23 b Fn(Character)12 b(v)o(ariable)f(specifying)f(the)g
(option\(s\).)150 119 y Fl('D':)181 b Fn(Direct)11 b(access)g(\256le)h
(\(the)f(record)g(number)g(must)g(be)g(speci\256ed)g(on)g(read)h(and)f
(write\))150 184 y Fl('S':)189 b Fn(Sequential)10 b(\256le)i
(\(default\).)150 249 y Fl('U':)181 b Fn(Unformatted)10
b(\256le)i(\(default)e(-)i(formatted)f(\256les)g(are)h(not)e
(supported\))50 323 y Fl(ir)o(c)23 b Fn(The)11 b(error)g(status)f(if)i
(an)o(y)m(,)f(0)g(otherwise.)-64 430 y Fl(r\256o)p 7
430 14 2 v 17 w(xyr)o(ead)50 563 y(#include)g Fk(<)i(shif)5
b(t:h)14 b(>)50 638 y Fl(int)d(r\256o)p 185 638 V 17
w(xyr)o(ead\(int)g(lun,)h(char)g(*b)o(uf)o(,)h(int)e(nr)o(ec,)i(int)e
(nwant,)h(int)f(*ngot,)h(char)f(*chopt,)i(int)e(*ir)o(c\);)50
714 y Fn(The)g(ar)o(guments)g(for)g(the)g Fl(r\256o)p
534 714 V 17 w(xyr)o(ead)g Fn(function)f(are)i(as)f(follo)o(ws)f(:)50
821 y Fl(lun:)181 b Fn(The)11 b(F)o(ortran)g(unit)f(number)i
(associated)e(with)g(the)h(\256le)g(by)g(a)h(pre)o(vious)e(open)g
(call.)50 895 y Fl(b)o(uf:)180 b Fn(Buf)o(fer)12 b(to)e(contain)h(the)f
(data)i(read.)50 969 y Fl(nr)o(ec:)160 b Fn(Relati)o(v)o(e)11
b(record)g(position)e(for)j(direct)e(access)i(\256les.)k(Ignored)11
b(otherwise.)50 1042 y Fl(nwant:)123 b Fn(Number)11 b(of)g(bytes)g
(requested.)50 1116 y Fl(ngot:)158 b Fn(On)11 b(e)o(xit,)g(will)f
(contain)g(the)h(number)g(of)h(bytes)e(read.)50 1189
y Fl(chopt:)136 b Fn(options:)309 1263 y Fl('U':)181
b Fn(Use)11 b(a)g(\(system-supplied\))e(READ)j(subroutine)d(instead)h
(of)h(using)f(FOR)m(TRAN)i Fg(I)p Fn(/)p Fg(O)p Fn(.)50
1337 y Fl(ir)o(c:)192 b Fn(On)12 b(e)o(xit)g(will)f(contain)g(0)h(if)g
(successful.)19 b(Otherwise)11 b(it)h(will)f(contain)g(an)i(end)f(of)g
(\256le)g(indication)f(\(to)309 1393 y(be)g(de\256ned\))g(or)h(the)f
(error)g(status.)50 1501 y(If)i(end)f(of)h(\256le)f(is)g(encountered)g
(and)g(multiple)g(\256lenames)g(ha)o(v)o(e)h(been)g Fj(assigned)e
Fn(to)h(the)g(unit)f(number)n(,)j(the)e(ne)o(xt)g(\256le)50
1557 y(in)f(sequence)g(will)g(be)h(opened)f(using)f(the)i(same)g
(options)e(as)h(speci\256ed)h(in)f(the)g(original)g(open)g(request,)g
(and)h(reading)50 1613 y(will)e(continue)g(from)i(the)e(be)o(ginning)g
(of)h(this)f(ne)o(w)h(\256le.)-64 1708 y Fl(r\256o)p
7 1708 V 17 w(xywrite)50 1840 y(#include)g Fk(<)i(shif)5
b(t:h)14 b(>)50 1916 y Fl(int)d(r\256o)p 185 1916 V 17
w(xywrite\(int)g(lun,)h(char)f(*b)o(uf)o(,)i(int)e(nr)o(ec,)i(int)e
(nwrit,)h(char)g(*chopt,)g(int)f(*ir)o(c\);)50 1992 y
Fn(The)g(ar)o(guments)g(for)g(the)g Fl(r\256o)p 534 1992
V 17 w(xywrite)f Fn(function)g(are)i(as)f(follo)o(ws)f(:)50
2099 y Fl(lun)23 b Fn(The)11 b(F)o(ortran)g(unit)f(number)i(associated)
e(with)g(the)h(\256le)g(by)g(a)h(pre)o(vious)d(open)i(call.)50
2173 y Fl(b)o(uf)23 b Fn(Buf)o(fer)12 b(containing)d(the)i(data)g(to)g
(be)g(written.)50 2247 y Fl(nr)o(ec)24 b Fn(Relati)o(v)o(e)11
b(record)g(position)e(for)i(direct)g(access)h(\256les.)k(Ignored)11
b(otherwise.)50 2320 y Fl(nwrit)23 b Fn(Number)11 b(of)g(bytes)f(to)h
(be)g(written.)50 2394 y Fl(chopt)23 b Fn(options:)14
b Fj(T)l(o)d(be)h(de\256ned)50 2467 y Fl(ir)o(c)23 b
Fn(Inte)o(ger)m(.)17 b(On)11 b(e)o(xit)g(will)f(contain)g(0)h(if)g
(successful.)16 b(Otherwise)10 b(it)h(will)f(contain)g(the)h(error)h
(status.)-64 2575 y Fl(r\256o)p 7 2575 V 17 w(xyclose)50
2707 y(#include)f Fk(<)i(shif)5 b(t:h)14 b(>)50 2783
y Fl(int)d(r\256o)p 185 2783 V 17 w(xyclose\(int)f(lun,)i(char)g
(*chopt,)g(int)f(*ir)o(c\);)50 2858 y Fn(The)g(ar)o(guments)g(for)g
(the)g Fl(r\256o)p 534 2858 V 17 w(xyclose)f Fn(function)g(are)i(as)f
(follo)o(ws)e(:)p eop
%%Page: 49 53
49 52 bop -64 -125 a Ff(5.2.)28 b(FOR)m(TRAN)12 b(INTERF)m(A)n(CE)1401
b Fn(49)50 46 y Fl(lun)23 b Fn(The)11 b(F)o(ortran)g(unit)f(number)i
(associated)e(with)g(the)h(\256le)g(by)g(a)h(pre)o(vious)d(open)i
(call.)50 117 y Fl(chopt)23 b Fn(options:)150 189 y Fl('S')g
Fn(Write)11 b(usage)g(statistics)e(to)i(stdout.)50 261
y Fl(ir)o(c)23 b Fn(Inte)o(ger)m(.)17 b(On)11 b(e)o(xit)g(will)f
(contain)g(0)h(if)g(successful.)16 b(Otherwise)10 b(it)h(will)f
(contain)g(the)h(error)h(status.)-64 454 y Fi(5.2)60
b(F)o(ortran)13 b(Interface)-64 607 y Fn(The)e(F)o(ortran)h(interface)e
(does)h(not)f(use)h(the)g(C)h(routines,)e(b)o(ut)g(rather)h(interfaces)
g(to)g(the)f(local)h(F)o(ortran)g(on)g(the)g(disk)f(serv)o(er)i(in)-64
663 y(order)f(to)g(preserv)o(e)h(F)o(ortran)f(semantics.)-64
836 y Fq(5.2.1)51 b(Assign)-64 972 y Fl(assign)10 b(\256lename)i(unit)f
([-c])-64 1078 y Fn(The)f Fl(assign)f Fn(command)i(\(issued)e(at)h
Fj(shell)f Fn(le)o(v)o(el\))i(assigns)d(an)i Fj(nfs)p
978 1078 14 2 v 16 w(pathname)e Fn(to)i(a)h(F)o(ortran)f(unit)f(number)
i(\(see)f(Section)g(1.1\).)-64 1134 y(It)h(is)f(compatible)g(with)g
(the)h(locally)f(pro)o(vided)g(facilities)f(to)h(do)h(this)f(\(i.e.)17
b(when)10 b Fl(assign)g Fn(is)g(called,)h(it)g(in)f(turn)g(calls)h(its)
f(local)-64 1191 y(equi)o(v)o(alent\).)22 b(The)14 b(assign)e(command)i
(stores)f(the)g(appropriate)g(information)f(in)i(a)g(\256le)f(which)g
(is)g(normally)g(initialised)e(at)-64 1247 y(login,)f(and)g(so)g(the)g
(v)o(alidity)e(of)i(the)g(command)h(does)f(not)f(survi)o(v)o(e)h
(multiple)f(sessions.)14 b(The)c(name)h(of)g(the)f(\256le)g(is)g(held)g
(in)g(the)-64 1304 y(RF)m(ASSIGN)i(en)n(vironment)e(v)o(ariable,)h
(which)g(is)f(normally)h(initialised)e(to)h Fj(.rfassign)g
Fn(in)g(the)h(user')m(s)h(home)f(directory)m(.)-64 1409
y(If)f(the)f Fl(-c)g Fn(option)f(is)g(speci\256ed)h(the)g(\256lename)h
(is)f(concatenated)f(to)h(an)o(y)g(\256lenames)h(pre)o(viously)d
(assigned)h(to)g(the)h(unit)f(number)m(.)-64 1466 y(Note)j(that)g(this)
f(facility)g(may)h(not)g(be)g(supported)f(by)h(the)g(local)f(F)o
(ortran)i(en)n(vironment,)f(in)g(which)f(case)i(it)f(will)f(be)h(ef)o
(fecti)o(v)o(e)-64 1522 y(only)f(when)h(using)f(the)h(routines)f
(speci\256ed)h(in)f(the)h(present)g(section.)-64 1695
y Fq(5.2.2)51 b(Opening)11 b(a)h(\256le)-64 1832 y Fn(T)l(wo)e(OPEN)g
(subroutines)f(are)i(pro)o(vided)e(:)16 b Fl(XY)n(OPEN)11
b Fn(and)f Fl(XY)n(OPN)p Fn(.)h Fl(XY)n(OPEN)g Fn(is)f(pro)o(vided)g
(to)g(support)f(nati)o(v)o(e)h(access)-64 1888 y(to)h(a)g(\256le,)h
(while)f Fl(XY)n(OPN)g Fn(is)g(intended)f(to)g(gi)o(v)o(e)h(better)g
(support)f(for)h(ZEBRA,)h(F)m(A)-5 b(TMEN)11 b(and)g(other)f(library)h
(routines.)-64 2060 y Fl(XY)n(OPEN)-64 2196 y(CALL)h(XY)n(OPEN\(LUN,)g
(LRECL,)g(CHOPT)m(,)g(IRC\))-64 2302 y Fn(The)f(ar)o(guments)g(for)h
(the)e Fl(XY)n(OPEN)i Fn(subroutine)d(are)j(as)f(follo)o(ws)f(:)-64
2452 y Fl(LUN)23 b Fn(Inte)o(ger)m(.)17 b(A)11 b(F)o(ortran)h(unit)e
(number)h(pre)o(viously)e(assigned)h(to)h(a)h(remote)f(\256le)h(by)e
(the)h Fl(assign)f Fn(command.)-64 2545 y Fl(LRECL)24
b Fn(Inte)o(ger)m(.)h(The)14 b(record)g(length,)g(speci\256ed)g(in)f
(bytes.)24 b(It)14 b(must)g(be)g(a)g(multiple)f(of)h(8.)25
b(Required)14 b(for)g('DIRECT')50 2601 y(access,)e(ignored)e
(otherwise.)-64 2694 y Fl(CHOPT)24 b Fn(Character)12
b(v)o(ariable)e(specifying)g(the)h(option\(s\).)50 2787
y Fl('D')23 b Fn(Direct)11 b(access)g(\256le)h(\(the)f(record)g(number)
g(must)g(be)g(speci\256ed)g(on)g(read)h(and)f(write\))50
2858 y Fl('S')23 b Fn(Sequential)10 b(\256le)i(\(default\).)p
eop
%%Page: 50 54
50 53 bop -64 -125 a Fn(50)985 b Ff(CHAPTER)12 b(5.)28
b(RFIO)12 b(-)f(REMO)n(TE)h(FILE)f(I/O)g(SYSTEM)50 46
y Fl('U')23 b Fn(Unformatted)10 b(\256le)i(\(default)e(-)i(formatted)f
(\256les)g(are)h(not)e(supported\))-64 139 y Fl(IRC)22
b Fn(Inte)o(ger)m(.)c(The)11 b(error)g(status)f(if)h(an)o(y)m(,)h(0)f
(otherwise.)-64 294 y(The)17 b(XY)o(OPEN)e(subroutine)g(opens)h(a)h
(\256le)g(pre)o(viously)d(assigned)i(with)f Fl(assign)h
Fn(for)h(subsequent)e(Remote)i(File)f(Access)-64 351
y(operations.)-64 523 y Fl(XY)n(OPN)-64 660 y(CALL)c(XY)n(OPN\(FN)o
(AME,)f(NODE,)h(LUN,)g(LRECL,)g(CHOPT)m(,)g(IRC\))-64
766 y Fn(The)f(ar)o(guments)g(for)h(the)e Fl(XY)n(OPN)i
Fn(subroutine)d(are)j(as)f(follo)o(ws)f(:)-64 921 y Fl(FN)o(AME)23
b Fn(Character)12 b(v)o(ariable)e(specifying)g(the)h(full)f(pathname)i
(of)f(the)g(\256le)g(to)g(be)g(opened.)-64 1015 y Fl(NODE)23
b Fn(Character)15 b(v)o(ariable)f(specifying)f(the)g(remote)i(node.)25
b(If)15 b(null,)f(the)g(node)f(will)g(be)i(inferred)f(from)g(the)g
(pathname)50 1072 y(supplied)9 b(in)i(FN)n(AME.)-64 1165
y Fl(LUN)23 b Fn(Inte)o(ger)m(.)17 b(A)11 b(F)o(ortran)h(logical)e
(unit)g(number)m(.)-64 1259 y Fl(LRECL)24 b Fn(Inte)o(ger)m(.)h(The)14
b(record)g(length,)g(speci\256ed)g(in)f(bytes.)24 b(It)14
b(must)g(be)g(a)g(multiple)f(of)h(8.)25 b(Required)14
b(for)g('DIRECT')50 1315 y(access,)f(ignored)f(otherwise.)20
b(W)l(arning:)e(Ev)o(en)13 b(for)g(a)g(SEQUENTIAL)e(\256le,)i(the)g
(LRECL)f(ar)o(gument)h(must)f(not)g(be)50 1372 y(left)f(blank)f(-)i(it)
e(should)g(be)h(set)g(to)g(a)g(v)o(alue)g(like)f(zero.)-64
1465 y Fl(CHOPT)24 b Fn(Character)12 b(v)o(ariable)e(specifying)g(the)h
(option\(s\).)50 1559 y Fl('A)m(':)184 b Fn(Append)10
b(data)h(to)g(the)g(end)g(of)g(an)g(e)o(xisting)f(\256le.)50
1632 y Fl('D':)181 b Fn(Direct)11 b(access)g(\256le)h(\(the)f(record)g
(number)g(must)g(be)g(speci\256ed)g(on)g(read)h(and)f(write\))50
1704 y Fl('E':)184 b Fn(Erase)11 b(the)g(\256le)g(if)h(there)f(is)g(a)g
(network)f(error)m(.)50 1777 y Fl('S':)189 b Fn(Sequential)10
b(\256le)i(\(default\).)50 1850 y Fl('U':)181 b Fn(Unformatted)10
b(\256le)i(\(default)e(-)i(formatted)f(\256les)g(are)h(not)e
(supported\))-64 1944 y Fl(IRC)22 b Fn(Inte)o(ger)m(.)c(The)11
b(error)g(status)f(if)h(an)o(y)m(,)h(0)f(otherwise.)-64
2099 y(The)g(XY)o(OPN)g(subroutine)e(opens)h(a)i(\256le)f(for)h
(subsequent)d(Remote)j(File)f(Access)g(operations.)-64
2273 y Fq(5.2.3)51 b(Reading)11 b(a)i(\256le)-64 2410
y Fl(CALL)f(XYREAD\(LUN,)f(BUF)l(,)g(NREC,)h(NW)-5 b(ANT)m(,)11
b(NGO)n(T)m(,)h(CHOPT)m(,)g(IRC\))-64 2516 y Fn(The)f(ar)o(guments)g
(for)h(the)e Fl(XYREAD)h Fn(subroutine)e(are)j(as)g(follo)o(ws)d(:)-64
2671 y Fl(LUN)23 b Fn(Inte)o(ger)m(.)17 b(The)11 b(F)o(ortran)h(unit)e
(number)h(associated)f(with)g(the)h(\256le)h(by)f(a)g(pre)o(vious)f
(open)h(call.)-64 2765 y Fl(BUF)22 b Fn(F)o(ortran)12
b(array)g(to)e(contain)h(the)f(data)i(read.)-64 2858
y Fl(NREC)23 b Fn(Inte)o(ger)m(.)17 b(Record)12 b(position)d(for)i
(direct)g(access)g(relati)o(v)o(e)g(to)g(be)o(ginning)e(of)j(the)e
(\256le.)17 b(Ignored)11 b(otherwise.)p eop
%%Page: 51 55
51 54 bop -64 -125 a Ff(5.2.)28 b(FOR)m(TRAN)12 b(INTERF)m(A)n(CE)1401
b Fn(51)-64 46 y Fl(NW)-5 b(ANT)23 b Fn(Inte)o(ger)m(.)17
b(Number)11 b(of)h(bytes)e(requested.)16 b(F)o(or)c(a)f(DIRECT)h
(\256le,)g(NW)-5 b(ANT)10 b(is)g(bound)g(by)h(LRECL.)-64
138 y Fl(NGO)n(T)24 b Fn(Inte)o(ger)11 b(v)o(ariable.)16
b(On)11 b(e)o(xit,)h(will)e(contain)g(the)h(number)g(of)g(bytes)g
(read.)-64 231 y Fl(CHOPT)24 b Fn(Character)12 b(v)o(ariable)e
(containing)g(an)o(y)h(options.)50 323 y Fl('U')23 b
Fn(Use)13 b(a)g(\(system-supplied\))e(READ)j(subroutine)d(instead)h(of)
h(using)f(FOR)m(TRAN)i Fg(I)p Fn(/)p Fg(O)p Fn(.)23 b(It)13
b(permits)g(the)g(reading)150 380 y(of)e(partially)f(written)g(records)
h(for)h(SEQUENTIAL)d(or)i(DIRECT)h(\256les.)-64 472 y
Fl(IRC)22 b Fn(Inte)o(ger)m(.)50 565 y Fl(Non)11 b(U)g(Option)23
b Fn(IRC)13 b(contains)d(0)h(if)g(sucessfull,)g(Otherwise)f(it)h
(contains)f(the)h(error)h(code)f(equal)g(to)g Fh(errno)i
Fn(of)f(the)150 621 y(C)g(routine.)50 693 y Fl(U)f(Option)23
b Fn(The)11 b(return)g(is)g(the)g(follo)o(wing:)150 775
y Fh(-1:)28 b(There)h(are)f(still)g(bytes)h(to)f(be)g(read.)177
831 y(0:)g(End)g(of)g(record)177 888 y(2:)g(End)g(of)g(file)177
944 y(5:)g(Error)h(occurred.)-64 1095 y Fn(If)17 b(end)e(of)h(\256le)g
(is)g(encountered)f(and)h(multiple)e(\256lenames)j(ha)o(v)o(e)f(been)g
Fj(assigned)e Fn(to)h(the)h(unit)f(number)n(,)i(the)f(ne)o(xt)g(\256le)
g(in)-64 1151 y(sequence)g(will)f(be)i(opened)e(using)g(the)h(same)h
(options)d(as)i(speci\256ed)g(in)g(the)g(original)f(open)g(request,)j
(and)e(reading)f(will)-64 1208 y(continue)10 b(from)i(the)f(be)o
(ginning)e(of)i(this)g(ne)o(w)f(\256le.)-64 1381 y Fq(5.2.4)51
b(Writing)11 b(a)h(\256le)-64 1517 y Fl(CALL)g(XYWRIT\(LUN,)g(BUF)l(,)f
(NREC,)g(NWRITE,)h(CHOPT)m(,)g(IRC\))-64 1623 y Fn(The)f(ar)o(guments)g
(for)h(the)e Fl(XYWRIT)i Fn(subroutine)d(are)j(as)f(follo)o(ws)f(:)-64
1774 y Fl(LUN)23 b Fn(Inte)o(ger)m(.)17 b(The)11 b(F)o(ortran)h(unit)e
(number)h(associated)f(with)g(the)h(\256le)h(by)f(a)g(pre)o(vious)f
(open)h(call.)-64 1866 y Fl(BUF)22 b Fn(F)o(ortran)12
b(array)g(containing)d(the)i(data)g(to)g(be)g(written.)-64
1959 y Fl(NREC)23 b Fn(Inte)o(ger)m(.)17 b(Relati)o(v)o(e)11
b(record)h(position)c(for)k(direct)f(access)g(\256les.)17
b(Ignored)10 b(otherwise.)-64 2051 y Fl(NWRITE)23 b Fn(Inte)o(ger)m(.)
18 b(Number)11 b(of)g(bytes)g(to)f(be)i(written:)i(if)d(the)g(\256le)h
(is)f(DIRECT)m(,)g(NWRITE)g(is)g(bound)f(by)h(LRECL.)-64
2144 y Fl(CHOPT)24 b Fn(Character)17 b(v)o(ariable)g(containing)d(an)o
(y)j(options.)32 b(Only)16 b(a)h(blank)f(is)g(accepted)h(at)g(present)f
(and)h(this)f(must)g(be)50 2200 y(speci\256ed.)-64 2293
y Fl(IRC)22 b Fn(Inte)o(ger)m(.)c(On)10 b(e)o(xit)h(will)f(contain)h(0)
g(if)g(successful.)k(Otherwise)c(it)f(will)g(contain)h(the)f(error)i
(status.)-64 2466 y Fq(5.2.5)51 b(Closing)12 b(a)g(\256le)-64
2602 y Fl(CALL)g(XYCLOS\(LUN,)g(CHOPT)m(,)g(IRC\))-64
2707 y Fn(The)f(ar)o(guments)g(for)h(the)e Fl(XYCLOS)i
Fn(subroutine)d(are)j(as)g(follo)o(ws)d(:)-64 2858 y
Fl(LUN)23 b Fn(Inte)o(ger)m(.)17 b(The)11 b(F)o(ortran)h(unit)e(number)
h(associated)f(with)g(the)h(\256le)h(by)f(a)g(pre)o(vious)f(open)h
(call.)p eop
%%Page: 52 56
52 55 bop -64 -125 a Fn(52)985 b Ff(CHAPTER)12 b(5.)28
b(RFIO)12 b(-)f(REMO)n(TE)h(FILE)f(I/O)g(SYSTEM)-64 46
y Fl(CHOPT)24 b Fn(Character)17 b(v)o(ariable)g(containing)d(an)o(y)j
(options.)32 b(Only)16 b(a)h(blank)f(is)g(accepted)h(at)g(present)f
(and)h(this)f(must)g(be)50 102 y(speci\256ed.)-64 196
y Fl(IRC)22 b Fn(Inte)o(ger)m(.)c(On)10 b(e)o(xit)h(will)f(contain)h(0)
g(if)g(successful.)k(Otherwise)c(it)f(will)g(contain)h(the)f(error)i
(status.)-64 352 y(The)f Fl(XYCLOS)h Fn(subroutine)d(closes)i(a)g
(\256le)h(pre)o(viously)d(opened)i(with)f Fl(XY)n(OPEN)h
Fn(or)h Fl(XY)n(OPN)p Fn(.)-64 526 y Fq(5.2.6)51 b(Rewinding)11
b(a)h(\256le)-64 663 y Fl(CALL)g(XYR)n(WND\(LUN,)g(IRC\))e
Fj(Not)h(yet)h(implemented.)-64 770 y Fn(The)f(ar)o(guments)g(for)h
(the)e Fl(XYR)n(WND)i Fn(subroutine)d(are)j(as)f(follo)o(ws)f(:)-64
926 y Fl(LUN)23 b Fn(Inte)o(ger)m(.)17 b(The)11 b(F)o(ortran)h(unit)e
(number)h(associated)f(with)g(the)h(\256le)h(by)f(a)g(pre)o(vious)f
(open)h(call.)-64 1020 y Fl(IRC)22 b Fn(Inte)o(ger)m(.)c(On)10
b(e)o(xit)h(will)f(contain)h(0)g(if)g(successful.)k(Otherwise)c(it)f
(will)g(contain)h(the)f(error)i(status.)-64 1176 y(The)f
Fl(XYR)n(WND)h Fn(subroutine)d(re)o(winds)h(a)i(\256le)f(opened)g(by)f
Fl(XY)n(OPEN)i Fn(or)f Fl(XY)n(OPN)p Fn(.)p eop
%%Page: 53 57
53 56 bop -64 408 a Fp(Chapter)22 b(6)-64 645 y(Operator)g(Interface)
-64 918 y Fn(A)c(single)e(operator)i(interface)f(is)g(supplied)f(for)i
(the)f Fj(shift)f Fn(con\256guration.)35 b(A)17 b(message)h
(coordination)e(daemon)i Fl(msgd)-64 975 y Fn(e)o(x)o(ecutes)c(on)e
(one)h(of)h(the)e Fj(shift)g Fn(nodes,)h(recei)o(ving)g(messages)g
(from)g(clients)f(throughout)f(the)i(con\256guration,)g(pro)o(viding)e
(a)-64 1031 y(series)g(of)g(displays)f(for)h(the)g(operator)n(,)g(and)g
(routing)f(replies)h(from)g(the)g(operator)g(to)g(the)g(client.)-64
1233 y Fi(6.1)60 b(Operator)13 b(Display)h(Manager)h(-)g(oper)4
1357 y Fe(\017)23 b Fj(N)o(AME)50 1434 y Fn(oper)11 b(-)g(In)n(v)o
(okes)g(the)f(operator)h(display)f(manager)4 1532 y Fe(\017)23
b Fj(SYNOPSIS)50 1608 y Fl(oper)4 1706 y Fe(\017)g Fj(DESCRIPTION)50
1783 y Fn(The)15 b Fl(oper)h Fn(command)g(e)o(x)o(ecutes)f
(periodically)f(and)h(displays)f(the)h(output)e(of)j(a)f(shell)g
(command.)29 b(The)15 b(screen)h(is)50 1839 y(di)o(vided)8
b(in)i(two)e(parts;)i(the)f(bottom)g(part)h(is)f(used)h(to)f(enter)h
(commands)g(in)f(scroll)h(mode)g(while)f(the)g(top)g(part)h(displays)50
1896 y(output.)50 1972 y(By)h(default,)g Fl(msgd)g Fn(is)f(e)o(x)o
(ecuted)i(e)o(v)o(ery)f(ten)g(seconds.)4 2070 y Fe(\017)23
b Fj(COMMANDS)50 2180 y Fl(r)o(ef)12 b(delay:)74 b Fn(Changes)11
b(the)g(delay)f(between)h(two)f(calls)h(to)g(the)g(command.)50
2255 y Fl(ex)g(,)h(exit:)96 b Fn(Exits)10 b(from)h(the)g
Fj(oper)g Fn(command.)50 2318 y Fl(+)g(or)g(space)h(bar:)309
2374 y Fn(Displays)d(the)i(ne)o(xt)g(screen.)50 2449
y Fl(-:)229 b Fn(Displays)9 b(the)i(pre)o(vious)f(screen.)50
2560 y(Other)h(commands)g(are)h(di)o(vided)d(into)i(three)g(cate)o
(gories)g(de\256ned)g(by)g(the)g(\256le)g Fh(/etc/OPERCONF)q(IG)p
Fn(:)93 2671 y(1.)23 b(Commands)11 b(to)g(be)g(e)o(x)o(ecuted)h(at)f
(re)o(gular)g(interv)o(als)f(\(refresh)i(mode\))f(like)f(msgd.)93
2745 y(2.)23 b(Commands)10 b(to)f(be)h(e)o(x)o(ecuted)h(once,)f
(without)e(changing)h(the)g(periodically)f(refreshed)j(command.)16
b(The)10 b(output)150 2802 y(is)15 b(placed)g(on)h(the)f(last)g(line)g
(of)h(the)f(screen.)30 b(The)16 b Fl(r)o(ep)g Fn(command)g(which)f(is)g
(used)h(to)f(reply)g(to)g(a)h(message)150 2858 y(belongs)10
b(to)g(this)g(cate)o(gory)i(of)f(command.)917 2958 y(53)p
eop
%%Page: 54 58
54 57 bop -64 -125 a Fn(54)1192 b Ff(CHAPTER)11 b(6.)28
b(OPERA)-5 b(T)o(OR)11 b(INTERF)m(A)n(CE)93 46 y Fn(3.)23
b(T)l(o)13 b(e)o(x)o(ecute)i(a)f(command)g(not)f(de\256ned)g(in)g(the)h
(con\256guration)e(\256le.)24 b(the)13 b(oper)h(windo)o(ws)d(are)k
(supressed.)22 b(T)l(o)150 102 y(resume)16 b(normal)h(operation,)f
(press)g(carriage)h(return.)31 b(Note)16 b(that)f(an)o(y)i(commands)f
(that)f(make)i(full)e(use)h(of)150 159 y(screen)11 b(control)f(such)h
(as)g Fl(vi)g Fn(should)f(be)h(a)o(v)o(oided.)4 258 y
Fe(\017)23 b Fh(Example)29 b(Configuration)i(File)50
369 y(#)50 425 y(#)c(configuratio)q(n)j(file)f(for)f(oper)g(display)50
482 y(#)50 538 y(#)f(commands)j(to)e(be)f(executed)j(in)e(refresh)h
(mode)50 595 y(infd)219 b(r)50 651 y(msgd)g(r)50 708
y(ps)273 b(r)50 764 y(qstat)192 b(r)50 821 y(tmstat)165
b(r)50 877 y(tpstat)g(r)50 934 y(#)27 b(commands)j(to)e(be)f(executed)j
(once)50 990 y(rep)246 b(1)50 1046 y(tpconfig)111 b(1)50
1103 y(notms)192 b(1)50 1159 y(tmsactive)84 b(1)4 1270
y Fe(\017)23 b Fj(Note:)16 b Fn(This)10 b(command)i(requires)f
(operator)g(pri)o(vile)o(ge.)-64 1463 y Fi(6.2)60 b(Reply)14
b(to)h(a)g(message)f(-)h(r)o(ep)4 1583 y Fe(\017)23 b
Fj(N)o(AME)50 1657 y Fl(r)o(ep)12 b Fn(-)g(Sends)e(a)i(reply)f(to)g
(the)f(sender)h(of)h(a)f(message)4 1747 y Fe(\017)23
b Fj(SYNOPSIS)50 1821 y Fl(r)o(ep)12 b Fn(msg)p 205 1821
14 2 v 16 w(number)f([reply)p 480 1821 V 16 w(te)o(xt])4
1911 y Fe(\017)23 b Fj(DESCRIPTION)50 1984 y Fn(The)7
b Fl(r)o(ep)i Fn(command)f(sends)f(an)h(optionnal)d(reply)j(to)f(the)g
(sender)h(of)f(a)h(message.)16 b(The)7 b(msg)p 1473 1984
V 17 w(number)g(operand)h(speci\256es)50 2041 y(the)g(message)h(to)f
(be)g(replied)g(to.)16 b Fl(r)o(ep)9 b Fn(remo)o(v)o(es)g(the)g
(message)f(inde)o(x)o(ed)g(by)h(msg)p 1316 2041 V 16
w(number)f(from)h(the)g(message)f(daemon)50 2097 y(database.)4
2188 y Fe(\017)23 b Fj(NO)n(TES)50 2261 y Fn(Shell)10
b(special)g(characters)g(must)g(be)h(preceded)f(by)g(a)h(backslash)e
(to)h(protect)g(them)g(from)h(interpretation)e(by)h(the)g(shell.)50
2334 y(This)g(command)i(requires)e(operator)h(pri)o(vile)o(ge.)-64
2527 y Fi(6.3)60 b(Send)15 b(an)g(inf)o(ormati)o(v)o(e)e(message)h(to)h
(the)g(operator)-64 2680 y Fq(6.3.1)51 b(msgi)13 b(command)4
2785 y Fe(\017)23 b Fj(N)o(AME)50 2858 y Fl(msgi)10 b
Fn(-)i(Sends)f(a)g(message)g(to)g(the)g(operator)p eop
%%Page: 55 59
55 58 bop -64 -125 a Ff(6.4.)28 b(SEND)11 b(MESSA)n(GE)h(T)o(O)f(OPERA)
-5 b(T)o(OR)11 b(AND)g(W)-5 b(AIT)11 b(FOR)h(REPL)-5
b(Y)725 b Fn(55)4 46 y Fe(\017)23 b Fj(SYNOPSIS)50 120
y Fl(msgi)10 b Fn(message)p 309 120 14 2 v 16 w(te)o(xt)50
194 y(The)16 b Fl(msgi)g Fn(command)h(sends)e(a)i(message)f(to)g(the)h
(message)f(daemon.)33 b(The)16 b(message)g(is)g(the)h(concatenation)e
(of:)50 251 y Fj(sendername@senderhost)o(:)f(message)p
698 251 V 14 w(te)o(xt)p Fn(.)4 343 y Fe(\017)23 b Fj(NO)n(TES)50
417 y Fn(Shell)10 b(special)g(characters)g(must)g(be)h(preceded)f(by)g
(a)h(backslash)e(to)h(protect)g(them)g(from)h(interpretation)e(by)h
(the)g(shell.)-64 590 y Fq(6.3.2)51 b(msgi)13 b(function)-64
726 y Fl(#include)f Fk(<)h(shif)5 b(t:h)13 b(>)-64 831
y Fl(int)f(msgi\(const)e(char)i(*message\);)-64 936 y
Fn(The)f(ar)o(gument)g(for)h(the)f Fl(msgi)f Fn(function)g(is)h(as)g
(follo)o(ws)e(:)-64 1085 y Fl(message)22 b Fn(A)11 b(character)h
(string)e(containing)f(the)i(message)h(to)e(be)i(sent)e(to)h(the)g
(operator)m(.)-64 1234 y(On)e(failure,)g Fl(msgr)g Fn(returns)f(-1.)16
b(The)9 b(error)g(code)g(is)g(set)g(in)f(either)h Fl(err)o(no)h
Fn(or)f Fl(serr)o(no)h Fn(and)e(the)h(error)h(message)f(may)g(be)g
(printed)-64 1291 y(by)i Fl(sperr)o(or)p Fn(.)-64 1485
y Fi(6.4)60 b(Send)15 b(message)f(to)h(operator)e(and)i(wait)g(f)o(or)f
(r)o(eply)-64 1639 y Fq(6.4.1)51 b(msgr)13 b(command)4
1745 y Fe(\017)23 b Fj(N)o(AME)50 1819 y Fl(msgr)11 b
Fn(-)g(Sends)g(a)h(message)f(and)g(waits)f(for)h(an)h(operator)e(reply)
4 1911 y Fe(\017)23 b Fj(SYNOPSIS)50 1985 y Fl(msgr)11
b Fn(message)p 317 1985 V 16 w(te)o(xt)50 2060 y(The)f
Fl(msgr)g Fn(command)g(sends)g(a)g(message)g(to)g(the)g(message)g
(daemon)h(and)f(waits)e(for)j(a)f(reply)g(from)h(an)f(operator)m(.)16
b(The)50 2116 y(message)f(is)f(the)h(concatenation)e(of:)23
b Fj(sendername@senderhost)o(:)e(message)p 1331 2116
V 14 w(te)o(xt)p Fn(.)28 b(The)14 b(message)h(is)g(kept)e(in)i(the)50
2172 y(daemon)c(database)g(until)f(an)h(operator)g(replies)f(to)h(it)g
(or)g(the)g Fl(msgr)g Fn(command)g(is)g(interrupted)f(\()p
Fk(<)j(ctr)q(l)g(>)p Fn(C)f(\).)4 2265 y Fe(\017)23 b
Fj(NO)n(TES)50 2339 y Fn(Shell)10 b(special)g(characters)g(must)g(be)h
(preceded)f(by)g(a)h(backslash)e(to)h(protect)g(them)g(from)h
(interpretation)e(by)h(the)g(shell.)-64 2511 y Fq(6.4.2)51
b(msgr)13 b(function)-64 2647 y Fl(#include)f Fk(<)h(shif)5
b(t:h)13 b(>)-64 2753 y Fl(int)f(msgr\(const)f(char)g(*message,)g(char)
h(*r)o(eply)m(,)g(const)f(int)g(r)o(epsize\);)-64 2858
y Fn(The)g(ar)o(guments)g(for)h(the)e Fl(msgr)h Fn(function)f(are)i(as)
f(follo)o(ws)f(:)p eop
%%Page: 56 60
56 59 bop -64 -125 a Fn(56)1192 b Ff(CHAPTER)11 b(6.)28
b(OPERA)-5 b(T)o(OR)11 b(INTERF)m(A)n(CE)-64 46 y Fl(message)22
b Fn(A)11 b(character)h(string)e(containing)f(the)i(message)h(to)e(be)i
(sent)e(to)h(the)g(operator)m(.)-64 139 y Fl(r)o(eply)23
b Fn(A)11 b(pointer)f(to)h(a)h(b)o(uf)o(fer)f(in)g(which)f(the)h(reply)
g(will)f(be)h(stored.)-64 233 y Fl(r)o(epsize)23 b Fn(Size)12
b(in)f(bytes)f(of)h(the)g(reply)g(b)o(uf)o(fer)m(.)-64
389 y(On)e(failure,)g Fl(msgr)g Fn(returns)f(-1.)16 b(The)9
b(error)g(code)g(is)g(set)g(in)f(either)h Fl(err)o(no)h
Fn(or)f Fl(serr)o(no)h Fn(and)e(the)h(error)h(message)f(may)g(be)g
(printed)-64 446 y(by)i Fl(sperr)o(or)p Fn(.)-64 642
y Fi(6.5)60 b(Display)14 b(operator)g(messages)g(-)h(msgd)4
764 y Fe(\017)23 b Fj(N)o(AME)50 839 y Fl(msgd)11 b Fn(-)g(Displays)f
(messages)h(requiring)f(a)h(reply)g(from)h(operators)4
933 y Fe(\017)23 b Fj(SYNOPSIS)50 1008 y Fl(msgd)4 1102
y Fe(\017)g Fj(DESCRIPTION)50 1177 y Fn(The)12 b Fl(msgd)h
Fn(command)g(displays)e(messages)h(requiring)g(a)h(reply)f(from)i(an)e
(operator)m(.)22 b(Each)12 b(entry)h(has)f(three)h(\256elds:)50
1234 y(the)f(message)h(number)n(,)h(the)f(time)g(at)f(which)g(the)h
(message)g(was)f(issued,)h(and)f(the)h(message)g(te)o(xt.)21
b(These)12 b(messages)50 1290 y(were)j(issued)e(with)h(the)g
Fl(msgr)g Fn(command)h(from)g(an)o(y)f(machine)h(of)f(the)h
Fj(shift)e Fn(comple)o(x.)26 b(Operators)14 b(may)h(reply)f(to)50
1347 y(them)d(using)f(the)h Fl(r)o(ep)h Fn(command.)-64
1543 y Fi(6.6)60 b(The)14 b(operator)g(message)g(daemon)g(-)h
(msgdaemon)4 1665 y Fe(\017)23 b Fj(N)o(AME)50 1740 y
Fl(msgdaemon)11 b Fn(-)g(Start)g(the)g(operator)g(message)g(daemon)4
1834 y Fe(\017)23 b Fj(SYNOPSIS)50 1909 y Fl(msgdaemon)11
b Fn([-d])g([-p)g(port])4 2003 y Fe(\017)23 b Fj(DESCRIPTION)50
2078 y Fn(The)14 b Fl(msgdaemon)g Fn(is)g(a)h(serv)o(er)g(which)e
(handles)h(message)g(e)o(xchange)h(between)f(users)g(and)g(operators)g
(within)f(the)50 2134 y Fj(shift)8 b Fn(comple)o(x.)16
b(Through)9 b(the)g Fl(msgr)h Fn(command,)h(users)e(send)h(messages)f
(to)h(the)f(operators)g(who)h(reply)f(with)g(the)g Fl(r)o(ep)50
2191 y Fn(command.)24 b(Each)13 b(message)h(is)f(kept)f(in)h(the)g
(message)h(daemon)g(until)e(an)h(operator)g(has)h(replied,)f(or)n(,)i
(the)e(message)50 2247 y(has)e(been)g(cancelled)g(by)g(the)g(sender)m
(.)50 2322 y(The)j(message)g(daemon)g(is)f(reached)i(through)e
Fh(TCP/IP)i Fn(at)f(the)g Fh(MSG)h Fn(port)f(speci\256ed)f(in)h(the)g
Fh(/etc/services)50 2379 y Fn(\256le.)4 2473 y Fe(\017)23
b Fj(OPTIONS)50 2579 y Fl(-d)g Fn(Used)11 b(for)g(deb)o(ugging)e(the)i
(daemon)h(itself.)50 2652 y Fl(-p)g(port)23 b Fn(Speci\256es)11
b(a)h(speci\256c)f(port)g(number)g(to)f(be)i(used.)p
eop
%%Page: 57 61
57 60 bop -64 405 a Fp(Chapter)22 b(7)-64 641 y(Account)g(F)n
(acilities)-64 911 y Fn(At)15 b(certain)g(installations)d(a)k(user)f
(may)h(ha)o(v)o(e)f(more)h(than)f(one)g(account)g(for)g(char)o(ging)g
(or)g(other)g(control)f(purposes.)28 b(F)o(or)-64 968
y(e)o(xample,)12 b(at)f Fg(CERN)20 b Fn(the)11 b(account)g(is)f(used)h
(to)g(v)o(alidate)f(access)h(to)g(magnetic)g(tapes.)16
b(The)11 b Fj(shift)f Fn(account)g(facilities)g(permit)h(a)-64
1024 y(user)h(to)g(ha)o(v)o(e)h(se)o(v)o(eral)f(account)g
(identi\256ers,)g(and)g(to)g(change)g(these)g(identifers)f(while)h
(retaining)f(the)h(same)h(Unix)e(user)h(and)-64 1081
y(group)f(identi\256ers.)-64 1186 y(V)-5 b(alid)9 b Fl(user)o
(name/accountid)i Fn(pairs)e(are)i(maintained)e(in)g
Fl(/etc/account)p Fn(.)17 b(The)10 b(current)g(account)f(may)h(be)g
(changed)g(with)f(the)-64 1242 y Fl(newacct)j Fn(command,)g(or)f
(queried)g(with)f(the)h Fl(getacct)h Fn(function.)-64
1435 y Fi(7.1)60 b(Account)14 b(File)4 1556 y Fe(\017)23
b Fj(N)o(AME)50 1630 y Fl(/etc/account)11 b Fn(-)h(account)f(\256le)4
1721 y Fe(\017)23 b Fj(DESCRIPTION)50 1795 y Fn(The)11
b(account)g(\256le)g(contains)f(a)h(one-line)g(entry)g(for)g(each)h(v)o
(alid)e(pair)h(\(user)n(,account\),)g(of)h(the)f(form:)50
1868 y Fl(user)o(name)h(:)k(accountid)c(:)17 b(seq)11
b(::)p Fj(comments)50 1942 y Fn(where:)50 2043 y Fl(user)o(name:)56
b Fn(is)10 b(the)h(login)f(name)i(of)f(the)g(user)m(.)50
2113 y Fl(accountid:)55 b Fn(is)10 b(the)h(account)g(identi\256er)m(.)
17 b(It)11 b(is)f(a)i(string)e(of)h(a)h(maximum)f(of)h(eight)e
(characters.)50 2183 y Fl(seq:)181 b Fn(is)11 b(the)g(inde)o(x)f(of)i
Fj(accountid)e Fn(in)g(the)h(group)g(of)g(v)o(alid)f(accounts)h(for)g
Fj(username)p Fn(.)16 b(A)c(v)o(alue)e(of)i(0)f(means)309
2240 y(that)f(it)h(is)g(the)g(default)f(account)g(for)i(user)f
Fj(username)p Fn(.)50 2340 y(The)g(account)g(\256le)g(is)g(an)g(ASCII)h
(\256le)g(and)f(has)f(general)i(read)f(permission.)50
2414 y(An)f(account)g(entry)g(be)o(ginning)f(with)h(a)h(\252)g(+)f(")h
(\(plus)e(sign\),)h(means)h(that)f(the)h(contents)e(of)h(the)h(Y)-5
b(ello)o(w)10 b(P)o(ages)h(account)50 2470 y(\256le)g(should)f(be)h
(included)f(at)h(that)g(point.)k(All)10 b(subsequent)g(entries)g(in)h
(the)g(account)g(\256le)g(are)h(ignored.)-64 2664 y Fi(7.2)60
b(Get)14 b(Curr)o(ent)g(Account)g(Identi\256er)4 2785
y Fe(\017)23 b Fj(N)o(AME)50 2858 y Fl(getacct)11 b Fn(-)h(Get)f
(account)g(identi\256er)917 2958 y(57)p eop
%%Page: 58 62
58 61 bop -64 -125 a Fn(58)1215 b Ff(CHAPTER)12 b(7.)28
b(A)n(CCOUNT)11 b(F)m(A)n(CILITIES)4 46 y Fe(\017)23
b Fj(SYNOPSIS)50 121 y Fl(#include)11 b Fk(<)i(shif)5
b(t:h)14 b(>)50 196 y Fl(char*)d(getacct\(\);)4 290 y
Fe(\017)23 b Fj(DESCRIPTION)50 365 y Fl(getacct\(\))14
b Fn(returns)f(the)g(current)g(account)g(identi\256er)f(of)i(the)f(ef)o
(fecti)o(v)o(e)g(user)m(.)23 b(It)14 b(\256rst)f(checks)g(if)g(the)g
(en)n(vironmental)50 421 y(v)o(ariable)f Fj(A)o(CCOUNT)i
Fn(is)e(set.)22 b(If)13 b(it)f(is,)i(it)e(checks)h(in)f
Fj(/etc/account)f Fn(that)i(its)f(v)o(alue)g(is)h(v)o(alid)f(before)h
(returning)f(it.)21 b(If)50 478 y Fj(A)o(CCOUNT)11 b
Fn(is)g(not)g(set,)g(it)f(returns)h(the)g(default)f(account)h
(identi\256er)f(of)i(the)e(user)m(.)4 572 y Fe(\017)23
b Fj(RETURN)11 b(V)m(ALUE)50 647 y Fl(getacct)g Fn(returns)g(NULL)g(in)
f(case)i(of)f(an)g(error)m(.)18 b(Otherwise,)11 b(it)f(returns)h(a)g
(pointer)f(to)h(the)g(account)g(identi\256er)m(.)-64
843 y Fi(7.3)60 b(Change)15 b(Curr)o(ent)f(Account)4
965 y Fe(\017)23 b Fj(N)o(AME)50 1040 y Fl(newacct)12
b Fn(-)f(log)g(in)f(to)h(a)h(ne)o(w)f(account)4 1134
y Fe(\017)23 b Fj(SYNOPSIS)50 1209 y Fl(newacct)12 b([account])4
1303 y Fe(\017)23 b Fj(DESCRIPTION)50 1378 y Fl(newacct)16
b Fn(changes)g(a)g(user')m(s)g(account)g(identi\256cation.)29
b(Only)15 b(the)g(account-ID)h(is)f(changed.)31 b(The)15
b(user)h(remains)50 1435 y(logged)d(in)g(and)h(the)g(current)g
(directory)f(is)g(unchanged.)24 b(If)15 b Fj(ne)o(wacct)f
Fn(terminates)g(successfully)m(,)f(the)h(user)f(is)h(gi)o(v)o(en)50
1491 y(a)g(ne)o(w)f(shell,)h Fl(r)o(eplacing)g Fn(the)f(current)h
(shell.)23 b(Exported)13 b(v)o(ariables)g(retain)g(their)g(v)o(alues)g
(after)h(in)n(v)o(oking)e Fj(ne)o(wacct)p Fn(;)50 1547
y(ho)o(we)o(v)o(er)n(,)f(all)g(une)o(xported)f(v)o(ariables)h(are)g
(either)g(reset)h(to)e(their)h(default)f(v)o(alues)g(or)i(set)f(to)f
(null.)50 1623 y(W)n(ith)g(no)g(ar)o(gument,)h Fj(ne)o(wacct)g
Fn(changes)g(the)f(account)g(identi\256cation)f(back)h(to)h(the)f
(default)g(account)g(for)h(the)f(user)m(.)17 b(If)50
1679 y(an)11 b(account-ID)f(is)g(speci\256ed,)h Fj(ne)o(wacct)g
Fn(checks)f(that)g(it)g(is)h(a)g(v)o(alid)e(one.)16 b(The)11
b(en)n(vironment)f(v)o(ariable)g Fj(A)o(CCOUNT)h Fn(is)50
1735 y(set)g(with)f(the)h(ne)o(w)g(account)f(identi\256er)m(.)p
eop
%%Page: 59 63
59 62 bop -64 410 a Fp(Chapter)22 b(8)-64 649 y(General-Pur)o(pose)g
(Routines)-64 943 y Fi(8.1)60 b(Err)o(or)13 b(messages)h(and)i(codes)
-64 1102 y Fn(Whene)o(v)o(er)9 b(an)g(error)h(occurs)e(in)h(a)g
Fj(shift)e Fn(routine,)i(the)g(error)g(code)g(will)f(be)h(stored)f(in)h
(the)f(global)g(inte)o(ger)h(v)o(ariable)f Fl(serr)o(no)p
Fn(\(i.e.)-64 1158 y(\252SHIFT)i(errno"\).)16 b(The)9
b(Remote)h(File)g(Access)f(System)g(stores)g(error)h(codes)f(in)g(the)g
(v)o(ariable)g Fl(r\256o)p 1505 1158 14 2 v 16 w(err)o(no)i
Fn(\(see)f(Chapter)f Fl(??)p Fn(\).)-64 1215 y(The)16
b(v)o(ector)h(of)f(messages)g Fl(ssys)p 475 1215 V 15
w(errlist)g Fn(is)g(pro)o(vided)f(to)h(simplify)f(formatting)g(of)h
(error)h(messages.)32 b Fl(ssys)p 1728 1215 V 15 w(nerr)17
b Fn(is)f(the)-64 1271 y(number)c(of)f(messages)g(pro)o(vided)f(in)h
(the)g(table.)17 b(Its)10 b(v)o(alue)h(should)f(be)h(checked)g(before)h
(accessing)e(the)h(table)g(because)h(ne)o(w)-64 1328
y(error)h(codes)f(may)h(be)f(added)g(in)g(the)g(system)g(before)g(the)o
(y)g(are)h(added)f(in)g(the)g(table.)20 b(The)12 b(include)f(\256le)i
Fl(serr)o(no.h)h Fn(contains)-64 1384 y(all)d(the)g(kno)o(wn)f(error)i
(codes)e(and)h(the)g(descriptions)e(of)j(global)e(error)h(v)o
(ariables.)-64 1493 y Fl(exter)o(n)i(int)e(serr)o(no;)-64
1550 y(exter)o(n)i(int)e(ssys)p 215 1550 V 15 w(nerr;)-64
1606 y(exter)o(n)i(char)e(*)g(ssys)p 284 1606 V 16 w(errlist)p
Fa([)f(])p Fl(;)-64 1716 y(#include)i Fk(<)h(shif)5 b(t:h)13
b(>)-64 1825 y Fl(void)d(sperr)o(or\(const)j(char*)e(s\);)-64
1934 y(sperr)o(or)g Fn(produces)e(a)h(short)f(error)h(message)g(on)f
(the)h(standard)e(error)j(\256le)f(that)f(describes)g(the)g(last)g
Fj(shift)g Fn(system)g(error)h(and/or)-64 1990 y(Remote)i(File)g
(Access)f(System)h(error)g(encountered.)17 b(sperror)11
b(prints)f(the)i(ar)o(gument)f(string)f(s)i(\256rst,)g(then)f(a)g
(colon,)h(then)f(the)-64 2047 y(message\(s\))h(and)f(a)g(ne)o(wline.)
-64 2261 y Fi(8.2)60 b(SYSREQ/TCP)14 b(interface)-64
2420 y Fn(All)h(shift)f(serv)o(ers)h(ha)o(v)o(e)h(access)f(to)g(the)g
(CERNVM)h Fl(SYSREQ)g Fn(service)f(through)f Fg(TCP)p
Fn(/)p Fg(IP)p Fn(.)29 b(Amongst)14 b(other)h(things)e(this)-64
2476 y(gi)o(v)o(es)e(access)g(to)g(the)g(T)l(ape)g(Management)h(System)
f(\(TMS\).)-64 2668 y Fq(8.2.1)51 b(SYSREQ)11 b(Command)4
2777 y Fe(\017)23 b Fj(SYNOPSIS)50 2858 y Fl(sysr)o(eq)11
b Fn(service)p 316 2858 V 16 w(name)h(request)917 2958
y(59)p eop
%%Page: 60 64
60 63 bop -64 -125 a Fn(60)1021 b Ff(CHAPTER)11 b(8.)28
b(GENERAL-PURPOSE)11 b(R)n(OUTINES)4 46 y Fe(\017)23
b Fj(DESCRIPTION)50 121 y Fl(sysr)o(eq)12 b Fn(sends)g(a)g(request)g
(to)g(service)p 655 121 14 2 v 16 w(name)h(through)e(the)h(network.)19
b(Special)12 b(characters)h(like)e(brackets)g(should)g(be)50
177 y(escaped.)16 b(T)l(wo)11 b(e)o(xamples)g(are:)50
302 y Fh({\\tt)28 b(sysreq)h(TMS)f(qvol)h(CUT031})50
415 y({\\tt)f(sysreq)h(TMS)f("query)h(vid)f(CUT031)h(\(owner"})4
540 y Fe(\017)23 b Fj(RETURN)11 b(CODES)50 615 y Fn(Non)f(zero)i
(return)f(codes)g(indicate)f(an)h(error)m(.)-64 790 y
Fq(8.2.2)51 b(Issue)13 b(a)f(SYSREQ)g(r)o(equest)-64
927 y Fh(int)28 b(sysreq\(const)j(char*)d(service,)i(const)f(char*)f
(command,)i(int)e(*coml,)-64 1033 y(char)h(*)e(reply,)i(int)f(*)g
(repl\);)-64 1139 y Fn(The)11 b(ar)o(guments)g(for)h(the)e
Fl(sysr)o(eq)i Fn(function)e(are)h(as)h(follo)o(ws)d(:)-64
1295 y Fl(service:)110 b Fn(A)11 b(character)h(string)e(containing)f
(the)i(service)g(to)g(contact)g(\(at)g(present)g(only)f(\252TMS")h(may)
h(be)f(used\).)-64 1389 y Fl(command:)52 b Fn(A)11 b(character)h
(string)e(containing)f(the)i(command)h(to)f(issue.)-64
1483 y Fl(coml:)150 b Fn(An)11 b(inte)o(ger)g(containing)e(the)i
(length)f(of)h(the)g(command)h(string.)-64 1577 y Fl(r)o(eply:)144
b Fn(A)11 b(pointer)f(to)h(a)h(user)f(allocated)f(b)o(uf)o(fer)i(in)e
(which)h(the)g(SYSREQ)g(reply)g(will)f(be)i(placed.)-64
1670 y Fl(r)o(epl:)167 b Fn(An)11 b(inte)o(ger)g(containg)f(the)h(user)
g(b)o(uf)o(fer)g(length)f(on)h(entry)g(and)g(the)g(reply)g(length)f(on)
g(e)o(xit.)-64 1827 y(On)h(failure,)g Fl(sysr)o(eq)g
Fn(returns)g(a)g(non-zero)g(error)h(code.)17 b(The)11
b(error)g(code)h(is)e(de\256ned)h(in)g Fk(<)i(sy)r(sr)q(eq)r(:h)g(>)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
